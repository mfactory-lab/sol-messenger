var pn=Object.defineProperty;var gn=(t,e,n)=>e in t?pn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var G=(t,e,n)=>(gn(t,typeof e!="symbol"?e+"":e,n),n);import{c as fn,a as yn,Q as bn,P as vn,D as An,N as _n,b as wn,i as kn,u as Ce,d as Fe,e as O,o as g,f as D,g as h,h as I,w as V,v as Mn,j as r,F as $,r as oe,t as H,k as q,l as A,m as T,n as _e,p as Cn,q as Sn,S as Dn,s as w,x as u,y as Rt,z as N,A as l,B as te,C as j,E as Me,G as xn,H as W,I as U,J as In,K as ne,L as he,M as nt,W as Wt,O as Re,R as We,T as qe,U as En,V as Ut,X as Ae,Y as He,Z as ee,_ as Bn,$ as Nt,a0 as at,a1 as Tn,a2 as Nn,a3 as Gt,a4 as st,a5 as Pn,a6 as Te,a7 as _t,a8 as Kn,a9 as Pt,aa as y,ab as be,ac as Kt,ad as re,ae as pe,af as Ge,ag as jt,ah as ze,ai as zn,aj as it,ak as Vt,al as Dt,am as Ln,an as Rn,ao as Wn,ap as qn,aq as On,ar as de,as as ce,at as qt,au as le,av as ve,aw as je,ax as Oe,ay as Ve,az as Qt,aA as $t,aB as Fn,aC as Hn,aD as Se,aE as Un,aF as se,aG as Yt,aH as Ee,aI as Gn,aJ as Ot,aK as jn,aL as Vn,aM as Qn,aN as $n,aO as Yn,aP as Xn,aQ as Jn,aR as zt,aS as Zn,aT as Xt,aU as ea,aV as ta,aW as Ft,aX as na,aY as aa,aZ as sa,a_ as ia,a$ as oa,b0 as la,b1 as ra,b2 as ca,b3 as ua,b4 as da,b5 as ma,b6 as ha,b7 as pa,b8 as ga,b9 as fa,ba as ya,bb as ba,bc as va,bd as Aa,be as _a,bf as wa,bg as ka,bh as Ma,bi as Ca,bj as Sa,bk as Da,bl as xa,bm as Ia,bn as Ea,bo as Ba,bp as Ta,bq as Na,br as Pa,bs as Ka,bt as za,bu as La,bv as Ra,bw as Wa,bx as qa,by as Oa,bz as Fa,bA as Ha,bB as Ua,bC as Ga,bD as ja,bE as Va,bF as Qa,bG as $a}from"./vendor.2d48e3a3.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const Ya=({app:t})=>{t.use(fn())},Xa=Object.freeze(Object.defineProperty({__proto__:null,install:Ya},Symbol.toStringTag,{value:"Module"})),Ja=({app:t})=>{const e=yn();t.use(e)},Za=Object.freeze(Object.defineProperty({__proto__:null,install:Ja},Symbol.toStringTag,{value:"Module"})),es=({app:t})=>{t.use(bn,{plugins:{Dark:vn,Dialog:An,Notify:_n,LocalStorage:wn},iconSet:kn})},ts=Object.freeze(Object.defineProperty({__proto__:null,install:es},Symbol.toStringTag,{value:"Module"}));function ns(){const{dark:t}=Ce(),e=Fe("theme-mode",t.isActive);return t.set(e.value),{isActive:e,set(n){t.set(n),e.value=t.isActive},toggle(){t.toggle(),e.value=t.isActive}}}const Ue=[],Jt={id:"devnet",name:"DevNet",cluster:"devnet",url:"https://devnet.rpcpool.com/"};Ue.push(Jt);var Ht;const as=(Ht=Ue.find(t=>t.id==={}.VITE_CONNECTION_ENDPOINT))!=null?Ht:Jt,ss="confirmed",is=12e4,wt=[`<span>Public channels</span> are non-encrypted and available to anyone, both for reading and writing.</br></br>
    <span>Public channels</span> are encrypted, and new users need to request approval to join them.</br>
    Depending on the \u2018Members can approve\u2019 setting, such requests can be approved either by channel\u2019s 
    owner/admin only, or by any authorized member of the channel.
    `,"Any authorized channel member can approve new requests to join","This setting determines how many messages will be available in chat until they are updated with new messages"],os="https://twitter.com/JPoolSolana",ls="https://t.me/jpool_solana",rs="https://t.me/jpoolsolana",cs="https://discord.gg/qR4BA9QXVR",us="https://jfactory.ch",ds="https://jpool.one",ms="https://svt.one",hs="https://staking.kiwi/",ps={class:"container"},gs={class:"footer-section"},fs={class:"footer-info"},ys={class:"theme"},bs={class:"switch"},vs=h("span",{class:"slider round"},null,-1),As=h("div",{class:"copyright"},[I(" \xA9 Copyright 2022 cgram.one. All rights reserved."),h("br"),I("Powered by jFactory ")],-1),_s={class:"footer-links"},ws={class:"social"},ks=["href"],Ms=h("span",null,[I("official"),h("br"),I("channel")],-1),Cs=[Ms],Ss=["href"],Ds=["href"],xs=["href"],Is=["href"],Es=O({__name:"AppFooter",setup(t){const e=ns(),n=[{name:"JFACTORY",link:us},{name:"JPOOL",link:ds},{name:"STAKING KIWI",link:hs},{name:"SOLANA VALIDATOR TOOLKIT",link:ms}];return(s,i)=>(g(),D("footer",null,[h("div",ps,[h("div",gs,[h("div",fs,[h("div",ys,[I(" Dark mode "),h("label",bs,[V(h("input",{"onUpdate:modelValue":i[0]||(i[0]=a=>r(e).isActive.value=a),type:"checkbox",onClick:i[1]||(i[1]=(...a)=>r(e).toggle&&r(e).toggle(...a))},null,512),[[Mn,r(e).isActive.value]]),vs])]),As]),h("div",_s,[h("div",ws,[h("a",{href:r(ls),target:"_blank",class:"social-link social-link-text"},Cs,8,ks),h("a",{href:r(rs),target:"_blank",class:"social-link telegram"},null,8,Ss),h("a",{href:r(os),target:"_blank",class:"social-link twitter"},null,8,Ds),h("a",{href:r(cs),target:"_blank",class:"social-link discord"},null,8,xs)]),h("nav",null,[h("ul",null,[(g(),D($,null,oe(n,({name:a,link:o})=>h("li",{key:a},[h("a",{target:"_blank",href:o},H(a),9,Is)])),64))])])])])])]))}});function Bs(){const t=q(Ts());return{userAgent:t,isMobileOs:A(()=>Ns(t.value)),isWebView:A(()=>Ps(t.value))}}let kt;function Ts(){var t,e;return kt===void 0&&(kt=(e=(t=globalThis.navigator)==null?void 0:t.userAgent)!=null?e:null),kt}function Ns(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)}function Ps(t){return/(WebView|(Phantom|Solflare)|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function Qe(t,e=4){return t instanceof T&&(t=t.toBase58()),`${t.slice(0,e)}...${t.slice(-e)}`}function Zt(t){return(t==null?void 0:t.name)&&t.name!==""?t.name:Qe(t.authority)}const en=t=>{if(!t)return{background:"#000"};let e=0;for(let s=0;s<t.length;s++)e=t.charCodeAt(s)+((e<<5)-e),e=e&e;let n="#";for(let s=0;s<3;s++)n+=`00${(e>>s*8&255).toString(16)}`.substr(-2);return{background:n}},Ks="/assets/clover.968404b0.svg",zs="/assets/ledger.40cf6861.svg",Ls="/assets/mathwallet.1d763e81.svg",ot=t=>(Re("data-v-269ee747"),t=t(),We(),t),Rs=ot(()=>h("div",{class:"text-h6 text-center"}," Your wallet ",-1)),Ws={class:"q-gutter-md row justify-between"},qs=ot(()=>h("span",{name:"wallet"},"Disconnect",-1)),Os=ot(()=>h("span",{name:"wallet"},"Ok",-1)),Fs=ot(()=>h("div",{class:"text-h6"}," Connect to a wallet ",-1)),Hs={class:"text-light-gray text-caption full-width text-no-wrap",style:{"text-overflow":"ellipsis",overflow:"hidden"}},Us=["src","alt"],Gs=O({__name:"ConnectWallet",setup(t){const e={priority:{solflare:10,phantom:20,sollet:5,nufi:5,blocto:1},icons:{clover:Ks},darkIcons:{ledger:zs,mathwallet:Ls},deepLinks:{phantom:"https://phantom.app/ul/browse/{uri}?ref={ref}",solflare:"https://solflare.com/ul/browse/{uri}?ref={ref}"}},{userAgent:n,isWebView:s,isMobileOs:i}=Bs(),a={close:nt},o=E=>[Wt.Installed,Wt.Loadable].includes(E.readyState);Ce();const c=_e(),{connected:d,connecting:m}=c;Cn();const p=A(()=>i.value&&!s.value);if(s.value){const E=String(n.value).toLowerCase();E.includes("phantom")?(c.select(Sn),c.connect()):E.includes("solflare")&&(c.select(Dn),c.connect())}const f=A(()=>{var E,k;return(k=(E=c.publicKey.value)==null?void 0:E.toBase58())!=null?k:""}),b=A(()=>Qe(f.value)),M=A(()=>[...c.wallets.value].map(E=>{var z,X;const k=E.adapter.name.toLowerCase();return E.adapter.icon=(X=(z=e.darkIcons[k])!=null?z:e.icons[k])!=null?X:E.adapter.icon,p.value&&e.deepLinks[k]&&(E.deepLink=e.deepLinks[k].replace("{uri}",location.href).replace("{ref}",location.origin)),E}).sort((E,k)=>{var ue,Ne;const z=(ue=e.priority[E.adapter.name.toLowerCase()])!=null?ue:1;return((Ne=e.priority[k.adapter.name.toLowerCase()])!=null?Ne:1)-z+((o(k)?1:0)-(o(E)?1:0))})),S=A(()=>p.value?M.value.filter(E=>!!E.deepLink):M.value),F=q(!1);async function x(E){await c.select(E.adapter.name),F.value=!1,await c.connect()}function _(){F.value=!1,c.disconnect()}function C(){F.value=!0}function R(){F.value=!1}return(E,k)=>(g(),D($,null,[r(d)?(g(),w(N,Rt({key:0},E.$attrs,{ripple:!1,color:"primary-gray","text-color":"white",square:"",unelevated:"",onClick:C}),{default:u(()=>[I(H(r(b)),1)]),_:1},16)):(g(),w(N,Rt({key:1},E.$attrs,{color:"primary-gray",class:"q-pa-none btn","text-color":"white",square:"",flat:"",ripple:!1,loading:r(m),onClick:C}),{default:u(()=>[I(" CONNECT WALLET ")]),_:1},16,["loading"])),l(he,{modelValue:r(F),"onUpdate:modelValue":k[0]||(k[0]=z=>ne(F)?F.value=z:null),"transition-duration":"150","transition-show":"fade","transition-hide":"fade"},{default:u(()=>[r(d)?(g(),w(te,{key:0},{default:u(()=>[l(j,{class:"relative-position"},{default:u(()=>[Rs,l(N,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:a.close,size:"md",onClick:R},null,8,["icon"])]),_:1}),l(Me),l(j,null,{default:u(()=>[I(H(r(f)),1)]),_:1}),l(Me),l(j,null,{default:u(()=>[h("div",Ws,[l(N,{class:"disconnect-btn","text-color":"black",square:"",flat:"",onClick:_},{default:u(()=>[qs]),_:1}),l(N,{class:"disconnect-btn","text-color":"black",square:"",flat:"",onClick:R},{default:u(()=>[Os]),_:1})])]),_:1})]),_:1})):(g(),w(te,{key:1,class:"wallet-connect-card"},{default:u(()=>[l(j,null,{default:u(()=>[Fs,l(N,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:a.close,size:"md",onClick:R},null,8,["icon"])]),_:1}),l(Me),l(j,{style:{"max-height":"80vh"},class:"scroll"},{default:u(()=>[l(xn,{grid:"",rows:r(S),"row-key":"name","hide-pagination":"","hide-header":"","rows-per-page-options":[100]},{item:u(({row:z})=>[(g(),D("div",{key:`wallet-${z.adapter.name}`,class:"col-12 col-md-6"},[l(W,{clickable:"",href:z.deepLink,onClick:X=>z.deepLink?!0:x(z)},{default:u(()=>[l(U,null,{default:u(()=>[h("b",null,H(z.adapter.name),1),h("div",Hs,H(z.adapter.url),1)]),_:2},1024),l(U,{avatar:""},{default:u(()=>[l(In,{square:""},{default:u(()=>[h("img",{src:z.adapter.icon,alt:z.adapter.name},null,8,Us)]),_:2},1024)]),_:2},1024)]),_:2},1032,["href","onClick"])]))]),_:1},8,["rows"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])],64))}});const ae=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},js=ae(Gs,[["__scopeId","data-v-269ee747"]]),lt=qe({id:"connection",state:()=>({commitment:ss,confirmTransactionInitialTimeout:is,rpc:En("rpc","")}),getters:{endpoint(t){var e;return(e=Ue.find(n=>n.id===t.rpc))!=null?e:as},connection(t){return console.log("[connection]",this.endpoint.url),new Ut(this.endpoint.url,{confirmTransactionInitialTimeout:t.confirmTransactionInitialTimeout,commitment:t.commitment})},cluster(){return this.endpoint.cluster}},actions:{setRpc(t){this.rpc=t},setCommitment(t){this.commitment=t}}}),Vs=O({__name:"ClusterSelector",setup(t){const e=lt(),{connected:n,connect:s,disconnect:i,autoConnect:a}=_e(),o=[Ue.filter(m=>m.cluster==="mainnet-beta"),Ue.filter(m=>m.cluster!=="mainnet-beta")],c=A(()=>e.endpoint),d=m=>{n&&e.cluster!==m.cluster&&(i(),a.value&&s()),e.setRpc(m.id)};return(m,p)=>(g(),w(Bn,{label:r(c).name,"model-value":!1,"auto-close":"",color:"secondary","text-color":"#000",square:"",unelevated:"",ripple:!1},{default:u(()=>[l(Ae,null,{default:u(()=>[(g(),D($,null,oe(o,(f,b)=>(g(),D($,{key:`${b}-cluster-group`},[(g(!0),D($,null,oe(f,M=>(g(),w(W,{key:M.id,clickable:"",onClick:S=>d(M)},{default:u(()=>[(g(),w(U,{key:`${M.id}-item`},{default:u(()=>[l(He,null,{default:u(()=>[h("b",null,H(M.name),1)]),_:2},1024),I(" "+H(M.url),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128)),b!==o.length-1?(g(),w(Me,{key:0})):ee("",!0)],64))),64))]),_:1})]),_:1},8,["label"]))}});const Qs={},$s={class:"app-header"},Ys={class:"container"},Xs={class:"app-header__info"},Js={class:"app-header__logo"},Zs={class:"logo-wrapper"},ei=h("div",{class:"app-header__title"},[h("h1",null,[I("BLOCKCHAIN "),h("br"),I(" messenger "),h("span",{class:"marked"},"SOLANA")])],-1),ti={class:"app-header__right"},ni={class:"app-header__buttons"};function ai(t,e){const n=Nt("router-link"),s=Vs,i=js;return g(),D("header",$s,[h("div",Ys,[h("div",Xs,[h("div",Js,[h("div",Zs,[l(n,{to:"/"})])]),ei]),l(at),h("div",ti,[h("div",ni,[l(s,{class:"app-header__cluster-btn header-btn"}),l(i,{class:"app-header__wallet-btn header-btn"})])])])])}const si=ae(Qs,[["render",ai]]),ii={};function oi(t,e){const n=si,s=Nt("router-view"),i=Es;return g(),w(Tn,{view:"lfh Lpr lff"},{default:u(()=>[l(n),l(Nn,null,{default:u(()=>[l(s)]),_:1}),l(i)]),_:1})}const li=ae(ii,[["render",oi]]),ri={default:li,empty:()=>Gt(()=>import("./empty.8d63cb83.js"),["assets/empty.8d63cb83.js","assets/vendor.2d48e3a3.js"])};function ci(t){return t.map(e=>{var n;return{path:e.path,component:ri[((n=e.meta)==null?void 0:n.layout)||"default"],children:[{...e,path:""}]}})}const ui="/assets/search.b4fadb1c.svg",di="/assets/transfer.796e9da5.svg",mi="/assets/plus.ee413328.svg",hi={class:"how-it-works"},pi={class:"app-info"},gi=h("div",{class:"app-info__title"}," JOIN A CHANNEL ",-1),fi={class:"app-info__list"},yi=["innerHTML"],bi={class:"app-info"},vi=h("div",{class:"app-info__title"}," CREATE YOUR OWN CHANNEL ",-1),Ai={class:"app-info__list"},_i=["innerHTML"],wi=O({__name:"HowItWorks",setup(t){const e=["For <span>public channels</span>, you can read or send messages without limitations.",`In order to join one of the existing private channels, click
        <img src="${ui}" class="icon" alt="search">
        (BROWSE CHANNELS) at the bottom of the left-side panel.`,`Find a channel you are interested in and click
        <img src="${di}" class="icon" alt="transfer">
        (REQUEST TO JOIN). Your status for that channel will be set to Pending
        Approval until your request has been accepted. While awaiting approval,
        all messages in the channel will appear scrambled.`,`After the private channel's owner or admin approves your membership,your
        status will change to Authorized. You will be able to read the channel
        and send messages.`],n=["You can create a channel of your own as well.",`Click <img src="${mi}" class="icon" alt="search"> (CREATE A CHANNEL) 
  at the bottom of the left-side panel, then choose between Private and Public options.`,"A public channel is open to anyone for reading and writing, and no encryption is used.",`If you create a private channel, joining it will require your approval. You will see a red 
  notification badge above the channel list if there are approval requests pending.`];return(s,i)=>(g(),D("div",hi,[h("div",pi,[gi,h("ul",fi,[(g(),D($,null,oe(e,a=>h("li",{key:a},[h("p",{innerHTML:a},null,8,yi)])),64))])]),h("div",bi,[vi,h("ul",Ai,[(g(),D($,null,oe(n,a=>h("li",{key:a},[h("p",{innerHTML:a},null,8,_i)])),64))])])]))}});const $e=qe("user",()=>{const t=st(),e=q();Pn(()=>{var d;const c=(d=t.value)==null?void 0:d.publicKey;if(c){const m=Fe(c.toString(),()=>_t.encode(Te.generate().secretKey));n(m.value)}else e.value=void 0});function n(c){e.value=Te.fromSecretKey(_t.decode(c))}function s(){var m;const c=(m=t.value)==null?void 0:m.publicKey;if(!c)return;const d=Fe(c.toString(),"");n(d.value=_t.encode(Te.generate().secretKey))}function i(c){var p;const d=(p=t.value)==null?void 0:p.publicKey;if(!d)return;const m=Fe(d.toString(),"");n(m.value=c)}function a(){var b;const c=(b=t.value)==null?void 0:b.publicKey;if(!c)return;const m={backupKey:Fe(c.toString(),"").value},p=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(m))}`,f=document.createElement("a");f.setAttribute("href",p),f.setAttribute("download","backup_key.json"),f.click()}async function o(){var f;const c=(f=t.value)==null?void 0:f.publicKey;return await await new Ut(Kn("devnet"),"confirmed").getBalance(c)/Pt>.1}return{keypair:e,generateKey:s,importKey:i,exportKey:a,userBalance:o}}),ki="0.0.11",Mi="messenger",Ci=[{name:"initChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"key",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"InitChannelData"}}]},{name:"deleteChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"joinChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"key",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"JoinChannelData"}}]},{name:"leaveChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"grantAccessMember",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!1,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"GrantAccessMemberData"}}]},{name:"addMember",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"invitee",isMut:!1,isSigner:!1},{name:"inviteeMembership",isMut:!0,isSigner:!1},{name:"inviteeDevice",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddMemberData"}}]},{name:"authorizeMember",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AuthorizeMemberData"}}]},{name:"deleteMember",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"membershipAuthority",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"addDevice",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddDeviceData"}}]},{name:"deleteDevice",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"deviceAuthority",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"postMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"message",type:"string"}]},{name:"readMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"messageId",type:"u64"}]}],Si=[{name:"Channel",type:{kind:"struct",fields:[{name:"workspace",docs:["Workspace used to group channels"],type:"string"},{name:"name",docs:["Name of the channel"],type:"string"},{name:"creator",docs:["Channel creator"],type:"publicKey"},{name:"createdAt",docs:["Creation date"],type:"i64"},{name:"lastMessageAt",docs:["Last message date"],type:"i64"},{name:"flags",docs:["Channel flags"],type:"u8"},{name:"memberCount",docs:["Number of members"],type:"u16"},{name:"messageCount",docs:["Message counter"],type:"u64"},{name:"maxMessages",docs:["The maximum number of messages that are stored in [messages]"],type:"u16"},{name:"messages",docs:["List of latest messages"],type:{vec:{defined:"Message"}}}]}},{name:"ChannelDevice",type:{kind:"struct",fields:[{name:"channel",docs:["Associated [Channel] address"],type:"publicKey"},{name:"authority",docs:["Authority of the [ChannelKey]"],type:"publicKey"},{name:"key",docs:["The device key used to encrypt the `cek`"],type:"publicKey"},{name:"cek",docs:["The content encryption key (CEK)"],type:{defined:"CEKData"}},{name:"bump",docs:["Bump seed for deriving PDA seeds"],type:"u8"}]}},{name:"ChannelMembership",type:{kind:"struct",fields:[{name:"channel",docs:["Associated [Channel] address"],type:"publicKey"},{name:"authority",docs:["Authority of membership"],type:"publicKey"},{name:"status",docs:["Status of membership"],type:{defined:"ChannelMembershipStatus"}},{name:"statusTarget",docs:["Status target key"],type:{option:"publicKey"}},{name:"name",docs:["Name of the channel member"],type:"string"},{name:"lastReadMessageId",docs:["The last read message id"],type:"u64"},{name:"createdAt",docs:["Creation date"],type:"i64"},{name:"flags",docs:["Membership flags"],type:"u8"},{name:"bump",docs:["Bump seed for deriving PDA seeds"],type:"u8"}]}}],Di=[{name:"AddDeviceData",type:{kind:"struct",fields:[{name:"key",type:"publicKey"},{name:"cek",type:{defined:"CEKData"}}]}},{name:"AddMemberData",type:{kind:"struct",fields:[{name:"name",docs:["Member name"],type:"string"},{name:"flags",docs:["Membership flags, only `admin` and `owner` can set membership flags"],type:"u8"},{name:"cek",docs:["Content Encryption Key"],type:{defined:"CEKData"}},{name:"key",docs:["Device key"],type:"publicKey"}]}},{name:"AuthorizeMemberData",type:{kind:"struct",fields:[{name:"cek",type:{defined:"CEKData"}}]}},{name:"GrantAccessMemberData",type:{kind:"struct",fields:[{name:"flags",type:"u8"}]}},{name:"InitChannelData",type:{kind:"struct",fields:[{name:"workspace",type:"string"},{name:"name",type:"string"},{name:"maxMessages",type:"u16"},{name:"memberName",type:"string"},{name:"cek",type:{defined:"CEKData"}},{name:"public",type:"bool"},{name:"permissionless",type:"bool"}]}},{name:"JoinChannelData",type:{kind:"struct",fields:[{name:"name",type:"string"},{name:"authority",type:{option:"publicKey"}}]}},{name:"CEKData",type:{kind:"struct",fields:[{name:"header",docs:["The header information for the CEK"],type:"string"},{name:"encryptedKey",docs:["The CEK itself"],type:"string"}]}},{name:"Message",type:{kind:"struct",fields:[{name:"id",docs:["Uniq message id"],type:"u64"},{name:"sender",docs:["The message sender id"],type:"publicKey"},{name:"createdAt",docs:["The unix timestamp at which the message was received"],type:"i64"},{name:"flags",docs:["Message flags"],type:"u8"},{name:"content",docs:["The (typically encrypted) message content"],type:"string"}]}},{name:"ChannelMembershipStatus",type:{kind:"enum",variants:[{name:"Authorized"},{name:"Pending"}]}}],xi=[{name:"NewChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"creator",type:"publicKey",index:!1},{name:"name",type:"string",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"creator",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"NewMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"message",type:{defined:"Message"},index:!1}]},{name:"JoinChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"LeaveChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!0},{name:"timestamp",type:"i64",index:!1}]},{name:"AddMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"AuthorizeMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"AddDeviceEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteDeviceEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],Ii=[{code:6e3,name:"Unauthorized",msg:"Unauthorized"},{code:6001,name:"InvalidChannel",msg:"Invalid channel"},{code:6002,name:"InvalidMembership",msg:"Invalid membership"},{code:6003,name:"InvalidDevice",msg:"Invalid device"},{code:6004,name:"InvalidMessage",msg:"Invalid message"},{code:6005,name:"NameTooLong",msg:"Name too long"},{code:6006,name:"WorkspaceTooLong",msg:"Workspace too long"},{code:6007,name:"MessageTooLong",msg:"Message too long"}],Ei={address:"4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw",origin:"anchor",binaryVersion:"0.25.0",libVersion:"0.25.0"},Bi={version:ki,name:Mi,instructions:Ci,accounts:Si,types:Di,events:xi,errors:Ii,metadata:Ei},Ti=new y.FixableBeetArgsStruct([["id",y.u64],["sender",be],["createdAt",y.i64],["flags",y.u8],["content",y.utf8String]],"Message"),xt=[49,159,99,106,220,87,219,88];class fe{constructor(e,n,s,i,a,o,c,d,m,p){this.workspace=e,this.name=n,this.creator=s,this.createdAt=i,this.lastMessageAt=a,this.flags=o,this.memberCount=c,this.messageCount=d,this.maxMessages=m,this.messages=p}static fromArgs(e){return new fe(e.workspace,e.name,e.creator,e.createdAt,e.lastMessageAt,e.flags,e.memberCount,e.messageCount,e.maxMessages,e.messages)}static fromAccountInfo(e,n=0){return fe.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find Channel account at ${n}`);return fe.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Kt.fromStruct(e,Je)}static deserialize(e,n=0){return Je.deserialize(e,n)}serialize(){return Je.serialize({accountDiscriminator:xt,...this})}static byteSize(e){const n=fe.fromArgs(e);return Je.toFixedFromValue({accountDiscriminator:xt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(fe.byteSize(e),s)}pretty(){return{workspace:this.workspace,name:this.name,creator:this.creator.toBase58(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),lastMessageAt:(()=>{const e=this.lastMessageAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),flags:this.flags,memberCount:this.memberCount,messageCount:(()=>{const e=this.messageCount;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),maxMessages:this.maxMessages,messages:this.messages}}}const Je=new y.FixableBeetStruct([["accountDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["workspace",y.utf8String],["name",y.utf8String],["creator",be],["createdAt",y.i64],["lastMessageAt",y.i64],["flags",y.u8],["memberCount",y.u16],["messageCount",y.u64],["maxMessages",y.u16],["messages",y.array(Ti)]],fe.fromArgs,"Channel"),Ye=new y.FixableBeetArgsStruct([["header",y.utf8String],["encryptedKey",y.utf8String]],"CEKData"),It=[163,153,9,169,176,51,204,146];class ye{constructor(e,n,s,i,a){this.channel=e,this.authority=n,this.key=s,this.cek=i,this.bump=a}static fromArgs(e){return new ye(e.channel,e.authority,e.key,e.cek,e.bump)}static fromAccountInfo(e,n=0){return ye.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find ChannelDevice account at ${n}`);return ye.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Kt.fromStruct(e,Ze)}static deserialize(e,n=0){return Ze.deserialize(e,n)}serialize(){return Ze.serialize({accountDiscriminator:It,...this})}static byteSize(e){const n=ye.fromArgs(e);return Ze.toFixedFromValue({accountDiscriminator:It,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(ye.byteSize(e),s)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),key:this.key.toBase58(),cek:this.cek,bump:this.bump}}}const Ze=new y.FixableBeetStruct([["accountDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["channel",be],["authority",be],["key",be],["cek",Ye],["bump",y.u8]],ye.fromArgs,"ChannelDevice");var Ke=(t=>(t[t.Authorized=0]="Authorized",t[t.Pending=1]="Pending",t))(Ke||{});const Ni=y.fixedScalarEnum(Ke),tt=[238,149,255,251,116,131,86,170];class ie{constructor(e,n,s,i,a,o,c,d,m){this.channel=e,this.authority=n,this.status=s,this.statusTarget=i,this.name=a,this.lastReadMessageId=o,this.createdAt=c,this.flags=d,this.bump=m}static fromArgs(e){return new ie(e.channel,e.authority,e.status,e.statusTarget,e.name,e.lastReadMessageId,e.createdAt,e.flags,e.bump)}static fromAccountInfo(e,n=0){return ie.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find ChannelMembership account at ${n}`);return ie.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Kt.fromStruct(e,et)}static deserialize(e,n=0){return et.deserialize(e,n)}serialize(){return et.serialize({accountDiscriminator:tt,...this})}static byteSize(e){const n=ie.fromArgs(e);return et.toFixedFromValue({accountDiscriminator:tt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(ie.byteSize(e),s)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),status:`ChannelMembershipStatus.${Ke[this.status]}`,statusTarget:this.statusTarget,name:this.name,lastReadMessageId:(()=>{const e=this.lastReadMessageId;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),flags:this.flags,bump:this.bump}}}const et=new y.FixableBeetStruct([["accountDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["channel",be],["authority",be],["status",Ni],["statusTarget",y.coption(be)],["name",y.utf8String],["lastReadMessageId",y.u64],["createdAt",y.i64],["flags",y.u8],["bump",y.u8]],ie.fromArgs,"ChannelMembership"),we=new Map,ke=new Map;class rt extends Error{constructor(){super("Unauthorized");G(this,"code",6e3);G(this,"name","Unauthorized");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,rt)}}we.set(6e3,()=>new rt);ke.set("Unauthorized",()=>new rt);class ct extends Error{constructor(){super("Invalid channel");G(this,"code",6001);G(this,"name","InvalidChannel");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ct)}}we.set(6001,()=>new ct);ke.set("InvalidChannel",()=>new ct);class ut extends Error{constructor(){super("Invalid membership");G(this,"code",6002);G(this,"name","InvalidMembership");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ut)}}we.set(6002,()=>new ut);ke.set("InvalidMembership",()=>new ut);class dt extends Error{constructor(){super("Invalid device");G(this,"code",6003);G(this,"name","InvalidDevice");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,dt)}}we.set(6003,()=>new dt);ke.set("InvalidDevice",()=>new dt);class mt extends Error{constructor(){super("Invalid message");G(this,"code",6004);G(this,"name","InvalidMessage");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,mt)}}we.set(6004,()=>new mt);ke.set("InvalidMessage",()=>new mt);class ht extends Error{constructor(){super("Name too long");G(this,"code",6005);G(this,"name","NameTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ht)}}we.set(6005,()=>new ht);ke.set("NameTooLong",()=>new ht);class pt extends Error{constructor(){super("Workspace too long");G(this,"code",6006);G(this,"name","WorkspaceTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,pt)}}we.set(6006,()=>new pt);ke.set("WorkspaceTooLong",()=>new pt);class gt extends Error{constructor(){super("Message too long");G(this,"code",6007);G(this,"name","MessageTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,gt)}}we.set(6007,()=>new gt);ke.set("MessageTooLong",()=>new gt);function me(t){const e=we.get(t);return e!=null?e():null}function Ie(t){const e=ke.get(t);return e!=null?e():null}const Pi=new y.FixableBeetArgsStruct([["key",be],["cek",Ye]],"AddDeviceData"),Ki=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",Pi]],"AddDeviceInstructionArgs"),zi=[21,27,66,42,18,30,14,18];function Li(t,e,n=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var o;const[s]=Ki.serialize({instructionDiscriminator:zi,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(o=t.systemProgram)!=null?o:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)i.push(c);return new pe({programId:n,keys:i,data:s})}const Ri=new y.FixableBeetArgsStruct([["name",y.utf8String],["flags",y.u8],["cek",Ye],["key",be]],"AddMemberData"),Wi=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",Ri]],"AddMemberInstructionArgs"),qi=[13,116,123,130,126,198,57,34];function Oi(t,e,n=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var o;const[s]=Wi.serialize({instructionDiscriminator:qi,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.invitee,isWritable:!1,isSigner:!1},{pubkey:t.inviteeMembership,isWritable:!0,isSigner:!1},{pubkey:t.inviteeDevice,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(o=t.systemProgram)!=null?o:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)i.push(c);return new pe({programId:n,keys:i,data:s})}const Fi=new y.FixableBeetArgsStruct([["cek",Ye]],"AuthorizeMemberData"),Hi=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",Fi]],"AuthorizeMemberInstructionArgs"),Ui=[194,123,189,175,86,225,93,128];function Gi(t,e,n=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var o;const[s]=Hi.serialize({instructionDiscriminator:Ui,...e}),i=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:(o=t.systemProgram)!=null?o:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)i.push(c);return new pe({programId:n,keys:i,data:s})}const ji=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)]],"DeleteChannelInstructionArgs"),Vi=[145,225,187,221,157,142,114,133];function Qi(t,e=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[n]=ji.serialize({instructionDiscriminator:Vi}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new pe({programId:e,keys:s,data:n})}const $i=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)]],"DeleteDeviceInstructionArgs"),Yi=[168,96,86,82,105,2,215,144];function Xi(t,e=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[n]=$i.serialize({instructionDiscriminator:Yi}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.deviceAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new pe({programId:e,keys:s,data:n})}const Ji=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)]],"DeleteMemberInstructionArgs"),Zi=[95,14,98,112,252,218,205,173];function eo(t,e=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[n]=Ji.serialize({instructionDiscriminator:Zi}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.membershipAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new pe({programId:e,keys:s,data:n})}const to=new y.BeetArgsStruct([["flags",y.u8]],"GrantAccessMemberData"),no=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",to]],"GrantAccessMemberInstructionArgs"),ao=[236,46,184,64,57,158,80,142];function so(t,e,n=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var o;const[s]=no.serialize({instructionDiscriminator:ao,...e}),i=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(o=t.systemProgram)!=null?o:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)i.push(c);return new pe({programId:n,keys:i,data:s})}const io=new y.FixableBeetArgsStruct([["workspace",y.utf8String],["name",y.utf8String],["maxMessages",y.u16],["memberName",y.utf8String],["cek",Ye],["public",y.bool],["permissionless",y.bool]],"InitChannelData"),oo=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",io]],"InitChannelInstructionArgs"),lo=[21,200,152,39,19,178,76,47];function ro(t,e,n=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var o;const[s]=oo.serialize({instructionDiscriminator:lo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.key,isWritable:!1,isSigner:!0},{pubkey:(o=t.systemProgram)!=null?o:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)i.push(c);return new pe({programId:n,keys:i,data:s})}const co=new y.FixableBeetArgsStruct([["name",y.utf8String],["authority",y.coption(be)]],"JoinChannelData"),uo=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",co]],"JoinChannelInstructionArgs"),mo=[124,39,115,89,217,26,38,29];function ho(t,e,n=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var o;const[s]=uo.serialize({instructionDiscriminator:mo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.key,isWritable:!1,isSigner:!0},{pubkey:(o=t.systemProgram)!=null?o:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)i.push(c);return new pe({programId:n,keys:i,data:s})}const po=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)]],"LeaveChannelInstructionArgs"),go=[104,0,75,134,95,80,68,186];function fo(t,e=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[n]=po.serialize({instructionDiscriminator:go}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new pe({programId:e,keys:s,data:n})}const yo=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["message",y.utf8String]],"PostMessageInstructionArgs"),bo=[214,50,100,209,38,34,7,76];function vo(t,e,n=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var o;const[s]=yo.serialize({instructionDiscriminator:bo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(o=t.systemProgram)!=null?o:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)i.push(c);return new pe({programId:n,keys:i,data:s})}const Ao=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["messageId",y.u64]],"ReadMessageInstructionArgs"),_o=[54,166,48,51,234,46,110,163];function wo(t,e,n=new T("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var o;const[s]=Ao.serialize({instructionDiscriminator:_o,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(o=t.systemProgram)!=null?o:re.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const c of t.anchorRemainingAccounts)i.push(c);return new pe({programId:n,keys:i,data:s})}const ko="4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw",Mo=new T(ko);function Et(t,e=new Uint8Array(4)){const n=Ge(t.toString(),"base10");return e.set(n,4-n.length),e}const Mt=t=>ze([Et(t.length),t]);function tn(t,e,n){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const s=ze([Mt(Ge(n)),Mt(new Uint8Array(0)),Mt(new Uint8Array(0)),Et(e)]),i=1;return zn.hash(ze([Et(i),t,s]))}const Bt=t=>Ge(t,"base64pad"),Tt=t=>jt(t,"base64pad"),Co=t=>Ge(t),So=t=>jt(t),Do=t=>Ge(t,"base58btc"),Be=it.NONCE_LENGTH,Le=it.TAG_LENGTH,nn=t=>{const e=new it.XChaCha20Poly1305(t);return(n,s)=>{const i=Vt.randomBytes(Be),a=e.seal(i,n,s);return{ciphertext:a.subarray(0,a.length-Le),tag:a.subarray(a.length-Le),iv:i}}},an=t=>{const e=new it.XChaCha20Poly1305(t);return(n,s,i,a)=>e.open(i,ze([n,s]),a)},sn="ECDH-ES+XC20PKW",on=256,xo=t=>e=>{const n=Dt.generateKeyPair(),s=Dt.sharedKey(n.secretKey,t),i=tn(s,on,sn),a=nn(i)(e);return{encryptedKey:a.ciphertext,tag:a.tag,iv:a.iv,epPubKey:n.publicKey}},Io=t=>(e,n,s,i)=>{const a=Dt.sharedKey(t,i),o=tn(a,on,sn);return an(o)(e,n,s)},Eo=t=>Array.isArray(t)?Te.fromSecretKey(Wn.Buffer.from(t)):typeof t=="string"?Te.fromSecretKey(Do(t)):Te.fromSecretKey(t),Bo=async(t=32)=>{const e=Vt.randomBytes(t);return Promise.resolve(e)},To=async(t,e)=>{const n=await xo(Ln(e.toBytes()))(t);return{header:Tt(ze([n.iv,n.tag,n.epPubKey])),encryptedKey:Tt(n.encryptedKey)}},No=async(t,e)=>{const n=Bt(t.header),s=n.subarray(0,Be),i=n.subarray(Be,Be+Le),a=n.subarray(Be+Le),o=Bt(t.encryptedKey),c=Eo(e).secretKey,d=Rn(c),m=await Io(d)(o,i,s,a);if(m===null)throw new Error("There was a problem decrypting the CEK");return m},Po=async(t,e)=>{const n=await nn(e)(Co(t));return Tt(ze([n.iv,n.ciphertext,n.tag]))},Ko=async(t,e)=>{const n=Bt(t),s=n.subarray(0,Be),i=n.subarray(Be,-Le),a=n.subarray(-Le),o=await an(e)(i,a,s);if(o===null)throw new Error("There was an error decoding the message!");return So(o)},zo={maxWorkspaceLength:32,maxChannelNameLength:32,maxMemberNameLength:32,maxMessageLength:400,maxCEKLength:100};class Lo{constructor(e,n){G(this,"programId",Mo);G(this,"constants",zo);G(this,"workspace");G(this,"_coder");G(this,"_events");G(this,"utils",{channel:{isPublic:e=>(e.flags&1)>0,isPermissionless:e=>(e.flags&2)>0},member:{isAuthorized:e=>e.status===Ke.Authorized,isPending:e=>e.status===Ke.Pending,isOwner:e=>e.flags>=255,isAdmin:e=>(e.flags&7)===7,canAddMember:e=>(e.flags&1)>0,canDeleteMember:e=>(e.flags&2)>0,canAuthorizeMember:e=>(e.flags&4)>0},message:{isEncrypted:e=>(e.flags&1)>0}});this.provider=e,this.keypair=n,this._coder=new qn(Bi),this._events=new On(this.programId,e,this._coder)}get connection(){return this.provider.connection}addEventListener(e,n){return this._events.addEventListener(e,(s,i,a)=>{a!=="1111111111111111111111111111111111111111111111111111111111111111"&&n(s,i,a)})}async removeEventListener(e){return await this._events.removeEventListener(e)}setKeypair(e){this.keypair=e}async loadAllChannels(e={}){const n=fe.gpaBuilder().addFilter("accountDiscriminator",xt);return this.workspace!==void 0&&n.addFilter("workspace",this.workspace),e.name&&n.addFilter("name",e.name),e.creator&&n.addFilter("creator",e.creator),(await n.run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:fe.fromAccountInfo(s.account)[0]}))}async loadChannel(e,n){return fe.fromAccountAddress(this.provider.connection,e,n)}async loadChannelMembers(e){return(await ie.gpaBuilder().addFilter("accountDiscriminator",tt).addFilter("channel",e).run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:ie.fromAccountInfo(s.account)[0]}))}async loadMemberships(){return(await ie.gpaBuilder().addFilter("accountDiscriminator",tt).addFilter("authority",this.provider.publicKey).run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:ie.fromAccountInfo(s.account)[0]}))}async loadMembership(e,n){return ie.fromAccountAddress(this.provider.connection,e,n)}async getMembershipPDA(e,n){return n=n!=null?n:this.provider.publicKey,await T.findProgramAddress([e.toBuffer(),n.toBuffer()],this.programId)}async loadDevices(e,n){return(await ye.gpaBuilder().addFilter("accountDiscriminator",It).addFilter("authority",n!=null?n:this.provider.publicKey).addFilter("channel",e).run(this.provider.connection)).map(a=>({pubkey:a.pubkey,data:ye.fromAccountInfo(a.account)[0]}))}async loadDevice(e,n){return ye.fromAccountAddress(this.provider.connection,e,n)}async getDevicePDA(e,n){return n=n!=null?n:this.keypair.publicKey,await T.findProgramAddress([e.toBuffer(),n.toBuffer()],this.programId)}async encryptCEK(e,n){return To(e,n!=null?n:this.keypair.publicKey)}async decryptCEK(e,n){return No(e,n!=null?n:this.keypair.secretKey)}async encryptMessage(e,n){return Po(e,n)}async decryptMessage(e,n){return Ko(e,n)}async initChannel(e,n){var b,M,S,F,x,_;const s=(b=e.channel)!=null?b:Te.generate(),i=await Bo(),a=await this.encryptCEK(i),[o]=await this.getMembershipPDA(s.publicKey),[c]=await this.getDevicePDA(o),d=this.provider.publicKey,m=new de,p=this.channelSpace(e.maxMessages);m.add(re.createAccount({fromPubkey:d,newAccountPubkey:s.publicKey,lamports:await this.connection.getMinimumBalanceForRentExemption(p,n==null?void 0:n.commitment),space:p,programId:this.programId})),m.add(ro({key:this.keypair.publicKey,channel:s.publicKey,membership:o,device:c,authority:d},{data:{workspace:(M=e.workspace)!=null?M:"",name:e.name,public:(S=e.public)!=null?S:!1,permissionless:(F=e.permissionless)!=null?F:!1,memberName:(x=e.memberName)!=null?x:"",maxMessages:e.maxMessages,cek:a}}));let f;try{f=await this.provider.sendAndConfirm(m,[s,this.keypair],n)}catch(C){throw(_=me(C.code))!=null?_:C}return{signature:f,channel:s,cek:i,cekEncrypted:a}}async deleteChannel({channel:e},n){var c;const s=this.provider.publicKey,[i]=await this.getMembershipPDA(e),a=new de;a.add(Qi({channel:e,authority:s,authorityMembership:i}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(d){throw(c=me(d.code))!=null?c:Ie("Unauthorized")}return{signature:o}}async joinChannel(e,n){var m,p;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getDevicePDA(s),a=this.provider.publicKey,o=this.keypair.publicKey,c=new de;c.add(ho({channel:e.channel,membership:s,device:i,authority:a,key:o},{data:{name:e.name,authority:(m=e.authority)!=null?m:null}}));let d;try{d=await this.provider.sendAndConfirm(c,[this.keypair],n)}catch(f){throw(p=me(f.code))!=null?p:f}return{signature:d}}async leaveChannel(e,n){var d;const[s]=await this.getMembershipPDA(e.channel),i=this.provider.publicKey,a=new de,o=await this.loadDevices(e.channel);a.add(fo({channel:e.channel,membership:s,authority:i,anchorRemainingAccounts:o.map(m=>({pubkey:m.pubkey,isSigner:!1,isWritable:!0}))}));let c;try{c=await this.provider.sendAndConfirm(a,void 0,n)}catch(m){throw(d=me(m.code))!=null?d:m}return{signature:c}}async addMember(e,n){var M,S,F,x;const s=(M=e.key)!=null?M:e.invitee,[i]=await this.getMembershipPDA(e.channel),[a]=await this.getDevicePDA(i),[o]=await this.getMembershipPDA(e.channel,e.invitee),[c]=await this.getDevicePDA(o,s),d=await this.loadDevice(a);if(!d.cek.encryptedKey)throw Ie("Unauthorized");const m=await this.decryptCEK(d.cek),p=await this.encryptCEK(m,s),f=new de;f.add(Oi({channel:e.channel,authority:this.provider.publicKey,invitee:e.invitee,authorityMembership:i,inviteeMembership:o,inviteeDevice:c},{data:{name:(S=e.name)!=null?S:"",flags:(F=e.flags)!=null?F:0,cek:p,key:s}}));let b;try{b=await this.provider.sendAndConfirm(f,void 0,n)}catch(_){throw(x=me(_.code))!=null?x:_}return{signature:b}}async deleteMember(e,n){var m;const[s]=await this.getMembershipPDA(e.channel,e.authority),[i]=await this.getMembershipPDA(e.channel),a=this.provider.publicKey,o=await this.loadDevices(e.channel,e.authority),c=new de;c.add(eo({channel:e.channel,membership:s,membershipAuthority:e.authority,authority:a,authorityMembership:i,anchorRemainingAccounts:o.map(p=>({pubkey:p.pubkey,isSigner:!1,isWritable:!0}))}));let d;try{d=await this.provider.sendAndConfirm(c,void 0,n)}catch(p){throw console.log(p),(m=me(p.code))!=null?m:p}return{signature:d}}async authorizeMember(e,n){var M,S;const s=(M=e.key)!=null?M:e.authority,[i]=await this.getMembershipPDA(e.channel),[a]=await this.getDevicePDA(i),[o]=await this.getMembershipPDA(e.channel,e.authority),[c]=await this.getDevicePDA(o,s),d=await this.loadDevice(a);if(!d.cek.encryptedKey)throw Ie("Unauthorized");const m=await this.decryptCEK(d.cek),p=await this.encryptCEK(m,s),f=new de;f.add(Gi({channel:e.channel,membership:o,device:c,authority:this.provider.publicKey,authorityMembership:i},{data:{cek:p}}));let b;try{b=await this.provider.sendAndConfirm(f,void 0,n)}catch(F){throw(S=me(F.code))!=null?S:Ie("Unauthorized")}return{signature:b}}async grantAccessMember(e,n){var c;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getMembershipPDA(e.channel,e.authority),a=new de;a.add(so({channel:e.channel,membership:i,authority:this.provider.publicKey,authorityMembership:s},{data:{flags:e.flags}}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(d){throw(c=me(d.code))!=null?c:Ie("Unauthorized")}return{signature:o}}async addDevice(e,n){var f;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getDevicePDA(s),[a]=await this.getDevicePDA(s,e.key),o=await this.loadDevice(i);if(!(o!=null&&o.cek.encryptedKey))throw Ie("Unauthorized");const c=await this.decryptCEK(o.cek),d=await this.encryptCEK(c,e.key),m=new de;m.add(Li({channel:e.channel,authority:this.provider.publicKey,membership:s,device:a},{data:{cek:d,key:e.key}}));let p;try{p=await this.provider.sendAndConfirm(m,void 0,n)}catch(b){throw(f=me(b.code))!=null?f:b}return{signature:p}}async deleteDevice(e,n){var d,m;const s=(d=e.authority)!=null?d:this.provider.publicKey,[i]=await this.getMembershipPDA(e.channel,s),[a]=await this.getDevicePDA(i,e.key),o=new de;o.add(Xi({channel:e.channel,authority:this.provider.publicKey,device:a,deviceAuthority:s}));let c;try{c=await this.provider.sendAndConfirm(o,void 0,n)}catch(p){throw(m=me(p.code))!=null?m:p}return{signature:c}}async postMessage(e,n){var m;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getDevicePDA(s);let a,o=0;if(e.encrypt){const p=await this.loadDevice(i);if(!p.cek.header)throw Ie("Unauthorized");const f=await this.decryptCEK(p.cek);a=await this.encryptMessage(e.message,f),o|=1}else a=e.message;const c=new de;c.add(vo({channel:e.channel,membership:s,authority:this.provider.publicKey},{message:String.fromCharCode(o)+a}));let d;try{d=await this.provider.sendAndConfirm(c,void 0,n)}catch(p){throw(m=me(p.code))!=null?m:p}return{signature:d}}async readMessage(e,n){var o;const[s]=await this.getMembershipPDA(e.channel),i=new de;i.add(wo({channel:e.channel,membership:s,authority:this.provider.publicKey},{messageId:e.messageId}));let a;try{a=await this.provider.sendAndConfirm(i,void 0,n)}catch(c){throw(o=me(c.code))!=null?o:c}return{signature:a}}channelSpace(e=1){return fe.byteSize({workspace:"x".repeat(this.constants.maxWorkspaceLength),name:"x".repeat(this.constants.maxChannelNameLength),creator:T.default,createdAt:0,lastMessageAt:0,flags:0,memberCount:0,messageCount:0,maxMessages:e,messages:Array(e).fill({id:0,sender:T.default,createdAt:0,flags:0,content:"x".repeat(this.constants.maxMessageLength)})})}channelMembershipSpace(){return ie.byteSize({authority:T.default,channel:T.default,name:"x".repeat(this.constants.maxMemberNameLength),status:Ke.Authorized,statusTarget:T.default,lastReadMessageId:0,createdAt:0,flags:0,bump:0})}channelDeviceSpace(){return ye.byteSize({authority:T.default,channel:T.default,key:T.default,cek:{encryptedKey:"x".repeat(this.constants.maxCEKLength),header:"x".repeat(72)},bump:0})}}const Ct=t=>"***** *** *** *** *******",Q=qe("messenger",()=>{const t=lt(),e=$e(),n=st(),s=A(()=>e.keypair),i={allChannels:[],ownChannels:[],channel:void 0,channelAddr:void 0,channelMembershipAddr:void 0,channelMembership:void 0,channelMembers:[],channelMessages:[],channelLoading:!1,memberDevices:[],loading:!1,creating:!1,sending:!1},a=ce({...i}),o=A(()=>{var v;return new Lo(new qt(t.connection,(v=n.value)!=null?v:{publicKey:T.default},qt.defaultOptions()),e.keypair)});let c=[];le(n,v=>{v?p().then():f()},{immediate:!0}),le([s,()=>a.allChannels],()=>{d().then()},{immediate:!0});async function d(){const B=(await o.value.loadMemberships()).map(P=>({pubkey:P.data.channel.toBase58(),status:P.data.status}));a.ownChannels=B}async function m(){console.log("Register events...");for(const v of c)await o.value.removeEventListener(v);c.push(o.value.addEventListener("NewMessageEvent",async(v,B,P)=>{if(console.log("[Event] NewMessageEvent",v),`${v.channel}`!=`${a.channelAddr}`)return;let Y=v.message.content;if(o.value.utils.message.isEncrypted(v.message))try{const J=await _();Y=J?await o.value.decryptMessage(v.message.content,J):Ct(v.message.content)}catch(J){console.log("Error:",J),Y=Ct(v.message.content)}a.channelMessages.push({...v.message,content:Y})})),c.push(o.value.addEventListener("AuthorizeMemberEvent",async v=>{console.log("[Event] AuthorizeMemberEvent",v),!(a.channelAddr&&`${v.channel}`!=`${a.channelAddr}`)&&(`${v.membership}`==`${a.channelMembershipAddr}`?x(a.channelAddr).then():R().then())})),c.push(o.value.addEventListener("JoinChannelEvent",async v=>{console.log("[Event] JoinChannelEvent",v),`${v.channel}`==`${a.channelAddr}`&&R().then()})),c.push(o.value.addEventListener("LeaveChannelEvent",async v=>{console.log("[Event] LeaveChannelEvent",v),`${v.channel}`==`${a.channelAddr}`&&R().then()}))}async function p(){f(),c=[],a.loading=!0;const v=await o.value.loadAllChannels();await m(),a.allChannels=v,a.loading=!1,console.log(a)}function f(){Object.assign(a,i)}async function b(v,B){try{a.creating=!0;const{channel:P}=await o.value.initChannel({name:v,maxMessages:Number(B.maxMessages),public:B.public,permissionless:B.permissionless});await x(P.publicKey),a.channel&&a.allChannels.push({pubkey:P.publicKey,data:a.channel})}finally{a.creating=!1}}async function M(v){const B=new T(v);await o.value.deleteChannel({channel:B}),Xe(v)}async function S(v){console.log("leaveChannel channel === ",v.toBase58()),await o.value.leaveChannel({channel:v}),Xe(v)}async function F(v,B){const P=new T(v);try{await o.value.joinChannel({channel:P,name:B}),await x(v);const Y={pubkey:v.toString(),status:1};a.ownChannels.push(Y)}catch(Y){console.log(Y)}}async function x(v){var B,P,Y,K;a.channelLoading=!0,a.channelMessages=(B=a.channelMessages)!=null?B:[],a.channelMembers=(P=a.channelMembers)!=null?P:[],a.channelMembershipAddr=void 0,a.channelMembership=(Y=a.channelMembership)!=null?Y:void 0,a.channelAddr=new T(v),a.memberDevices=[];try{if((K=n.value)!=null&&K.publicKey)try{const[J]=await o.value.getMembershipPDA(a.channelAddr);a.channelMembershipAddr=J,a.channelMembership=await o.value.loadMembership(J)}catch(J){console.log(J),a.channelMembershipAddr=void 0,a.channelMembership=void 0}await Pe(),await R(),await C()}catch(J){console.log("Error",J)}finally{a.channelLoading=!1}}async function _(){if(!(!a.channelMembership||!s.value))try{const[v]=await o.value.getMembershipPDA(a.channelAddr),[B]=await o.value.getDevicePDA(v,s.value.publicKey),P=await o.value.loadDevice(B);return await o.value.decryptCEK(P.cek,s.value.secretKey)}catch(v){console.log(v)}}async function C(){if(!a.channelAddr){console.log("Invalid channel");return}a.channel=await o.value.loadChannel(a.channelAddr);const B=o.value.utils.channel.isPublic(a.channel)?null:await _();a.channelMessages=await Promise.all(a.channel.messages.map(async P=>{let K=o.value.utils.message.isEncrypted(P)?Ct(P.content):P.content;const J=Qe(P.sender);if(B)try{K=await o.value.decryptMessage(P.content,B)}catch{console.log(`Failed to decrypt message #${P.id}`)}return{...P,senderDisplayName:J,content:K}}))}async function R(){if(!a.channelAddr){console.error("Invalid channel");return}a.channelMembers=await E()}async function E(v=a.channelAddr){return await o.value.loadChannelMembers(v)}async function k(v){if(!a.channelAddr){console.log("Please select a channel");return}try{a.sending=!0;let B;a.channel&&(B=o.value.utils.channel.isPublic(a.channel)),await o.value.postMessage({channel:a.channelAddr,message:v,encrypt:!B}),await C()}finally{a.sending=!1}}async function z(v,B,P,Y){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.addMember({channel:a.channelAddr,invitee:new T(v),key:B?new T(B):void 0,name:P,flags:Y})}async function X(v){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.deleteMember({channel:a.channelAddr,authority:new T(v)})}async function ue(v){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.addDevice({channel:a.channelAddr,key:new T(v)}),await Pe()}async function Ne(v){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.deleteDevice({channel:a.channelAddr,key:v}),await Pe()}async function ft(v){return(await o.value.loadDevices(a.channelAddr,v)).filter(B=>{var P;return((P=B.data.cek)==null?void 0:P.encryptedKey)===""})[0]}async function Pe(){a.channelAddr&&a.channelMembership&&(a.memberDevices=await o.value.loadDevices(a.channelAddr,a.channelMembership.authority))}async function Z(v){if(!a.channelAddr){console.log("Invalid channel");return}const B=await ft(v);await o.value.authorizeMember({channel:a.channelAddr,authority:v,key:B.data.key}),await yt()}async function L(){await p()}async function yt(){a.channelMembers=await E()}async function bt(v){a.channelAddr=v}function Xe(v){const B=a.allChannels.findIndex(P=>P.pubkey.toBase58()===v.toString());a.allChannels.splice(B,1),a.channelMessages=[],a.channel=void 0}async function vt(v){const B=o.value.channelSpace(v),P=o.value.channelMembershipSpace(),Y=o.value.channelDeviceSpace(),K=await t.connection.getMinimumBalanceForRentExemption(B+P+Y),J=890880*2;return(K+J)/Pt}async function At(){if(!a.channelAddr)return;const[v]=await o.value.getMembershipPDA(a.channelAddr),[B]=await o.value.getDevicePDA(v);return(await o.value.loadDevice(B)).key.toBase58()}return{channelMessagesCost:vt,addDevice:ue,deleteDevice:Ne,channelAuthorityDevice:At,state:a,client:o.value,leaveChannel:S,loadChannel:x,joinChannel:F,createChannel:b,deleteChannel:M,postMessage:k,addMember:z,deleteMember:X,authorizeMember:Z,refreshList:L,loadMembers:E,selectChannel:bt}});function Ro(){const{connection:t}=lt(),e=_e(),{notify:n}=Ce(),s=q(!1);return{isAirdrop:s,airdropSol:async()=>{try{const a=await t.requestAirdrop(e.publicKey.value,1*Pt);await t.confirmTransaction(a),n({type:"positive",message:"you got 1 sol",timeout:2e3,position:"top"}),s.value=!0}catch(a){console.log(a)}}}}const ln=15;function Wo(){const{createChannel:t}=Q(),{isWalletConnected:e,ok:n,error:s,noSol:i}=ge(),{userBalance:a}=$e(),o=ce({dialog:!1,name:"",maxMessages:ln,public:!1,permissionless:!1,loading:!1});async function c(){if(e())try{if(!await a()){i();return}await t(o.name,{maxMessages:o.maxMessages,public:o.public,permissionless:o.permissionless}),d(),n("Channel was created!")}catch(m){s("Something went wrong"),console.log(m)}}function d(){o.dialog=!1,o.public=!1,o.loading=!1,o.name="",o.maxMessages=15}return{state:o,submit:c,reset:d}}function qo(){const t=Q(),{info:e,ok:n,error:s}=ge(),i=ce({loading:!1});async function a(){if(!t.state.channelAddr){e("Please select a channel");return}try{i.loading=!0,await t.deleteChannel(t.state.channelAddr),n("Channel was deleted!")}catch(o){console.log("Error",o),s("Something went wrong")}finally{i.loading=!1}}return{state:i,submit:a}}function rn(){const{authorizeMember:t,loadChannel:e,state:n}=Q(),{ok:s,error:i}=ge(),a=ce({loading:!1,dialog:!1});async function o(c){var d;try{a.loading=!0,await t(c),await e((d=n.channelAddr)!=null?d:""),s("Member was authorized")}catch(m){i("Something went wrong"),console.log(m)}finally{a.loading=!1}}return{state:a,submit:o}}function Oo(){const{state:t,addMember:e,loadChannel:n}=Q(),{ok:s,info:i,error:a,noSol:o}=ge(),{userBalance:c}=$e(),d=ce({dialog:!1,loading:!1});async function m(f){var b;if(d.loading=!0,!t.channelAddr){i("Please select a channel");return}try{if(!await c()){o();return}return await e(f.wallet,f.key,f.name),await n((b=t.channelAddr)!=null?b:""),s("Member was added"),!0}catch(M){a("Something went wrong"),console.log(M)}finally{d.loading=!1,d.dialog=!1}return!1}function p(){d.loading=!1,d.dialog=!1}return{state:d,submit:m,reset:p}}function cn(){const{deleteMember:t,loadChannel:e,state:n}=Q(),{ok:s,error:i}=ge(),a=ce({loading:!1});async function o(c){var d;try{a.loading=!0,await t(c),await e((d=n.channelAddr)!=null?d:""),s("Member was deleted")}catch(m){i("Something went wrong"),console.log(m)}finally{a.loading=!1}}return{state:a,submit:o}}function Fo(){const{state:t,joinChannel:e}=Q(),{ok:n,info:s,error:i,noSol:a}=ge(),{userBalance:o}=$e(),c=ce({dialog:!1,loading:!1,name:""});async function d(){if(!t.channelAddr){s("Please select a channel");return}c.loading=!0;try{if(!await o()){a();return}await e(t.channelAddr,c.name),m(),n("Request was sent")}catch(p){console.log("Error",p),i("Something went wrong")}finally{c.loading=!1}}function m(){c.loading=!1,c.dialog=!1,c.name=""}return{state:c,submit:d,reset:m}}function Ho(){const t=Q(),{info:e,ok:n,error:s}=ge(),i=ce({loading:!1});async function a(){if(!t.state.channelAddr){e("Please select a channel");return}try{i.loading=!0,await t.leaveChannel(t.state.channelAddr),n("Channel was abandoned!")}catch(o){console.log("Error",o),s("Something went wrong")}finally{i.loading=!1}}return{state:i,submit:a}}function Uo(){const t=Q(),{ok:e,error:n}=ge(),s=ce({loading:!1});async function i(a){try{s.loading=!0,await t.addDevice(a),e("device added")}catch{n("Invalid Device Key")}finally{s.loading=!1}}return{state:s,submit:i}}function Go(){const t=Q(),{ok:e}=ge(),n=ce({loading:!1});async function s(i){try{n.loading=!0,await t.deleteDevice(i),e("device removed")}finally{n.loading=!1}}return{state:n,submit:s}}function ge(){const t=_e(),{airdropSol:e}=Ro(),{notify:n}=Ce(),s=d=>n({type:"info",message:d,timeout:2e3}),i=d=>n({type:"negative",message:d,timeout:2e3}),a=(d,m="bottom")=>n({type:"positive",message:d,timeout:2e3,position:m}),o=()=>n({type:"warning",message:"You don't have enough SOL on your balance!",position:"top",timeout:0,actions:[{label:"GET SOL",class:"btn--no-hover",padding:"0 15px 0 10px",size:"14px",color:"black",handler:()=>e()}]});function c(){return t.publicKey.value?!0:(s("Please connect wallet"),!1)}return{ok:a,info:s,error:i,noSol:o,isWalletConnected:c}}const jo=O({__name:"ImportDeviceDialog",emits:["handleImport","closeImportModal"],setup(t,{emit:e}){const{ok:n,error:s}=ge(),i=q(),a=()=>{const o=i.value[0],c=new FileReader;c.addEventListener("load",()=>{const d=JSON.parse(c.result);d.backupKey||s("Invalid Key"),e("handleImport",d.backupKey),e("closeImportModal"),n("secret key imported")},!1),o&&c.readAsText(o)};return(o,c)=>(g(),w(he,null,{default:u(()=>[l(te,{flat:"",square:""},{default:u(()=>[l(W,{class:"q-pa-md",style:{height:"20px"}},{default:u(()=>[l(ve,{modelValue:r(i),"onUpdate:modelValue":c[0]||(c[0]=d=>ne(i)?i.value=d:null),borderless:"",type:"file"},null,8,["modelValue"])]),_:1}),l(W,{class:"q-pa-md"},{default:u(()=>[l(N,{class:"dialog-submit-btn",disabled:!r(i),flat:"",square:"",onClick:a},{default:u(()=>[I(" import device key ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}))}}),Vo=O({__name:"AddDeviceDialog",props:{addLoading:Boolean},emits:["handleAddDevice"],setup(t,{emit:e}){const n=q(""),s=()=>e("handleAddDevice",n.value);return(i,a)=>(g(),w(he,null,{default:u(()=>[l(te,{flat:"",square:"",class:"add-device-dialog"},{default:u(()=>[l(W,{class:"q-px-md q-pt-md justify-center items-center text-body1"},{default:u(()=>[I(" Enter device key ")]),_:1}),l(W,{class:"q-pa-md justify-center"},{default:u(()=>[l(je,{onSubmit:s},{default:u(()=>[l(ve,{modelValue:r(n),"onUpdate:modelValue":a[0]||(a[0]=o=>ne(n)?n.value=o:null),class:"input",label:"Device key",dense:"","lazy-rules":"",rules:[o=>o&&o.length>0||"Please enter device key"]},null,8,["modelValue","rules"]),l(N,{type:"submit",class:"dialog-submit-btn",flat:"",square:""},{default:u(()=>[I(" add device ")]),_:1})]),_:1})]),_:1}),l(Oe,{showing:t.addLoading},null,8,["showing"])]),_:1})]),_:1}))}});const Qo=ae(Vo,[["__scopeId","data-v-fc061ba6"]]),$o=O({props:{text:{type:String,default:""},padding:{type:String,default:"0"}}});const Yo=["innerHTML"];function Xo(t,e,n,s,i,a){return g(),w(Qt,{class:"bg-white text-primary shadow-1 custom-tooltip",style:{"border-radius":"0"},anchor:"top middle",self:"bottom middle"},{default:u(()=>[h("div",{style:Ve({fontSize:"11px",padding:`${t.padding}`}),innerHTML:t.text},null,12,Yo)]),_:1})}const De=ae($o,[["render",Xo]]),Jo={class:"q-gutter-md row justify-between q-px-sm"},Zo=O({__name:"DevicesControl",props:{addLoading:Boolean,isAuthorityDevice:Boolean,devices:Object},emits:["handleExport","handleAddDevice","handleImport"],setup(t,{emit:e}){const n=t,s=q(!1),i=q(!1),a=async m=>{await e("handleAddDevice",m)};le(()=>n.addLoading,m=>{m||(s.value=!1)});const o=m=>e("handleImport",m),c=()=>i.value=!1,d=()=>{e("handleExport")};return(m,p)=>{const f=De,b=Qo,M=jo;return g(),D($,null,[h("div",Jo,[l(N,{class:"control-btn",square:"",flat:"",disabled:!t.devices.length,onClick:p[0]||(p[0]=S=>s.value=!0)},{default:u(()=>[l(f,{text:"Add new device"}),l(r($t))]),_:1},8,["disabled"]),l(N,{class:"control-btn",square:"",flat:"",onClick:p[1]||(p[1]=S=>i.value=!0)},{default:u(()=>[l(f,{text:"Import device key"}),l(r(Fn))]),_:1}),l(N,{class:"control-btn",square:"",flat:"",disabled:!t.isAuthorityDevice&&t.devices.length,onClick:d},{default:u(()=>[l(f,{text:"Export device key"}),l(r(Hn))]),_:1},8,["disabled"])]),l(b,{modelValue:r(s),"onUpdate:modelValue":p[2]||(p[2]=S=>ne(s)?s.value=S:null),"add-loading":t.addLoading,onHandleAddDevice:a},null,8,["modelValue","add-loading"]),l(M,{modelValue:r(i),"onUpdate:modelValue":p[3]||(p[3]=S=>ne(i)?i.value=S:null),"is-import-modal":r(i),onHandleImport:o,onCloseImportModal:c},null,8,["modelValue","is-import-modal"])],64)}}});const el=ae(Zo,[["__scopeId","data-v-dcedbc7a"]]),tl=t=>(Re("data-v-08199a05"),t=t(),We(),t),nl=tl(()=>h("div",{class:"text-body1 text-blue-grey-8 text-left"}," Devices ",-1)),al={class:"devices-item__key"},sl=O({__name:"DevicesList",props:{selectDevicekey:Object,deleteLoading:Boolean,devices:Object,authorityDevice:String},emits:["handleSelect","handleDelete"],setup(t,{emit:e}){const n=t,s=o=>e("handleSelect",o),i=o=>e("handleDelete",o),a=o=>o.toBase58()===n.authorityDevice;return(o,c)=>{const d=De;return g(),D($,null,[nl,l(Ae,{bordered:"",separator:"",class:"devices-list"},{default:u(()=>[(g(!0),D($,null,oe(t.devices,m=>(g(),w(W,{key:m,"active-class":"bg-blue-grey-8 text-white active",class:Se(["devices-item",{"authority-device":a(m.data.key)}]),clickable:"",active:t.selectDevicekey===m.data.key,onClick:p=>s(m.data.key)},{default:u(()=>[h("span",al,[a(m.data.key)?(g(),w(d,{key:0,text:"Authority device"})):ee("",!0),I(" "+H(m.data.key),1)]),l(at),a(m.data.key)?ee("",!0):(g(),w(Un,{key:0,name:r(nt),size:"18px",class:"delete-device-btn",onClick:p=>i(m.data.key)},{default:u(()=>[l(d,{text:"Delete device"})]),_:2},1032,["name","onClick"]))]),_:2},1032,["class","active","onClick"]))),128))]),_:1}),l(Oe,{showing:t.deleteLoading},null,8,["showing"])],64)}}});const il=ae(sl,[["__scopeId","data-v-08199a05"]]),un="data:image/png;base64,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",ol="data:image/png;base64,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",ll="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXMAAACSCAMAAACAC9ozAAAA7VBMVEX///+ZmZlFWmTg4OD/AACRkZHx8fFzg4uirbKDg4P09vairLFSZW7R1tlcb3f/MzP/KCj/9/f/EBD/p6f/YGD/UFCiLTL/GBj/Bwf/5+f/19f/n59oeYH/f3//7+//39//z8+6wsX/cHDo6+zc4OKNmqD/l5f/j4//aGjj5ujFzM//x8f/r6+Woqj/WFj/eHj/SEjL0dP/v79xgYj/ICD/t7f/h4dXUlv/QEDJGRz7+/ujo6N/jpWLOD6tt7vzBga6wsaUMzniDhDi0tLkxMTlvb3poaHsjIzufn7vd3fxYmJoSVH0TU16QUizJSm4ULjOAAAEhUlEQVR42uzaaVPaUBTG8VO4JZZGEpAIiCJiQSiyyOLG2I52X7//x2kIyAEMWOQmucv5v8qrO/CbDOQZAGp1icdGo9HsOg4+vdokoNaYI3qCzMMpgZG5f8qYF3oHoGsRmactxuxKD7QsIvMe88pk90qgXRGZl/PssW7tGPQqInMoOwyzO2XQqLDNsfReNofsuex5GjQpCnOsWbGRPe/UCqBDQZnH/7fP3y2G2T++xDUt3E1U2mtnkH1QHwIVxg4dVgbInmkXNXyEjGL7H1xaDLs+03eoznqzSfCyCkUnj+x2pQl693qT4OWd13PI7g5VbR4hozDHykcWYxoP1VDNseOawzBLr6EagTkO1Qyy5+r6DNWIzP2HalGPoRqROXZwds0w61KnR8jQzbFSUdOhGok5NqxrOFT5mtNQlcNcv6Eqyn8t0gtDNaf0UBXFfFy5YzHMUXaoimTuDdUuw6wjJYeqYOZ+QxVUSzxz9YeqmOZqD9XNzOOh9unb7zyy535+jauRsPe5/1BV4k95opu7lZeGqvSPkBKYuxVqKg1VOcy9oZpVZahKYz4ZqrYKQ1Uqc0WGqmzmbiXZh6qE5uN6C0O1LddQldTcG6oWwyyJfuuQ13zyi2oe2QeVHmBZcW99Ac1jG/Xn74PfUO2xTBGP2rCtXxWmpLnbr/0HhnW9odoZXxVifpE5n3d3dX8zP1Q7Tdu77e9i/pE5n3eHQ3Wum6vYisic07trTocq9vGOzIM09zo+6y7f6mQenDkOVWfxVifzwMyx4vKtTuaBmztPPtXJPGDzdN7nAYbMAzUvHE3bx+7JfGWiDnYyJ3MyJ/O1Rxlvp3246HM8isxXHpU6Bez2kONRZL7qqPcwX/KQ41FqmpuNhrmleRJ2U9PLXZTic5SS5gaAsaU5wE5sBpVAKS5HkfnzULsnKMXlKDJ/FuqdceFK9TkeRebroPA78JbjUWS+HspIwiSOR5H5Cig8z+0EgNtRZL4OCtvZ3rxanR6lkrlpTGoBtKaXpjjmfYC+euYNeFJDHHMDwCBzMhfqsyUJVb7mKXNsbqZUM+f4HXrYMrmap5KnVYDqaTJF5v/YtWMVBmEojMK3WSJFfQdRF8HBPYPv/1SFSyMtaDN4h/RyDp3/4RusklxPRVPzKPLUX8T8cmqQqTUz1z1t4Nnyy1zRjcwz+uDuP9TSvJ0U3c48bCKbv/cWI/N+1bNLUXQbc23fHX6HGpkvcrSamWuOzW+eza1PycWPR814/2zumPJnbnLXYhaROTRytJicQWsL5mdTSclDJ7mxN7hrkacwP5vqlDz0zbt04xUoNl8lj2fQFuaxS9yd+5NLhphjjjnmlU9hjnm1UJhjjjnmlU9hjnm1UJhjjjnmlU9VaO4+zIth7iDMi2HuIMyLYe4gzIth7iDMbbM3f5BBmFfeqx06pgEAAGAY5N/1JOxvQALOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wEDZ33s0IEYIBgAAAAASUVORK5CYII=",rl="data:image/png;base64,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",cl=h("span",{class:"add-title q-pb-sm"}," BackUp key is used to return admin rights in case of loss of access to channels ",-1),ul=h("span",{class:"q-pb-sm"}," 1. Press the menu and select the devices field ",-1),dl=["src"],ml=h("span",{class:"q-py-sm"},'2. Click the export button and save your "backup key" in a safe place ',-1),hl=["src"],pl=h("span",{class:"q-py-sm"},"3. To import your key in case of a necessary replacement, click on the import button",-1),gl=["src"],fl=h("span",{class:"q-py-sm"},'4. In the area that opens, select your file and click "import device key" ',-1),yl=["src"],bl=h("span",{class:"q-py-sm"},"Done, your device key has been successfully replaced ",-1),vl=O({__name:"BackupDeviceTab",setup(t){return(e,n)=>(g(),w(Yt,{class:"add-device-instructions"},{default:u(()=>[l(Ae,null,{default:u(()=>[V((g(),w(W,{dense:"",class:"q-pa-none"},{default:u(()=>[l(U,null,{default:u(()=>[cl]),_:1})]),_:1})),[[se]]),l(Me),V((g(),w(W,{dense:"",class:"q-py-md"},{default:u(()=>[l(U,{class:"q-pb-none"},{default:u(()=>[ul,h("img",{src:r(un),alt:"step"},null,8,dl)]),_:1})]),_:1})),[[se]]),V((g(),w(W,{dense:"",class:"q-py-sm"},{default:u(()=>[l(U,null,{default:u(()=>[ml,h("img",{src:r(ol),alt:"step"},null,8,hl)]),_:1})]),_:1})),[[se]]),V((g(),w(W,{dense:"",class:"q-py-sm"},{default:u(()=>[l(U,null,{default:u(()=>[pl,h("img",{src:r(ll),alt:"step"},null,8,gl)]),_:1})]),_:1})),[[se]]),V((g(),w(W,{dense:"",class:"q-py-sm"},{default:u(()=>[l(U,null,{default:u(()=>[fl,h("img",{src:r(rl),alt:"step"},null,8,yl)]),_:1})]),_:1})),[[se]]),V((g(),w(W,{dense:"",class:"q-py-sm"},{default:u(()=>[l(U,null,{default:u(()=>[bl]),_:1})]),_:1})),[[se]])]),_:1})]),_:1}))}}),Al="/assets/step_2.80ee96fc.png",_l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAboAAACZCAMAAABuZg+bAAAA1VBMVEX///+ZmZlFWmSPnKLg4ODx8fH/AACRkZFzg4vHztGirbKDg4P/v7//f3//QECjo6Ortbnj5uhSZW75+vqirLGXoqj/EhLc4OL09vbR1tn/Y2P/KCj/r6+dqa3/MDD/9/f/5+fW2t3/19fHzdC7w8f/UFD/SEiKOD7/7+//x8f/l5f/h4f/eHj/ODj/ICDoCw3/39//z8//t7f/p6f/n5//j49oeYH/WFjp7O2kr7OLmJ5cb3f/cHDYExX/CAjg4+XFzM96QEh/jpVcT1e3IyeiLTKvub33Iv49AAAEbElEQVR42uzbbVPaQBiF4ae0SYMNNEAjoCJisWptre+i+K7t//9JRTYGHCAgm8U9cO5xRvziB64h5DCLsFnnDOuTDOlDYsLGRDpGOvhIBxvpYCMdbKSDjXSwkQ420sFGOthIBxvpYCMdbKSDjXSwkQ420sGmrL6+RDqcnFd2fNUB5fTb8YKJlNNnx/c6qJyeHW9TsOIdJmykg410sJEONtLBRjrYSAfb5HRfEhOmkWG6z4nJJ2ZFU9AxeyMdbKSDjXSwkQ420sFGOthIBxvpYONnmLCRDjbSwUY62EgHG+lgIx1spIONdLCRDjbSwZZMx2NFFsdXHWykg410sJEONtLBlhLdri9sTFbS1ddd193P5453hY3MSrojN271R27tUNiQrKTbuXFft36eO9oU9ior6WRza90d7PdKzj8QFmUn3XO7x7kfq4N+N/mVPX9DZl9mugz/q4/TNYtx4J/k8suDgMv5q1O/LkmR7n3pVHX/56/hgL9++jIi0tlAp9rxT1fyNwN+o1YE6eyhU234eyv5mC1hRZDONjrVwVHu/Lc72PpWvCJIZyedanMtN3pFkM5musQV4XZXBOlspuutiP0RK2KHdDbTjV8RpLOZLl4RVyNWxMku6Wymm2BFkM5mOtWBn7AiSGcz3QQrgnQ206kONVaEcTrvW1SQ9TTpgu9R1dtgTug0VoRpunZLepXOdOhqjvR1MU90062IjTWjdHfSX+VMg64s/ZUu5o3uzStizb2+H6VTLBSKmnQVqbajh1VlNzVdSQq16GGhazeXdG9YEXuuOxLPE/E06USWMjGdo+ympBPJfozpKs9280s30Yo47/5xvT0LumozstOnKzSe7eacbsyKWHZVf7bN05W9bMfOS4OuFdx27IJFoEtaETGeWbo7UZX06coStTh0CStC4Zmk8yqi0qcLSgtKl7AiFF76dCqvU1ObTuF1aiwonWrnfBDPFJ1qSZ+u2VS/swtNJ1vugN3TY9FThSKhpyraQxeIBKQTWe2RXT/93b5/zHQqyEAF0llWvTPQI7Io0oFU3xj2fKd4wazIZbp0tfCZLqwtPF3/821kkp+FxVTpaiWnKdJ0SjXSGaRTeanSBSKl7k9AOtN0TSkX07xgNqRbgxfMGdApu7TolF2Dtynm6YplZZfeHeatyC3vMM3StcNvnQKJ7fTpujUa/DTFMN2dxIVp0alIl0inf8AhrMhLXt/1s6V9wEEVtsQhXULa4+BSpDPLlyTuTvdYUa8y6QzSPXTlMlV5qdXWPMzXy6mRziBdtSuXaS9FPUx/hDYMsq/6N+/Hit6Zzqs+8OB6FBgdv3PQi3SkIx3pSDdhpCMd6UhHugkjHelIRzrSTRjpSEc60pFuwkhHuoWJdLCRDjbSwUY62EgHG+lgIx1spIONdLCNofvAQCMdbKSDjXSwkQ420sFGOthIBxvp/rdHByQAAAAAgv6/boeQF2Rdx7qOdR3rOtZ1rOtY17GuY13Huo51Hes61nWs61jXsQIoIffa0tNzZgAAAABJRU5ErkJggg==",wl="/assets/step_4.6d31bfa7.png",kl="/assets/step_5.2834efd1.png",Ml=h("span",{class:"add-title q-pb-sm"}," For security purposes, you can view your channels from one device and if you access from another, all messages will be encrypted. To add a new device, follow the instructions ",-1),Cl=h("span",{class:"q-pb-sm"}," 1. Log in to the new device, press the menu and select the devices field ",-1),Sl=["src"],Dl=h("span",{class:"q-py-sm"},'2. Click on the "copy" button',-1),xl=["src"],Il=h("span",{class:"q-py-sm"},'3. Go back to the main device and in the "devices" window click on the "add device" button',-1),El=["src"],Bl=h("span",{class:"q-py-sm"},'4. Paste the previously copied new device key and click "add device"',-1),Tl=["src"],Nl=h("span",{class:"q-py-sm"},"5. Confirm the transaction and your device will be added",-1),Pl=["src"],Kl=O({__name:"AddDeviceTab",setup(t){return(e,n)=>(g(),w(Yt,{class:"add-device-instructions"},{default:u(()=>[l(Ae,null,{default:u(()=>[V((g(),w(W,{dense:"",class:"q-pa-none"},{default:u(()=>[l(U,null,{default:u(()=>[Ml]),_:1})]),_:1})),[[se]]),l(Me),V((g(),w(W,{dense:"",class:"q-py-md"},{default:u(()=>[l(U,null,{default:u(()=>[Cl,h("img",{src:r(un),alt:"step"},null,8,Sl)]),_:1})]),_:1})),[[se]]),V((g(),w(W,{dense:"",class:"q-py-sm"},{default:u(()=>[l(U,null,{default:u(()=>[Dl,h("img",{src:r(Al),alt:"step"},null,8,xl)]),_:1})]),_:1})),[[se]]),V((g(),w(W,{dense:"",class:"q-py-sm"},{default:u(()=>[l(U,null,{default:u(()=>[Il,h("img",{src:r(_l),alt:"step"},null,8,El)]),_:1})]),_:1})),[[se]]),V((g(),w(W,{dense:"",class:"q-py-sm"},{default:u(()=>[l(U,null,{default:u(()=>[Bl,h("img",{src:r(wl),alt:"step"},null,8,Tl)]),_:1})]),_:1})),[[se]]),V((g(),w(W,{dense:"",class:"q-py-sm"},{default:u(()=>[l(U,null,{default:u(()=>[Nl,h("img",{src:r(kl),alt:"step"},null,8,Pl)]),_:1})]),_:1})),[[se]])]),_:1})]),_:1}))}}),zl=h("span",{class:"text-h6"},"Instructions",-1),Ll=O({__name:"InstructionsDialog",setup(t){const e=q("add");return(n,s)=>{const i=Kl,a=vl;return g(),w(he,null,{default:u(()=>[l(te,{square:"",flat:"",class:"instructions-card"},{default:u(()=>[l(j,{class:"row items-center justify-between q-pb-sm"},{default:u(()=>[zl,V(l(N,{size:"10px",flat:"",round:"",dense:"",icon:r(nt)},null,8,["icon"]),[[Ee]])]),_:1}),l(j,{class:"q-pt-none"},{default:u(()=>[l(Gn,{modelValue:r(e),"onUpdate:modelValue":s[0]||(s[0]=o=>ne(e)?e.value=o:null),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:u(()=>[l(Ot,{name:"add",label:"Add Device"}),l(Ot,{name:"backup",label:"backup"})]),_:1},8,["modelValue"]),l(jn,{modelValue:r(e),"onUpdate:modelValue":s[1]||(s[1]=o=>ne(e)?e.value=o:null),animated:"",class:"panels-height"},{default:u(()=>[l(i,{name:"add"}),l(a,{name:"backup"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}});const Rl=t=>(Re("data-v-d841b4a5"),t=t(),We(),t),Wl=Rl(()=>h("div",{class:"text-body1 text-blue-grey-8 text-left"}," Device Key ",-1)),ql={class:"text-center"},Ol=["title"],Fl=O({__name:"DevicesDialog",props:{authorityDevice:String},emits:["regenerate","channelAuthorityDevice","loadChannel"],setup(t,{emit:e}){const n=t,s=$e(),{state:i}=Q();ge();const a=Uo(),o=Go(),c=q(),d=A(()=>{var C;return n.authorityDevice===((C=c.value)==null?void 0:C.toBase58())}),m=()=>{var C,R;return Xn(String((R=(C=s.keypair)==null?void 0:C.publicKey)!=null?R:""))},p=A(()=>i.memberDevices),f=A(()=>{var C,R;return Vn.xs?Qe((C=s.keypair)==null?void 0:C.publicKey,12):(R=s.keypair)==null?void 0:R.publicKey}),b=C=>c.value=C,M=C=>{a.submit(C)},S=()=>{s.exportKey()},F=C=>{s.importKey(C),setTimeout(()=>e("loadChannel"),1e3)},x=C=>{o.submit(C)},_=q(!1);return(C,R)=>{const E=De,k=Ll,z=il,X=el;return g(),w(he,{"transition-duration":"150","transition-show":"fade","transition-hide":"fade"},{default:u(()=>[l(te,{square:"",flat:"",class:"dialog-wrapper"},{default:u(()=>[l(j,{class:"row items-center q-pb-none q-pr-sm q-pt-sm"},{default:u(()=>[l(at),l(N,{size:"10px",flat:"",round:"",dense:"",icon:r(Qn),onClick:R[0]||(R[0]=ue=>_.value=!0)},{default:u(()=>[l(E,{text:"Instructions"})]),_:1},8,["icon"]),l(k,{modelValue:r(_),"onUpdate:modelValue":R[1]||(R[1]=ue=>ne(_)?_.value=ue:null)},null,8,["modelValue"]),V(l(N,{size:"10px",flat:"",round:"",dense:"",icon:r(nt)},null,8,["icon"]),[[Ee]])]),_:1}),l(j,{class:"q-py-none"},{default:u(()=>{var ue;return[Wl,h("div",ql,[l(N,{flat:"",round:"",dense:"",icon:r($n),onClick:m},{default:u(()=>[l(Qt,{delay:0,anchor:"bottom middle",self:"top middle","transition-duration":"0"},{default:u(()=>[I(" Copy to clipboard ")]),_:1})]),_:1},8,["icon"]),h("span",{class:"text-body2",title:(ue=r(s).keypair)==null?void 0:ue.publicKey},H(r(f)),9,Ol)])]}),_:1}),l(Me),l(j,null,{default:u(()=>[l(z,{devices:r(p),"authority-device":t.authorityDevice,"select-devicekey":r(c),"delete-loading":r(o).state.loading,onHandleSelect:b,onHandleDelete:x},null,8,["devices","authority-device","select-devicekey","delete-loading"])]),_:1}),l(Me),l(Yn,{align:"right"},{default:u(()=>[l(X,{"add-loading":r(a).state.loading,"is-authority-device":r(d),devices:r(p),onHandleExport:S,onHandleAddDevice:M,onHandleImport:F},null,8,["add-loading","is-authority-device","devices"])]),_:1})]),_:1})]),_:1})}}});const Hl=ae(Fl,[["__scopeId","data-v-d841b4a5"]]),xe=qe("channel",()=>{const t=st(),{state:e,client:n}=Q(),s=A(()=>e.channelLoading),i=A(()=>e.sending),a=A(()=>{var k;return!!((k=t.value)!=null&&k.publicKey)}),o=A(()=>!!e.channel&&n.utils.channel.isPublic(e.channel)),c=A(()=>!!e.channel&&n.utils.channel.isPermissionless(e.channel)),d=A(()=>{var k;return((k=e.channelMembership)==null?void 0:k.status)===0}),m=A(()=>{var k;return((k=e.channelMembership)==null?void 0:k.status)===1}),p=A(()=>{var k,z,X;return String((k=e.channel)==null?void 0:k.creator)===String((X=(z=t.value)==null?void 0:z.publicKey)!=null?X:"-")}),f=A(()=>!!e.channelMembership&&n.utils.member.canAddMember(e.channelMembership)),b=A(()=>!!e.channelMembership&&n.utils.member.canAuthorizeMember(e.channelMembership)),M=A(()=>!!e.channelMembership&&n.utils.member.canDeleteMember(e.channelMembership)),S=A(()=>!!e.channelMembership&&n.utils.member.isAdmin(e.channelMembership)),F=A(()=>!!e.channelMembership&&n.utils.member.isOwner(e.channelMembership)),x=A(()=>a.value&&!!e.channel&&!e.loading&&!d.value),_=A(()=>a.value),C=A(()=>F.value),R=A(()=>!e.sending&&(o.value||d.value));return{ownChannels:A(()=>e.allChannels.filter(k=>{var z;return!!e.ownChannels.find(X=>X.pubkey===k.pubkey.toBase58())||k.data.flags===1||k.data.creator.toBase58()===String((z=t.value)==null?void 0:z.publicKey)})),isChannelLoading:s,isSendMessage:i,isPublicChannel:o,isWalletConnected:a,isPermissionlessChannel:c,isAuthorizedMember:d,isPendingMember:m,isChannelCreator:p,isAdmin:S,isOwner:F,canJoinChannel:x,canAddMember:f,canAuthorizeMember:b,canDeleteMember:M,canCreateChannel:_,canDeleteChannel:C,canPostMessage:R}}),dn="/assets/star.073c274c.svg",Ul={class:"text-weight-medium row wallet"},Gl={key:0,class:"channel-owner"},jl=h("img",{src:dn},null,-1),Vl={class:"memberlist-info__details"},Ql=h("span",null,"Authority:",-1),$l={class:"memberlist-btns"},Yl=O({__name:"MemberListDialog",props:{membersDialog:{type:Boolean,default:!1},authorizeMemberState:{type:Object},deleteMemberState:{type:Object},wallet:{type:Object}},emits:["submit","deleteMember"],setup(t,{emit:e}){const{state:n}=Q(),s=xe(),i=m=>m>0?"pending":"authorized",a=A(()=>s.canAuthorizeMember),o=A(()=>s.isAuthorizedMember),c=A(()=>s.isPermissionlessChannel),d=m=>{var p;return((p=n.channel)==null?void 0:p.creator.toBase58())===m};return(m,p)=>{const f=De;return g(),w(he,{class:"memberlist"},{default:u(()=>[l(te,{square:"",flat:"",horizontal:""},{default:u(()=>[l(j,{class:"q-px-lg"},{default:u(()=>[I(" MEMBERS ")]),_:1}),l(j,{class:"memberlist-card"},{default:u(()=>[l(Ae,{separator:""},{default:u(()=>[(g(!0),D($,null,oe(r(n).channelMembers,b=>(g(),w(W,{key:b.pubkey.toString(),"active-class":"owner",active:`${b.pubkey}`==`${r(n).channelMembershipAddr}`,class:"memberlist-item"},{default:u(()=>[l(U,{class:"memberlist-info"},{default:u(()=>[l(He,{class:"row justify-between memberlist-info__header"},{default:u(()=>[h("span",Ul,[I(H(r(Zt)(b.data))+" ",1),d(b.data.authority.toBase58())?(g(),D("div",Gl,[l(f,{text:"Channel Owner"}),jl])):ee("",!0)]),l(Jn,{class:Se([i(b.data.status),"memberlist-status q-pa-xs q-ml-lg"])},{default:u(()=>[I(H(i(b.data.status)),1)]),_:2},1032,["class"])]),_:2},1024),l(He,{caption:"",lines:"2"},{default:u(()=>[h("div",Vl,[Ql,h("span",null,H(b.data.authority),1)])]),_:2},1024)]),_:2},1024),h("div",$l,[i(b.data.status)==="pending"&&(r(a)||r(o)&&r(c))?(g(),w(N,{key:0,color:"positive",size:"sm",unelevated:"",class:"full-width",loading:t.authorizeMemberState.loading,disabled:t.authorizeMemberState.loading,onClick:M=>m.$emit("submit",b.data.authority)},{default:u(()=>[I(" Authorize ")]),_:2},1032,["loading","disabled","onClick"])):ee("",!0),r(s).canDeleteMember?(g(),w(N,{key:1,color:"negative",size:"sm",unelevated:"",class:"full-width",loading:t.deleteMemberState.loading,disabled:t.deleteMemberState.loading||d(b.data.authority.toBase58()),onClick:M=>m.$emit("deleteMember",b.data.authority)},{default:u(()=>[I(" Delete ")]),_:2},1032,["loading","disabled","onClick"])):ee("",!0)])]),_:2},1032,["active"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}}),Xl=h("br",null,null,-1),Jl=O({__name:"JoinChennalModal",emits:["join"],setup(t,{emit:e}){const n=q("");return(s,i)=>(g(),w(he,null,{default:u(()=>[l(te,{square:"",flat:""},{default:u(()=>[l(j,{class:"text-body1"},{default:u(()=>[I(" Join Channel ")]),_:1}),l(j,{class:"text-body1 text-blue-grey-8"},{default:u(()=>[l(je,{class:"join-channel-form",onSubmit:i[1]||(i[1]=zt(a=>s.$emit("join",r(n)),["prevent"]))},{default:u(()=>[l(ve,{modelValue:r(n),"onUpdate:modelValue":i[0]||(i[0]=a=>ne(n)?n.value=a:null),label:"Member name *","lazy-rules":"",rules:[a=>a&&a.length>2||"Please type something"]},null,8,["modelValue","rules"]),Xl,l(N,{type:"submit",class:"dialog-submit-btn","text-color":"black",ripple:!1,square:""},{default:u(()=>[I(" Join Channel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const Zl=t=>(Re("data-v-157586e8"),t=t(),We(),t),er=Zl(()=>h("span",{class:"text-blue-grey-8 q-pb-xs"},"Search by name or address",-1)),tr={class:"search-block"},nr={class:"channel-info text-weight-medium"},ar={class:"channel-info"},sr={key:0,class:"already-in-chat"},ir={class:"control-btns"},or=O({__name:"JoinChannelDialog",props:{loading:{type:Boolean},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const n=t;q(n.defaultState);const{state:s,selectChannel:i,refreshList:a}=Q(),o=xe(),c=q(!1),d=q(""),m=q([]),p=A(()=>s.allChannels.filter(_=>_.data.flags===0||_.data.flags===2)),f=A(()=>s.loading),b=_=>_.name.slice(0,2),M=()=>{if(d.value===""){m.value=[],d.value="";return}m.value=p.value.filter(_=>_.data.name.toLocaleLowerCase().includes(d.value.toLocaleLowerCase())||_.pubkey.toBase58().toLocaleLowerCase().includes(d.value.toLocaleLowerCase()))},S=A(()=>{var _;return((_=d.value)==null?void 0:_.length)>0?m.value:p.value}),F=_=>{e("submit",_)};le(d,()=>{M()}),le(()=>n.loading,_=>{_&&(c.value=!1)});const x=_=>o.ownChannels.find(C=>String(C.pubkey)===String(_.pubkey));return(_,C)=>{const R=De,E=Jl;return g(),w(he,{class:"join-channel-dialog",onHide:C[3]||(C[3]=k=>_.$emit("reset"))},{default:u(()=>[l(te,{square:"",flat:""},{default:u(()=>[l(j,{class:"text-body1 text-blue-grey-8"},{default:u(()=>[I(" Join channel ")]),_:1}),l(j,{class:"q-py-none"},{default:u(()=>[er,h("div",tr,[l(ve,{modelValue:r(d),"onUpdate:modelValue":C[0]||(C[0]=k=>ne(d)?d.value=k:null),class:"input no-margin q-pa-none",placeholder:"Search ...",borderless:"",dense:"",debounce:"300"},null,8,["modelValue"])])]),_:1}),l(j,null,{default:u(()=>[r(S).length?(g(),w(Ae,{key:0,bordered:"",separator:"",class:"privat-channels"},{default:u(()=>[(g(!0),D($,null,oe(r(S),k=>V((g(),w(W,{key:k,"active-class":"bg-blue-grey-8 text-white",class:"privat-channels-item",active:`${r(s).channelAddr}`==`${k.pubkey}`,clickable:"",onClick:z=>r(i)(k.pubkey)},{default:u(()=>[h("div",{class:"chat-avatar",style:Ve(r(en)(`${k.pubkey}`))},[h("span",null,H(b(k.data)),1)],4),l(U,null,{default:u(()=>[h("span",nr,H(k.data.name),1),h("span",ar,H(k.pubkey),1)]),_:2},1024),x(k)?(g(),D("div",sr,[l(R,{text:"already in channel"}),l(r(Zn),{size:"18"})])):ee("",!0)]),_:2},1032,["active","onClick"])),[[se]])),128))]),_:1})):(g(),w(W,{key:1,class:"privat-channels justify-center items-center text-blue-grey-5"},{default:u(()=>[I(" Channels not found ")]),_:1}))]),_:1}),h("div",ir,[l(N,{class:Se(["control-button",{"refresh-btn":r(f)}]),square:"",flat:"",disable:!r(s).channelAddr,onClick:r(a)},{default:u(()=>[l(r(Xt),{style:{color:"#fff"}}),l(R,{text:"Refresh channels"})]),_:1},8,["disable","class","onClick"]),l(N,{class:"control-button",square:"",flat:"",disable:!r(s).channelAddr,onClick:C[1]||(C[1]=k=>c.value=!0)},{default:u(()=>[l(r(ea),{style:{color:"#fff"}}),l(R,{text:"Request to join"})]),_:1},8,["disable"]),l(E,{modelValue:r(c),"onUpdate:modelValue":C[2]||(C[2]=k=>ne(c)?c.value=k:null),onJoin:F},null,8,["modelValue"])]),l(Oe,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})}}});const lr=ae(or,[["__scopeId","data-v-157586e8"]]),rr=t=>(Re("data-v-e91edd23"),t=t(),We(),t),cr=rr(()=>h("br",null,null,-1)),ur=O({__name:"AddMemberDialog",props:{loading:{type:Boolean,default:!1},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const s=q(t.defaultState),i=()=>e("submit",s.value);return(a,o)=>(g(),w(he,{class:"add-member-dialog",onHide:o[3]||(o[3]=c=>a.$emit("reset"))},{default:u(()=>[l(te,{square:"",flat:""},{default:u(()=>[l(j,null,{default:u(()=>[l(je,{class:"add-member-form",onSubmit:zt(i,["prevent"])},{default:u(()=>[l(ve,{modelValue:r(s).name,"onUpdate:modelValue":o[0]||(o[0]=c=>r(s).name=c),label:"Member name *",hint:"Min length 3 chars","lazy-rules":"",rules:[c=>c&&c.length>2||"Please type something"]},null,8,["modelValue","rules"]),l(ve,{modelValue:r(s).wallet,"onUpdate:modelValue":o[1]||(o[1]=c=>r(s).wallet=c),label:"Member Wallet *","lazy-rules":"",rules:[c=>c&&c.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),l(ve,{modelValue:r(s).key,"onUpdate:modelValue":o[2]||(o[2]=c=>r(s).key=c),label:"Member Device Key",hint:"Default: The same as member wallet","lazy-rules":"",rules:[c=>!c||c.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),cr,l(N,{type:"submit",class:"dialog-submit-btn","text-color":"black",ripple:!1,square:"",flat:""},{default:u(()=>[I(" Add Member ")]),_:1})]),_:1},8,["onSubmit"]),l(Oe,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1}))}});const dr=ae(ur,[["__scopeId","data-v-e91edd23"]]),Lt="/assets/info.bfade5eb.svg",mr={class:"relative-position"},hr={class:"messages-cost"},pr={class:"toggle-info max-messages-tooltip"},gr=h("img",{src:Lt,alt:"info"},null,-1),fr={class:"row q-mt-md relative-position",style:{height:"42px"}},yr={class:"toggle-info"},br=h("img",{src:Lt,alt:"info"},null,-1),vr={key:0,class:"row text-primary toggle-approve"},Ar={class:"toggle-info"},_r=h("img",{src:Lt,alt:"info"},null,-1),wr=O({__name:"NewChannelDialog",props:{loading:{type:Boolean,default:!1},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const n=t,{channelMessagesCost:s}=Q(),i=q(n.defaultState),a=()=>e("submit",i),o=q(0),c=A(()=>`~${o.value.toFixed(5)} SOL`);return le(()=>{var d;return(d=i.value)==null?void 0:d.maxMessages},async d=>{o.value=await s(Number(d))}),ta(async()=>{const d=ln;o.value=await s(Number(d))}),(d,m)=>{const p=De;return g(),w(he,{class:"new-channel-dialog",onHide:m[4]||(m[4]=f=>d.$emit("reset"))},{default:u(()=>[l(te,{square:"",flat:""},{default:u(()=>[l(j,null,{default:u(()=>[l(je,{class:"messenger-new-channel-form",onSubmit:a},{default:u(()=>[l(ve,{modelValue:r(i).name,"onUpdate:modelValue":m[0]||(m[0]=f=>r(i).name=f),label:"Channel name *","lazy-rules":"",maxlength:"32",rules:[f=>f&&f.length>2||"Please type something"]},null,8,["modelValue","rules"]),h("div",mr,[l(ve,{modelValue:r(i).maxMessages,"onUpdate:modelValue":m[1]||(m[1]=f=>r(i).maxMessages=f),label:"Max messages","lazy-rules":"",type:"number",debounce:"100",rules:[f=>+f>0||"Invalid value"]},null,8,["modelValue","rules"]),h("div",hr,H(r(c)),1),h("div",pr,[l(p,{text:r(wt)[2],padding:"8px"},null,8,["text"]),gr])]),h("div",fr,[h("div",yr,[l(p,{text:r(wt)[0],padding:"8px"},null,8,["text"]),br]),h("div",{class:Se(["col text-primary",{"toggle-border":!r(i).public}])},[I(" Private"),l(Ft,{modelValue:r(i).public,"onUpdate:modelValue":m[2]||(m[2]=f=>r(i).public=f),label:"Public"},null,8,["modelValue"])],2),r(i).public?ee("",!0):(g(),D("div",vr,[l(Ft,{modelValue:r(i).permissionless,"onUpdate:modelValue":m[3]||(m[3]=f=>r(i).permissionless=f)},null,8,["modelValue"]),h("span",null,[h("div",Ar,[l(p,{text:r(wt)[1],padding:"8px"},null,8,["text"]),_r]),I(" Members can approve")])]))]),l(N,{type:"submit",class:"dialog-submit-btn q-mt-md","text-color":"black",ripple:!1,square:"",flat:""},{default:u(()=>[I(" Create the Channel ")]),_:1})]),_:1}),l(Oe,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1})}}});const kr=O({__name:"ChannelForm",props:{message:{type:String,default:""},disabled:{type:Boolean,default:!1},sending:{type:Boolean,default:!1}},emits:["submit"],setup(t,{emit:e}){const s=q(t.message),i=()=>{e("submit",s),s.value=""};return(a,o)=>(g(),w(je,{class:"channel-form",onSubmit:zt(i,["prevent"])},{default:u(()=>[l(na,{class:"row message-control"},{default:u(()=>[l(ve,{ref:"inputFocus",modelValue:r(s),"onUpdate:modelValue":o[0]||(o[0]=c=>ne(s)?s.value=c:null),class:"col-grow message-input",placeholder:"Type a message",dense:"",borderless:"",autofocus:"",disable:t.disabled},null,8,["modelValue","disable"]),l(N,{class:"send-btn",square:"",flat:"",type:"submit",disable:t.disabled,loading:t.sending},{default:u(()=>[I(" Send ")]),_:1},8,["disable","loading"])]),_:1})]),_:1},8,["onSubmit"]))}});const Mr=ae(kr,[["__scopeId","data-v-bb5ae488"]]),Cr="/assets/solana-logo.3caace62.svg",Sr={class:"messenger-content"},Dr={key:0,class:"preloader"},xr={key:1,class:"messenger-empty"},Ir={key:2,class:"messenger-empty"},Er=h("img",{src:Cr,alt:"logo"},null,-1),Br=h("span",{name:"connect"},"Please connect a wallet",-1),Tr=[Er,Br],Nr={key:3,class:"messenger-empty"},Pr=h("span",{name:"select"},"Please select a channel",-1),Kr=[Pr],zr=O({__name:"ChannelWrapper",props:{postMessageState:{type:Object}},emits:["sendMessage"],setup(t,{emit:e}){const n=_e(),{state:s}=Q(),i=xe();function a(f){const b=n.publicKey.value;return b?String(b)!==String(f):!0}const o=A(()=>{const f=[];let b=0,M;for(const S of s.channelMessages)M&&`${S.sender}`==`${M}`?f[b-1].text.push(S.content):(M=S.sender,f.push({id:S.id,sender:S.sender,senderDisplayName:S.senderDisplayName,text:[S.content],date:S.createdAt}),b++);return f}),c=A(()=>i.canPostMessage),d=f=>e("sendMessage",f),m=q(),p=q();return le(p,f=>{f&&(m.value.scrollTop=f.scrollHeight)}),(f,b)=>{const M=Mr;return g(),w(te,{class:"messenger-card",square:"",flat:""},{default:u(()=>[h("div",Sr,[r(i).isChannelLoading?(g(),D("div",Dr,[l(aa,{color:"primary",size:"2em"})])):r(s).channel?(g(),D("div",{key:1,ref_key:"chat",ref:m,class:"row justify-center channel-wrapper"},[r(o).length>0?(g(),D("div",{key:0,ref_key:"mes",ref:p,class:"messenger-messages"},[(g(!0),D($,null,oe(r(o),S=>(g(),w(sa,{key:S.id,name:S.senderDisplayName,text:S.text,sent:a(S.sender),class:Se(a(S.sender)?"others":"sender")},null,8,["name","text","sent","class"]))),128))],512)):(g(),D("div",xr," No messages "))],512)):r(i).isWalletConnected?(g(),D("div",Nr,Kr)):(g(),D("div",Ir,Tr))]),l(M,{message:t.postMessageState.message,sending:r(i).isSendMessage,disabled:!r(c),onSubmit:d},null,8,["message","sending","disabled"])]),_:1})}}});const Lr=O({__name:"ChannelControl",props:{isLoading:{type:Boolean}},emits:["createChannel","joinChannel","refreshList"],setup(t,{emit:e}){const n=xe();ge();const{notify:s}=Ce();A(()=>n.isPendingMember),A(()=>n.canCreateChannel);const i=a=>{if(!n.isWalletConnected){s({message:"Please connect wallet",color:"negative",position:"top"});return}e(a)};return(a,o)=>{const c=De;return g(),w(W,null,{default:u(()=>[l(U,{class:"button-wrapper"},{default:u(()=>[l(N,{class:Se(["control-button",{"refresh-btn":t.isLoading}]),square:"",flat:"",onClick:o[0]||(o[0]=d=>i("refreshList"))},{default:u(()=>[l(r(Xt),{style:{color:"#fff"}}),l(c,{text:"Refresh channels"})]),_:1},8,["class"]),l(N,{class:"control-button",square:"",flat:"",onClick:o[1]||(o[1]=d=>i("createChannel"))},{default:u(()=>[l(r($t),{style:{color:"#fff"}}),l(c,{text:"Create a channel"})]),_:1}),l(N,{class:"control-button",square:"",flat:"",onClick:o[2]||(o[2]=d=>i("joinChannel"))},{default:u(()=>[l(r(ia),{style:{color:"#fff"}}),l(c,{text:"Browse channels"})]),_:1})]),_:1})]),_:1})}}});const Rr=ae(Lr,[["__scopeId","data-v-e1ed7dfd"]]),Wr=t=>(Re("data-v-ddda9a9c"),t=t(),We(),t),qr={class:"chat-name"},Or={key:0,class:"message-public"},Fr={key:1,class:"message-owner row"},Hr=Wr(()=>h("img",{src:dn},null,-1)),Ur={key:2,class:"pending-icon"},Gr=O({__name:"MessengerChannel",props:{pubkey:{type:Object,required:!0},channel:{type:Object,required:!0},isActive:Boolean},emits:["select"],setup(t){const e=t,{state:n}=Q(),s=_e(),i=A(()=>{var p;return(p=n.ownChannels.find(f=>f.pubkey===e.pubkey.toString()))==null?void 0:p.status}),a=A(()=>i.value===1),o=A(()=>e.channel.name.slice(0,2)),c=A(()=>e.channel.flags===1),d=A(()=>{var p,f;return(f=(p=s.publicKey.value)==null?void 0:p.toBase58())!=null?f:""}),m=A(()=>e.channel.creator.toBase58()===d.value);return(p,f)=>{const b=De;return g(),w(W,{"active-class":"bg-blue-grey-8 text-white",style:{"min-height":"42px"},active:t.isActive},{default:u(()=>[l(U,{class:"chat-item cursor-pointer",onClick:f[0]||(f[0]=M=>p.$emit("select"))},{default:u(()=>[h("div",{class:"chat-badge",style:Ve(r(en)(`${t.pubkey}`))},[h("span",null,H(r(o)),1)],4),h("div",qr,H(t.channel.name),1),r(c)?(g(),D("div",Or,[l(b,{text:"Public Channel"}),I(" P ")])):ee("",!0),r(m)?(g(),D("div",Fr,[l(b,{text:"Channel Owner"}),Hr])):ee("",!0),r(a)?(g(),D("div",Ur,[l(b,{text:"Waiting for confirmation"}),l(oa,{color:"primary",size:"16px"})])):ee("",!0)]),_:1})]),_:1},8,["active"])}}});const jr=ae(Gr,[["__scopeId","data-v-ddda9a9c"]]),Vr=h("div",{class:"text-h5"}," Channels ",-1),Qr={class:"text-weight-medium"},$r={class:"memberlist-info__details"},Yr=h("span",null,"Authority:",-1),Xr={class:"memberlist-info__details"},Jr=h("span",null,"Key:",-1),Zr=O({__name:"PendingUsersDialog",props:{pendingChannels:Object},setup(t){q(!1);const{state:e}=Q(),n=rn(),s=cn(),i=async(d,m)=>{e.channelAddr=m,await n.submit(d)},a=async(d,m)=>{e.channelAddr=m,await s.submit(d)},o=A(()=>n.state.loading),c=A(()=>s.state.loading);return(d,m)=>(g(),w(he,null,{default:u(()=>[l(te,{class:"pending-channels",square:"",flat:"",horizontal:""},{default:u(()=>[l(j,null,{default:u(()=>[Vr]),_:1}),l(j,null,{default:u(()=>[l(Ae,{bordered:""},{default:u(()=>[(g(!0),D($,null,oe(t.pendingChannels,(p,f)=>(g(),w(la,{key:p.name,"expand-separator":"",label:p.channel.data.name,caption:"channel","default-opened":f===0,"header-class":"owner"},{default:u(()=>[l(Ae,{separator:""},{default:u(()=>[(g(!0),D($,null,oe(p.pendingMembers,b=>(g(),w(W,{key:b,class:"row justify-between pending-item"},{default:u(()=>[l(U,{class:"memberlist-info"},{default:u(()=>[l(He,{class:"row justify-between"},{default:u(()=>[h("span",Qr,H(r(Zt)(b.data)),1)]),_:2},1024),l(He,{caption:"",lines:"2"},{default:u(()=>[h("div",$r,[Yr,h("span",null,H(b.data.authority),1)]),h("div",Xr,[Jr,h("span",null,H(b.data.key),1)])]),_:2},1024)]),_:2},1024),l(U,{side:"",class:"memberlist-btns"},{default:u(()=>[l(N,{color:"teal",size:"xs",unelevated:"",class:"full-width",loading:r(o),disabled:r(o),onClick:M=>i(b.data.authority,p.channel.pubkey)},{default:u(()=>[I(" Authorize ")]),_:2},1032,["loading","disabled","onClick"]),l(N,{color:"negative",size:"xs",unelevated:"",class:"full-width",loading:r(c),disabled:r(c),onClick:M=>a(b.data.authority,p.channel.pubkey)},{default:u(()=>[I(" Delete ")]),_:2},1032,["loading","disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label","default-opened"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}});const ec={class:"bell",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",fill:"none","xmlns:v":"https://vecta.io/nano"},tc=["fill"],nc=O({__name:"iconBell",props:{color:{type:String,default:"AABEC8"}},setup(t){return(e,n)=>(g(),D("svg",ec,[h("path",{d:"M5.352 14.359h3.294c0 .821-.59 1.641-1.647 1.641s-1.647-.82-1.647-1.641zm8.434-3.467l-.911-1.515a3.68 3.68 0 0 1-.527-1.897V5.325C12.348 2.389 9.949 0 7 0S1.651 2.389 1.651 5.325v2.155a3.68 3.68 0 0 1-.527 1.897l-.911 1.515c-.278.461-.285 1.018-.018 1.487s.749.749 1.29.749h11.03a1.47 1.47 0 0 0 1.291-.749 1.46 1.46 0 0 0-.021-1.487z",fill:`#${t.color}`},null,8,tc)]))}}),mn=qe("notifications",()=>{const t=st(),{loadMembers:e,state:n}=Q(),s=xe(),i=ce({showInfo:!1,showDialog:!1,pendingChannels:[]});le([()=>s.ownChannels,()=>n.channelMembers],async(o,c)=>{c.length>0&&await a(c[0])});async function a(o){try{const c=await Promise.all(o.map(async d=>{var f;const{pubkey:m,data:p}=d;if(p.creator.toBase58()===((f=t.value)==null?void 0:f.publicKey.toBase58())){const b=await e(m);if(b.length===0)return;const M=b.filter(S=>S.data.status===1);return M.length?{channel:d,pendingMembers:M}:void 0}}));i.pendingChannels=c.filter(d=>d),i.pendingChannels.length>0?(setTimeout(()=>i.showInfo=!0,2e3),setTimeout(()=>i.showInfo=!1,7e3)):i.showDialog=!1}catch(c){console.log(c)}}return{state:i}});function ac(){const{state:t}=mn();return{showDialog:A(()=>t.showDialog),showInfo:A(()=>t.showInfo),pendingChannels:A(()=>t.pendingChannels)}}const sc={class:"panel-notifications__info"},ic=O({__name:"MessengerNotification",setup(t){const{pendingChannels:e,showInfo:n,showDialog:s}=ac(),{state:i}=mn(),a=A(()=>{var m,p;return(p=(m=e.value)==null?void 0:m.length)!=null?p:0}),o=A(()=>a.value>0),c=A(()=>n.value?"width: 100%; padding-right: 14px":"width: 0; padding-right: 0;"),d=()=>{!o.value||(i.showDialog=!i.showDialog)};return(m,p)=>{const f=nc,b=Zr;return g(),D("div",{class:Se(["panel-notifications",{"has-notifications":r(o)}]),onClick:d},[h("div",sc,[l(f,{class:"ring",color:r(o)?"FF5C5C":"AABEC8"},null,8,["color"]),h("span",null,H(a.value),1)]),h("div",{ref:"notificationsInfo",class:"panel-notifications__details",style:Ve(r(c))}," channels are awaiting user confirmation ",4),l(b,{modelValue:r(i).showDialog,"onUpdate:modelValue":p[0]||(p[0]=M=>r(i).showDialog=M),"pending-channels":r(e),onCloseDialog:p[1]||(p[1]=M=>m.isShow.value=!1)},null,8,["modelValue","pending-channels"])],2)}}});const hn=qe("mobile",()=>{const{screen:t}=Ce(),e=ce({searchOrInfo:"search"}),n=A(()=>t.xs);return le(n,s=>{s&&(e.searchOrInfo="search")}),{state:e,isMobile:n}}),oc={class:"panel-search"},lc={class:"search-wrapper"},rc={class:"panel-info"},cc={class:"chat-info"},uc={class:"chat-members"},dc={class:"chat-messages"},mc=["title"],hc={key:0,class:"members-count bg-cyan-9"},pc=O({__name:"MessengerToolbar",emits:["search","showMembers","deleteChannel","addMember","showDeviceKey","leaveChannel"],setup(t,{emit:e}){const n=_e(),{state:s}=Q(),i=xe(),a=hn();Ce();const o=A(()=>!!n.publicKey.value),c=q(""),d=A(()=>s.channel),m=A(()=>{var x,_,C;return((x=d.value)==null?void 0:x.memberCount)===null||((_=d.value)==null?void 0:_.memberCount)===void 0?"":`${(C=d.value)==null?void 0:C.memberCount}\xA0members`}),p=A(()=>{var x,_,C;return((x=d.value)==null?void 0:x.messageCount)===null||((_=d.value)==null?void 0:_.messageCount)===void 0?"":`${(C=d.value)==null?void 0:C.messageCount}\xA0messages`}),f=x=>e("search",x),b=()=>e("showMembers"),M=()=>e("addMember"),S=A(()=>{if(!(!i.isOwner||!i.isAdmin))return s.channelMembers.filter(x=>x.data.status===1).length});le(c,x=>{f(String(x))});const F=A(()=>a.isMobile&&a.state.searchOrInfo==="info");return le(()=>s.channelAddr,x=>{x&&a.isMobile&&(a.state.searchOrInfo="info")}),(x,_)=>{var R,E;const C=ic;return g(),D("div",{class:Se(["panel-toolbar",r(a).state.searchOrInfo])},[l(C),r(F)?(g(),w(r(ra),{key:0,class:"back-arrow",onClick:_[0]||(_[0]=k=>r(a).state.searchOrInfo="search")})):ee("",!0),h("div",oc,[h("div",lc,[l(ve,{modelValue:r(c),"onUpdate:modelValue":_[1]||(_[1]=k=>ne(c)?c.value=k:null),class:"search-input no-margin q-pa-none",placeholder:"Search ...",clearable:"",debounce:"300",borderless:"",onClear:_[2]||(_[2]=k=>c.value="")},null,8,["modelValue"])])]),h("div",rc,[h("div",cc,[h("div",uc,H(r(m)),1),h("div",dc,H(r(p)),1)]),l(at,{class:""}),h("div",{class:"chat-name",title:(R=r(d))==null?void 0:R.name},H((E=r(d))==null?void 0:E.name),9,mc),h("div",null,[l(N,{class:"chat-menu",flat:"",square:"",disabled:!r(o)},{default:u(()=>[l(r(ca),{size:"18"}),l(ua,{anchor:"bottom middle",self:"top middle"},{default:u(()=>[l(Ae,{style:{"min-width":"120px"},bordered:""},{default:u(()=>[V((g(),w(W,{class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",onClick:_[3]||(_[3]=k=>x.$emit("showDeviceKey"))},{default:u(()=>[l(U,{class:"q-pa-none"},{default:u(()=>[l(N,{flat:"",square:"",size:"sm",class:"bg-blue-grey-7 text-white q-px-xs"},{default:u(()=>[I(" Devices ")]),_:1})]),_:1})]),_:1})),[[Ee]]),V((g(),w(W,{class:"q-my-sm q-mx-sm q-pa-none chat-menu__item relative-position",clickable:"",disable:!r(d),onClick:b},{default:u(()=>[l(U,null,{default:u(()=>[r(S)>0?(g(),D("div",hc,H(r(S)),1)):ee("",!0),l(N,{flat:"",square:"",size:"sm",class:"bg-cyan-9 text-white q-px-xs"},{default:u(()=>[I(" Members ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Ee]]),r(i).isOwner?V((g(),w(W,{key:0,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!r(i).canAddMember,onClick:M},{default:u(()=>[l(U,null,{default:u(()=>[l(N,{flat:"",square:"",size:"sm",class:"bg-amber-7 text-white q-px-xs"},{default:u(()=>[I(" Add member ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Ee]]):ee("",!0),r(i).isOwner?V((g(),w(W,{key:1,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!r(i).isChannelCreator,onClick:_[4]||(_[4]=k=>x.$emit("deleteChannel"))},{default:u(()=>[l(U,null,{default:u(()=>[l(N,{flat:"",square:"",size:"sm",class:"bg-negative text-white q-px-xs"},{default:u(()=>[I(" Delete ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Ee]]):V((g(),w(W,{key:2,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!r(d)||r(i).isPublicChannel,onClick:_[5]||(_[5]=k=>x.$emit("leaveChannel"))},{default:u(()=>[l(U,null,{default:u(()=>[l(N,{flat:"",square:"",size:"sm",class:"bg-negative text-white q-px-xs"},{default:u(()=>[I(" Leave ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Ee]])]),_:1})]),_:1})]),_:1},8,["disabled"])])])],2)}}});const gc={class:"col col-4"},fc={class:"col"},yc={class:"no-margin"},bc=O({__name:"DebugBtn",setup(t){const{state:e}=Q(),{isAuthorizedMember:n,isPendingMember:s,isChannelCreator:i}=xe(),a=q(!1),o=da(a);return(c,d)=>(g(),D($,null,[l(N,{flat:"",class:"text-blue-2",onClick:d[0]||(d[0]=m=>r(o)())},{default:u(()=>[I(" Debug info ")]),_:1}),l(he,{modelValue:r(a),"onUpdate:modelValue":d[1]||(d[1]=m=>ne(a)?a.value=m:null)},{default:u(()=>[l(te,{style:{width:"800px","max-width":"80vw"}},{default:u(()=>[l(j,null,{default:u(()=>[(g(!0),D($,null,oe([["Authorized",r(n)],["Pending Access",r(s)],["Channel Creator",r(i)],["Channel Address",r(e).channelAddr],["Channel",r(e).channel],["Membership",r(e).channelMembership],["Members",r(e).channelMembers]],m=>(g(),D("div",{key:m[0],class:"row q-mt-md"},[h("div",gc,H(m[0]),1),h("div",fc,[h("pre",yc,H(m[1]),1)])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),vc={class:"messenger-wrapper"},Ac={class:"messenger-main"},_c={key:1,class:"messenger-channels-empty"},wc={key:0,class:"q-my-md q-px-lg"},kc=O({__name:"Messenger",setup(t){const e=_e(),{state:n,postMessage:s,loadChannel:i,refreshList:a,channelAuthorityDevice:o}=Q(),c=xe(),d=hn(),m=Wo(),p=Fo(),f=Oo(),b=rn(),M=cn(),S=qo(),F=Ho(),x=ce({message:""});A(()=>n.allChannels);const _=q([]),C=q("");async function R(Z){await s(Z.value),x.message=""}const E=Z=>{if(Z===""){_.value=[],C.value="";return}_.value=c.ownChannels.filter(L=>L.data.name.toLocaleLowerCase().includes(Z.toLocaleLowerCase())||L.pubkey.toBase58().toLocaleLowerCase().includes(Z.toLocaleLowerCase())),C.value=Z},k=A(()=>n.loading),z=q(!1),X=A(()=>_.value.length>0||C.value.length>0?_.value:c.ownChannels),ue=Z=>f.submit(Z),Ne=Z=>{p.state.name=Z,p.submit()},ft=A(()=>d.isMobile?d.state.searchOrInfo==="search"?1:2:1),Pe=q("");return le(()=>n.memberDevices,async Z=>{Z.length>0&&(Pe.value=await o())}),(Z,L)=>{const yt=pc,bt=jr,Xe=Rr,vt=zr,At=wr,v=dr,B=lr,P=Yl,Y=Hl;return g(),D($,null,[h("div",vc,[l(yt,{onSearch:E,onShowMembers:L[0]||(L[0]=K=>r(b).state.dialog=!0),onDeleteChannel:L[1]||(L[1]=K=>r(S).submit(r(n).channelAddr)),onLeaveChannel:L[2]||(L[2]=K=>r(F).submit(r(n).channelAddr)),onAddMember:L[3]||(L[3]=K=>r(f).state.dialog=!0),onShowDeviceKey:L[4]||(L[4]=K=>z.value=!0)}),h("div",Ac,[l(te,{class:"messenger-channels",square:"",flat:""},{default:u(()=>[r(X).length>0?(g(),w(Ae,{key:0,separator:"",class:"channels-list"},{default:u(()=>[(g(!0),D($,null,oe(r(X),K=>(g(),w(bt,{key:K.name,pubkey:K.pubkey,channel:K.data,"active-class":"select-channel","is-active":`${r(n).channelAddr}`==`${K.pubkey}`,onSelect:J=>r(i)(K.pubkey)},null,8,["pubkey","channel","is-active","onSelect"]))),128))]),_:1})):(g(),D("div",_c," No channels ")),l(Xe,{"is-joining":r(p).state.loading,"is-loading":r(k),onCreateChannel:L[5]||(L[5]=K=>r(m).state.dialog=!0),onJoinChannel:L[6]||(L[6]=K=>r(p).state.dialog=!0),onRefreshList:r(a)},null,8,["is-joining","is-loading","onRefreshList"])]),_:1}),l(vt,{style:Ve({"z-index":r(ft)}),"post-message-state":r(x),onSendMessage:R},null,8,["style","post-message-state"]),l(Oe,{showing:r(n).loading,color:"primary"},null,8,["showing"])])]),l(At,{modelValue:r(m).state.dialog,"onUpdate:modelValue":L[7]||(L[7]=K=>r(m).state.dialog=K),loading:r(m).state.loading,"default-state":r(m).state,onSubmit:r(m).submit,onReset:r(m).reset},null,8,["modelValue","loading","default-state","onSubmit","onReset"]),l(v,{modelValue:r(f).state.dialog,"onUpdate:modelValue":L[8]||(L[8]=K=>r(f).state.dialog=K),loading:r(f).state.loading,"default-state":r(f).state,onSubmit:ue,onReset:r(f).reset},null,8,["modelValue","loading","default-state","onReset"]),l(B,{modelValue:r(p).state.dialog,"onUpdate:modelValue":L[9]||(L[9]=K=>r(p).state.dialog=K),loading:r(p).state.loading,"default-state":r(p).state,onSubmit:Ne,onReset:r(p).reset},null,8,["modelValue","loading","default-state","onReset"]),l(P,{modelValue:r(b).state.dialog,"onUpdate:modelValue":L[10]||(L[10]=K=>r(b).state.dialog=K),wallet:r(e),"authorize-member-state":r(b).state,"delete-member-state":r(M).state,onSubmit:r(b).submit,onDeleteMember:r(M).submit},null,8,["modelValue","wallet","authorize-member-state","delete-member-state","onSubmit","onDeleteMember"]),l(Y,{modelValue:r(z),"onUpdate:modelValue":L[11]||(L[11]=K=>ne(z)?z.value=K:null),"authority-device":r(Pe),onLoadChannel:L[12]||(L[12]=K=>r(i)(r(n).channelAddr))},null,8,["modelValue","authority-device"]),r(n).channel?(g(),D("div",wc,[l(bc)])):ee("",!0)],64)}}});const Mc={},Cc={class:"container"},Sc={class:"messenger-container"},Dc={class:"container"};function xc(t,e){const n=kc,s=wi;return g(),w(ma,{class:"page-wrapper"},{default:u(()=>[h("div",Cc,[h("div",Sc,[l(n)])]),h("div",Dc,[l(s)])]),_:1})}const Ic=ae(Mc,[["render",xc],["__scopeId","data-v-d4ef5e8f"]]),Ec=()=>Gt(()=>import("./_...all_.ec69555b.js"),["assets/_...all_.ec69555b.js","assets/vendor.2d48e3a3.js","assets/_...all_.73169310.css"]),Bc=[{name:"index",path:"/",component:Ic,props:!0},{name:"all",path:"/:all(.*)*",component:Ec,props:!0,meta:{layout:"empty"}}],Tc=ci(Bc),Nc="/",Pc=ha({history:pa(Nc),scrollBehavior:()=>({left:0,top:0}),strict:!0,routes:Tc}),Kc=({app:t})=>{t.use(Pc)},zc=Object.freeze(Object.defineProperty({__proto__:null,install:Kc},Symbol.toStringTag,{value:"Module"})),Lc=({app:t})=>{t.use(ga,{wallets:[new fa,new ya,new ba,new va,new Aa,new _a,new wa,new ka,new Ma,new Ca,new Sa,new Da,new xa,new Ia,new Ea,new Ba,new Ta,new Na,new Pa,new Ka,new za,new La,new Ra,new Wa,new qa,new Oa,new Fa,new Ha,new Ua,new Ga],autoConnect:!1})},Rc=Object.freeze(Object.defineProperty({__proto__:null,install:Lc},Symbol.toStringTag,{value:"Module"})),Wc=ja();function qc(){return Wc}const Oc=Symbol("WALLET_CONNECT_EVENT"),Fc=Symbol("WALLET_DISCONNECT_EVENT"),Hc=Symbol("ACCOUNT_CHANGE_EVENT"),St=5e3;function Uc(){const{connection:t}=lt(),{emit:e}=qc(),{notify:n}=Ce(),{wallet:s}=_e();le(s,i=>{if(!i)return;const a=()=>{const d=i.adapter.publicKey;t.onAccountChange(d,m=>{e(Hc,m)}),t.onLogs(d,m=>{console.log(m)}),n({message:"Wallet update",caption:`Connected to wallet ${Qe(d.toBase58(),7)}`,timeout:St}),e(Oc,i)},o=()=>{n({message:"Wallet update",caption:"Disconnected from wallet",timeout:St}),e(Fc,i)},c=d=>{!(d!=null&&d.message)||n({type:"negative",message:"Wallet update",caption:d.message,timeout:St})};i.adapter.once("connect",a),i.adapter.once("disconnect",o),i.adapter.removeAllListeners("error"),i.adapter.on("error",c)},{immediate:!0})}const Gc=O({__name:"App",setup(t){return Va(()=>{Uc()}),Qa({title:"Cgram",meta:[{name:"description",content:""},{name:"keywords",content:""}],link:[{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"}]}),(e,n)=>{const s=Nt("router-view");return g(),w(s)}}});async function jc(){const t=$a(Gc);Object.values(Object.assign({"./plugins/app.ts":Xa,"./plugins/pinia.ts":Za,"./plugins/quasar.ts":ts,"./plugins/router.ts":zc,"./plugins/wallet.ts":Rc})).forEach(e=>{var n;return(n=e.install)==null?void 0:n.call(e,{app:t})}),t.mount("#app")}jc().then();export{ae as _};
