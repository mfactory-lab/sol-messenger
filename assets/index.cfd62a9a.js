var Tn=Object.defineProperty;var Kn=(t,e,n)=>e in t?Tn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var X=(t,e,n)=>(Kn(t,typeof e!="symbol"?e+"":e,n),n);import{c as Bn,a as Ln,Q as Rn,P as Pn,D as zn,N as qn,b as Wn,i as Un,u as De,d as Xe,e as ze,r as me,w as J,f as rn,g as H,h as U,o as f,j as N,k as m,l as B,m as j,v as On,n as c,F as Z,p as de,t as O,q as Me,s as _,x as T,y as xe,z as Hn,A as $n,S as Fn,B as C,C as d,E as Yt,G as z,H as l,I as se,J as V,K as Ke,L as Vn,M as q,O as $,R as jn,T as le,U as ye,V as mt,W as qe,X as We,Y as Gn,Z as ln,_ as Se,$ as Qe,a0 as ce,a1 as Xn,a2 as Vt,a3 as ht,a4 as Qn,a5 as Yn,a6 as cn,a7 as Zn,a8 as un,a9 as Jn,aa as pt,ab as ea,ac as Pe,ad as Kt,ae as jt,af as g,ag as fe,ah as gt,ai as ee,aj as ie,ak as Ze,al as dn,am as Fe,an as ta,ao as ft,ap as mn,aq as zt,ar as na,as as aa,at as ct,au as sa,av as ia,aw as ne,ax as Zt,ay as be,az as Je,aA as je,aB as re,aC as hn,aD as Le,aE as oa,aF as Jt,aG as ra,aH as et,aI as la,aJ as pn,aK as ca,aL as ua,aM as da,aN as ma,aO as ha,aP as pa,aQ as ga,aR as fa,aS as Gt,aT as gn,aU as ya,aV as Xt,aW as fn,aX as en,aY as ba,aZ as va,a_ as Aa,a$ as _a,b0 as wa,b1 as Ma,b2 as Ca,b3 as Sa,b4 as ka,b5 as Da,b6 as xa,b7 as Ea,b8 as Ia,b9 as Na,ba as Ta,bb as Ka,bc as Ba,bd as La,be as Ra,bf as Pa,bg as za,bh as qa,bi as Wa,bj as Ua,bk as Oa,bl as Ha,bm as $a,bn as Fa,bo as Va,bp as ja,bq as Ga,br as Xa,bs as Qa,bt as Ya,bu as Za,bv as Ja,bw as es,bx as ts,by as ns,bz as as,bA as ss,bB as is,bC as os,bD as rs,bE as ls,bF as cs,bG as us,bH as ds,bI as ms,bJ as hs,bK as ps}from"./vendor.6fbdfaab.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const gs=({app:t})=>{t.use(Bn())},fs=Object.freeze(Object.defineProperty({__proto__:null,install:gs},Symbol.toStringTag,{value:"Module"})),ys=({app:t})=>{const e=Ln();t.use(e)},bs=Object.freeze(Object.defineProperty({__proto__:null,install:ys},Symbol.toStringTag,{value:"Module"})),vs=({app:t})=>{t.use(Rn,{plugins:{Dark:Pn,Dialog:zn,Notify:qn,LocalStorage:Wn},iconSet:Un})},As=Object.freeze(Object.defineProperty({__proto__:null,install:vs},Symbol.toStringTag,{value:"Module"}));function _s(){const{dark:t}=De(),e=Xe("theme-mode",t.isActive);return t.set(e.value),{isActive:e,set(n){t.set(n),e.value=t.isActive},toggle(){t.toggle(),e.value=t.isActive}}}var ut=(t=>(t[t.FullScreen=0]="FullScreen",t[t.Compact=1]="Compact",t))(ut||{});const yn=ze("app-size",()=>{const t=me({mode:ut[1],isFooter:!1}),e=document.getElementById("app");return J(()=>t.mode,()=>{e.className="",e==null||e.classList.add(t.mode)}),{state:t}}),Ye=[{id:"rpcpool-mainnet",name:"RPCPool RPC",cluster:"mainnet-beta",url:"https://mainnet.rpcpool.com/"},{id:"mainnet",name:"Solana RPC",cluster:"mainnet-beta",url:rn("mainnet-beta")},{id:"testnet",name:"TestNet",cluster:"testnet",url:"https://testnet.rpcpool.com/"},{id:"devnet",name:"DevNet",cluster:"devnet",url:"https://devnet.rpcpool.com/"}];var on;const ws=(on=Ye.find(t=>t.id==={}.VITE_CONNECTION_ENDPOINT))!=null?on:Ye[3],Ms="confirmed",Cs=12e4,st=[`<span>Public channels</span> are non-encrypted and available to anyone, both for reading and writing.</br></br>
    <span>Private channels</span> are encrypted, and new users need to request approval to join them.</br>
    Depending on the \u2018Members can approve\u2019 setting, such requests can be approved either by channel\u2019s 
    owner/admin only, or by any authorized member of the channel.
    `,"Any authorized channel member can approve new requests to join","This setting determines how many messages will be available in chat until they are updated with new messages","Leave empty to use your wallet address instead of a nickname"],Ss="https://twitter.com/JPoolSolana",ks="https://t.me/jpool_solana",Ds="https://t.me/jpoolsolana",xs="https://discord.gg/qR4BA9QXVR",Es="https://jfactory.ch",Is="https://jpool.one",Ns="https://svt.one",Ts="https://staking.kiwi/",qt=350,tn=26,Ks={class:"container"},Bs={class:"footer-section"},Ls={class:"footer-info"},Rs={class:"theme"},Ps={class:"switch"},zs=m("span",{class:"slider round"},null,-1),qs=m("div",{class:"copyright"},[B(" \xA9 Copyright 2022 cgram.one. All rights reserved."),m("br"),B("Powered by jFactory ")],-1),Ws={class:"footer-links"},Us={class:"social"},Os=["href"],Hs=m("span",null,[B("official"),m("br"),B("channel")],-1),$s=[Hs],Fs=["href"],Vs=["href"],js=["href"],Gs=["href"],Xs=H({__name:"AppFooter",setup(t){const e=_s(),{state:n}=yn(),s=[{name:"JFACTORY",link:Es},{name:"JPOOL",link:Is},{name:"STAKING KIWI",link:Ts},{name:"SOLANA VALIDATOR TOOLKIT",link:Ns}];return U(!0),(i,r)=>(f(),N("footer",{class:Me({"show-footer":c(n).isFooter})},[m("div",Ks,[m("div",Bs,[m("div",Ls,[m("div",Rs,[B(" Dark mode "),m("label",Ps,[j(m("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>c(e).isActive.value=a),type:"checkbox",onClick:r[1]||(r[1]=(...a)=>c(e).toggle&&c(e).toggle(...a))},null,512),[[On,c(e).isActive.value]]),zs])]),qs]),m("div",Ws,[m("div",Us,[m("a",{href:c(ks),target:"_blank",class:"social-link social-link-text"},$s,8,Os),m("a",{href:c(Ds),target:"_blank",class:"social-link telegram"},null,8,Fs),m("a",{href:c(Ss),target:"_blank",class:"social-link twitter"},null,8,Vs),m("a",{href:c(xs),target:"_blank",class:"social-link discord"},null,8,js)]),m("nav",null,[m("ul",null,[(f(),N(Z,null,de(s,({name:a,link:o})=>m("li",{key:a},[m("a",{target:"_blank",href:o},O(a),9,Gs)])),64))])])])])])],2))}});function Qs(){const t=U(Ys());return{userAgent:t,isMobileOs:_(()=>Zs(t.value)),isWebView:_(()=>Js(t.value))}}let Bt;function Ys(){var t,e;return Bt===void 0&&(Bt=(e=(t=globalThis.navigator)==null?void 0:t.userAgent)!=null?e:null),Bt}function Zs(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)}function Js(t){return/(WebView|(Phantom|Solflare)|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function tt(t,e=4){return t instanceof T&&(t=t.toBase58()),`${t.slice(0,e)}...${t.slice(-e)}`}function bn(t){return(t==null?void 0:t.name)&&t.name!==""?t.name:tt(t.authority)}const vn=t=>{if(!t)return{background:"#000"};let e=0;for(let s=0;s<t.length;s++)e=t.charCodeAt(s)+((e<<5)-e),e=e&e;let n="#";for(let s=0;s<3;s++)n+=`00${(e>>s*8&255).toString(16)}`.substr(-2);return{background:n}},ei="/assets/clover.968404b0.svg",ti="/assets/ledger.40cf6861.svg",ni="/assets/mathwallet.1d763e81.svg",yt=t=>(qe("data-v-5e69d5e0"),t=t(),We(),t),ai=yt(()=>m("div",{class:"text-h6 text-center"}," Your wallet ",-1)),si={class:"q-gutter-md row justify-between"},ii=yt(()=>m("span",{name:"wallet"},"Disconnect",-1)),oi=yt(()=>m("span",{name:"wallet"},"Ok",-1)),ri=yt(()=>m("div",{class:"text-h6"}," Connect to a wallet ",-1)),li={class:"text-light-gray text-caption full-width text-no-wrap",style:{"text-overflow":"ellipsis",overflow:"hidden"}},ci=["src","alt"],ui=H({__name:"ConnectWallet",setup(t){const e={priority:{solflare:10,phantom:20,sollet:5,nufi:5,blocto:1},icons:{clover:ei},darkIcons:{ledger:ti,mathwallet:ni},deepLinks:{phantom:"https://phantom.app/ul/browse/{uri}?ref={ref}",solflare:"https://solflare.com/ul/browse/{uri}?ref={ref}"}},{userAgent:n,isWebView:s,isMobileOs:i}=Qs(),r={close:mt},a=I=>["Installed","Loadable"].includes(I.readyState);De();const o=xe(),{connected:u,connecting:h}=o;Hn();const y=_(()=>i.value&&!s.value);if(s.value){const I=String(n.value).toLowerCase();I.includes("phantom")?(o.select($n),o.connect()):I.includes("solflare")&&(o.select(Fn),o.connect())}const p=_(()=>{var I,A;return(A=(I=o.publicKey.value)==null?void 0:I.toBase58())!=null?A:""}),v=_(()=>tt(p.value)),x=_(()=>[...o.wallets.value].map(I=>{var w,G;const A=I.adapter.name.toLowerCase();return I.adapter.icon=(G=(w=e.darkIcons[A])!=null?w:e.icons[A])!=null?G:I.adapter.icon,y.value&&e.deepLinks[A]&&(I.deepLink=e.deepLinks[A].replace("{uri}",location.href).replace("{ref}",location.origin)),I}).sort((I,A)=>{var he,pe;const w=(he=e.priority[I.adapter.name.toLowerCase()])!=null?he:1;return((pe=e.priority[A.adapter.name.toLowerCase()])!=null?pe:1)-w+((a(A)?1:0)-(a(I)?1:0))})),D=_(()=>y.value?x.value.filter(I=>!!I.deepLink):x.value),L=U(!1);async function W(I){await o.select(I.adapter.name),L.value=!1,await o.connect()}function S(){L.value=!1,o.disconnect()}function k(){L.value=!0}function K(){L.value=!1}return(I,A)=>(f(),N(Z,null,[c(u)?(f(),C(z,Yt({key:0},I.$attrs,{ripple:!1,color:"primary-gray","text-color":"white",square:"",unelevated:"",onClick:k}),{default:d(()=>[B(O(c(v)),1)]),_:1},16)):(f(),C(z,Yt({key:1},I.$attrs,{color:"primary-gray",class:"q-pa-none btn","text-color":"white",square:"",flat:"",ripple:!1,loading:c(h),onClick:k}),{default:d(()=>[B(" CONNECT WALLET ")]),_:1},16,["loading"])),l(ye,{modelValue:c(L),"onUpdate:modelValue":A[0]||(A[0]=w=>le(L)?L.value=w:null),"transition-duration":"150","transition-show":"fade","transition-hide":"fade"},{default:d(()=>[c(u)?(f(),C(se,{key:0,flat:"",square:""},{default:d(()=>[l(V,{class:"relative-position"},{default:d(()=>[ai,l(z,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:r.close,size:"md",onClick:K},null,8,["icon"])]),_:1}),l(Ke),l(V,null,{default:d(()=>[B(O(c(p)),1)]),_:1}),l(Ke),l(V,null,{default:d(()=>[m("div",si,[l(z,{class:"disconnect-btn","text-color":"black",square:"",flat:"",onClick:S},{default:d(()=>[ii]),_:1}),l(z,{class:"disconnect-btn","text-color":"black",square:"",flat:"",onClick:K},{default:d(()=>[oi]),_:1})])]),_:1})]),_:1})):(f(),C(se,{key:1,class:"wallet-connect-card"},{default:d(()=>[l(V,null,{default:d(()=>[ri,l(z,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:r.close,size:"md",onClick:K},null,8,["icon"])]),_:1}),l(Ke),l(V,{style:{"max-height":"80vh"},class:"scroll"},{default:d(()=>[l(Vn,{grid:"",rows:c(D),"row-key":"name","hide-pagination":"","hide-header":"","rows-per-page-options":[100]},{item:d(({row:w})=>[(f(),N("div",{key:`wallet-${w.adapter.name}`,class:"col-12 col-md-6"},[l(q,{clickable:"",href:w.deepLink,onClick:G=>w.deepLink?!0:W(w)},{default:d(()=>[l($,null,{default:d(()=>[m("b",null,O(w.adapter.name),1),m("div",li,O(w.adapter.url),1)]),_:2},1024),l($,{avatar:""},{default:d(()=>[l(jn,{square:""},{default:d(()=>[m("img",{src:w.adapter.icon,alt:w.adapter.name},null,8,ci)]),_:2},1024)]),_:2},1024)]),_:2},1032,["href","onClick"])]))]),_:1},8,["rows"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])],64))}});const ue=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},di=ue(ui,[["__scopeId","data-v-5e69d5e0"]]),bt=ze({id:"connection",state:()=>({commitment:Ms,confirmTransactionInitialTimeout:Cs,rpc:Gn("rpc","")}),getters:{endpoint(t){var e;return(e=Ye.find(n=>n.id===t.rpc))!=null?e:ws},connection(t){return console.log("[connection]",this.endpoint.url),new ln(this.endpoint.url,{confirmTransactionInitialTimeout:t.confirmTransactionInitialTimeout,commitment:t.commitment})},cluster(){return this.endpoint.cluster}},actions:{setRpc(t){this.rpc=t},setCommitment(t){this.commitment=t}}}),mi=H({__name:"ClusterSelector",setup(t){const e=bt(),{connected:n,connect:s,disconnect:i,autoConnect:r}=xe(),a=[Ye.filter(h=>h.cluster==="mainnet-beta"),Ye.filter(h=>h.cluster!=="mainnet-beta")],o=_(()=>e.endpoint),u=h=>{n&&e.cluster!==h.cluster&&(i(),r.value&&s()),e.setRpc(h.id)};return(h,y)=>(f(),C(Xn,{label:c(o).name,"model-value":!1,"auto-close":"",color:"secondary","text-color":"#000",square:"",unelevated:"",ripple:!1},{default:d(()=>[l(Se,null,{default:d(()=>[(f(),N(Z,null,de(a,(p,v)=>(f(),N(Z,{key:`${v}-cluster-group`},[(f(!0),N(Z,null,de(p,x=>(f(),C(q,{key:x.id,clickable:"",onClick:D=>u(x)},{default:d(()=>[(f(),C($,{key:`${x.id}-item`},{default:d(()=>[l(Qe,null,{default:d(()=>[m("b",null,O(x.name),1)]),_:2},1024),B(" "+O(x.url),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128)),v!==a.length-1?(f(),C(Ke,{key:0})):ce("",!0)],64))),64))]),_:1})]),_:1},8,["label"]))}});const hi={},pi={class:"app-header"},gi={class:"container"},fi={class:"app-header__info"},yi={class:"app-header__logo"},bi={class:"logo-wrapper"},vi=m("div",{class:"sol-icon"},null,-1),Ai=m("div",{class:"app-header__title"},[m("h1",null,[B(" BLOCKCHAIN "),m("br"),B(" messenger "),m("span",{class:"marked"},"SOLANA")])],-1),_i={class:"app-header__right"},wi={class:"app-header__buttons"};function Mi(t,e){const n=Vt("router-link"),s=mi,i=di;return f(),N("header",pi,[m("div",gi,[m("div",fi,[m("div",yi,[m("div",bi,[vi,l(n,{to:"/"})])]),Ai]),l(ht),m("div",_i,[m("div",wi,[l(s,{class:"app-header__cluster-btn header-btn"}),l(i,{class:"app-header__wallet-btn header-btn"})])])])])}const Ci=ue(hi,[["render",Mi]]),Si={};function ki(t,e){const n=Ci,s=Vt("router-view"),i=Xs;return f(),C(Qn,{view:"lfh Lpr lff"},{default:d(()=>[l(n),l(Yn,null,{default:d(()=>[l(s)]),_:1}),l(i)]),_:1})}const Di=ue(Si,[["render",ki]]),xi={default:Di,empty:()=>cn(()=>import("./empty.ed8693c5.js"),["assets/empty.ed8693c5.js","assets/vendor.6fbdfaab.js"])};function Ei(t){return t.map(e=>{var n;return{path:e.path,component:xi[((n=e.meta)==null?void 0:n.layout)||"default"],children:[{...e,path:""}]}})}const Ii="/assets/search.b4fadb1c.svg",Ni="/assets/transfer.796e9da5.svg",Ti="/assets/plus.ee413328.svg",Ki={class:"how-it-works"},Bi={class:"app-info"},Li=m("div",{class:"app-info__title"}," JOIN A CHANNEL ",-1),Ri={class:"app-info__list"},Pi=["innerHTML"],zi={class:"app-info"},qi=m("div",{class:"app-info__title"}," CREATE YOUR OWN CHANNEL ",-1),Wi={class:"app-info__list"},Ui=["innerHTML"],Oi=H({__name:"HowItWorks",setup(t){const e=["For <span>public channels</span>, you can read or send messages without limitations.",`In order to join one of the existing private channels, click
        <img src="${Ii}" class="icon" alt="search">
        (BROWSE CHANNELS) at the bottom of the left-side panel.`,`Find a channel you are interested in and click
        <img src="${Ni}" class="icon" alt="transfer">
        (REQUEST TO JOIN). Your status for that channel will be set to Pending
        Approval until your request has been accepted. While awaiting approval,
        all messages in the channel will appear scrambled.`,`After the private channel's owner or admin approves your membership,your
        status will change to Authorized. You will be able to read the channel
        and send messages.`],n=["You can create a channel of your own as well.",`Click <img src="${Ti}" class="icon" alt="search"> (CREATE A CHANNEL) 
  at the bottom of the left-side panel, then choose between Private and Public options.`,"A public channel is open to anyone for reading and writing, and no encryption is used.",`If you create a private channel, joining it will require your approval. You will see a red 
  notification badge above the channel list if there are approval requests pending.`];return(s,i)=>(f(),N("div",Ki,[m("div",Bi,[Li,m("ul",Ri,[(f(),N(Z,null,de(e,r=>m("li",{key:r},[m("p",{innerHTML:r},null,8,Pi)])),64))])]),m("div",zi,[qi,m("ul",Wi,[(f(),N(Z,null,de(n,r=>m("li",{key:r},[m("p",{innerHTML:r},null,8,Ui)])),64))])])]))}});const Qt=t=>(qe("data-v-316fa5a7"),t=t(),We(),t),Hi={class:"q-pb-sm"},$i={class:"text-blue-grey-10 text-h6 text-weight-regular alert-title"},Fi=Qt(()=>m("span",{class:"text-weight-medium text-h6 text-grey-10"},null,-1)),Vi=Qt(()=>m("span",{class:"text-blue-grey-10 text-body2 text-weight-regular",name:"name"},"Channel Name: ",-1)),ji={class:"text-weight-medium text-body2 text-grey-10"},Gi=Qt(()=>m("span",{class:"text-blue-grey-10 text-body2 text-weight-regular",name:"name"},"Channel Address: ",-1)),Xi={class:"text-weight-medium text-body2 text-grey-10 alert-address"},Qi=H({__name:"EventChannelDialog",props:{channelEvent:Object},setup(t){const e=t,n=U(!1),s=U(""),i=_(()=>s.value==="delete"),r=_(()=>i.value?"You have been removed from the channel":"You have been authorized"),a=_(()=>i.value?Zn:un),o=_(()=>i.value?"#d32f2f":"#00c853");return J(()=>e.channelEvent,u=>{u&&(n.value=!0,s.value=u.event)}),(u,h)=>(f(),C(ye,{modelValue:c(n),"onUpdate:modelValue":h[0]||(h[0]=y=>le(n)?n.value=y:null)},{default:d(()=>[l(se,{square:"",flat:"",class:"row no-wrap items-center alert-card"},{default:d(()=>[l(V,{class:"q-pr-none event-icon"},{default:d(()=>[(f(),C(Jn(c(a)),{size:"80",color:c(o),class:"alert-icon"},null,8,["color"]))]),_:1}),l(V,{class:Me(["alert-info",c(s)])},{default:d(()=>[m("div",Hi,[m("span",$i,[B(O(c(r))+" ",1),Fi])]),m("div",null,[Vi,m("span",ji,O(e.channelEvent.channel),1)]),m("div",null,[Gi,m("span",Xi,O(e.channelEvent.address),1)])]),_:1},8,["class"])]),_:1})]),_:1},8,["modelValue"]))}});const Yi=ue(Qi,[["__scopeId","data-v-316fa5a7"]]),Ue=ze("user",()=>{const t=pt(),e=U(),n=U();ea(async()=>{var h;const u=(h=t.value)==null?void 0:h.publicKey;if(u){const y=Xe(u.toString(),()=>Kt.encode(Pe.generate().secretKey));s(y.value),await o()}else e.value=void 0});function s(u){e.value=Pe.fromSecretKey(Kt.decode(u))}function i(){var y;const u=(y=t.value)==null?void 0:y.publicKey;if(!u)return;const h=Xe(u.toString(),"");s(h.value=Kt.encode(Pe.generate().secretKey))}function r(u){var p;const h=(p=t.value)==null?void 0:p.publicKey;if(!h)return;const y=Xe(h.toString(),"");s(y.value=u)}function a(){var x;const u=(x=t.value)==null?void 0:x.publicKey;if(!u)return;const y={backupKey:Xe(u.toString(),"").value},p=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(y))}`,v=document.createElement("a");v.setAttribute("href",p),v.setAttribute("download","backup_key.json"),v.click()}async function o(){var p;const u=(p=t.value)==null?void 0:p.publicKey,y=await new ln(rn("devnet"),"confirmed").getBalance(u);n.value=y/jt}return{keypair:e,balance:n,userBalance:o,generateKey:i,importKey:r,exportKey:a,isUserHaveSol:_(()=>n.value>.1)}}),Zi="0.0.15",Ji="messenger",eo=[{name:"initChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"key",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"InitChannelData"}}]},{name:"deleteChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"joinChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"key",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"JoinChannelData"}}]},{name:"leaveChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"grantAccessMember",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!1,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"GrantAccessMemberData"}}]},{name:"addMember",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"invitee",isMut:!1,isSigner:!1},{name:"inviteeMembership",isMut:!0,isSigner:!1},{name:"inviteeDevice",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddMemberData"}}]},{name:"authorizeMember",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AuthorizeMemberData"}}]},{name:"deleteMember",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"membershipAuthority",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"addMeta",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"meta",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddMetaData"}}]},{name:"deleteMeta",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"meta",isMut:!0,isSigner:!1},{name:"metaAuthority",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"addDevice",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddDeviceData"}}]},{name:"deleteDevice",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"deviceAuthority",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"postMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"message",type:"string"}]},{name:"readMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"messageId",type:"u64"}]},{name:"updateMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u64"},{name:"message",type:"string"}]},{name:"deleteMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u64"}]}],to=[{name:"ChannelMeta",type:{kind:"struct",fields:[{name:"channel",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"key",type:"u16"},{name:"value",type:"bytes"},{name:"bump",type:"u8"}]}},{name:"Channel",type:{kind:"struct",fields:[{name:"workspace",docs:["Workspace used to group channels"],type:"string"},{name:"name",docs:["Name of the channel"],type:"string"},{name:"creator",docs:["Channel creator"],type:"publicKey"},{name:"createdAt",docs:["Creation date"],type:"i64"},{name:"lastMessageAt",docs:["Last message date"],type:"i64"},{name:"flags",docs:["Channel flags"],type:"u8"},{name:"memberCount",docs:["Number of members"],type:"u16"},{name:"messageCount",docs:["Message counter"],type:"u64"},{name:"maxMessages",docs:["The maximum number of messages that are stored in [messages]"],type:"u16"},{name:"messages",docs:["List of latest messages"],type:{vec:{defined:"Message"}}}]}},{name:"ChannelDevice",type:{kind:"struct",fields:[{name:"channel",docs:["Associated [Channel] address"],type:"publicKey"},{name:"authority",docs:["Authority of the [ChannelKey]"],type:"publicKey"},{name:"key",docs:["The device key used to encrypt the `cek`"],type:"publicKey"},{name:"cek",docs:["The content encryption key (CEK)"],type:{defined:"CEKData"}},{name:"bump",docs:["Bump seed for deriving PDA seeds"],type:"u8"}]}},{name:"ChannelMembership",type:{kind:"struct",fields:[{name:"channel",docs:["Associated [Channel] address"],type:"publicKey"},{name:"authority",docs:["Authority of membership"],type:"publicKey"},{name:"status",docs:["Status of membership"],type:{defined:"ChannelMembershipStatus"}},{name:"statusTarget",docs:["Status target key"],type:{option:"publicKey"}},{name:"name",docs:["Name of the channel member"],type:"string"},{name:"lastReadMessageId",docs:["The last read message id"],type:"u64"},{name:"createdAt",docs:["Creation date"],type:"i64"},{name:"flags",docs:["Membership flags"],type:"u8"},{name:"bump",docs:["Bump seed for deriving PDA seeds"],type:"u8"}]}}],no=[{name:"AddDeviceData",type:{kind:"struct",fields:[{name:"key",type:"publicKey"},{name:"cek",type:{defined:"CEKData"}}]}},{name:"AddMemberData",type:{kind:"struct",fields:[{name:"name",docs:["Member name"],type:"string"},{name:"flags",docs:["Membership flags, only `admin` and `owner` can set membership flags"],type:"u8"},{name:"cek",docs:["Content Encryption Key"],type:{defined:"CEKData"}},{name:"key",docs:["Device key"],type:"publicKey"}]}},{name:"AddMetaData",type:{kind:"struct",fields:[{name:"key",type:"u16"},{name:"value",type:"bytes"}]}},{name:"AuthorizeMemberData",type:{kind:"struct",fields:[{name:"cek",type:{defined:"CEKData"}}]}},{name:"GrantAccessMemberData",type:{kind:"struct",fields:[{name:"flags",type:"u8"}]}},{name:"InitChannelData",type:{kind:"struct",fields:[{name:"workspace",type:"string"},{name:"name",type:"string"},{name:"maxMessages",type:"u16"},{name:"memberName",type:"string"},{name:"cek",type:{defined:"CEKData"}},{name:"public",type:"bool"},{name:"permissionless",type:"bool"}]}},{name:"JoinChannelData",type:{kind:"struct",fields:[{name:"name",type:"string"},{name:"authority",type:{option:"publicKey"}}]}},{name:"UpdateMessageData",type:{kind:"struct",fields:[{name:"id",type:"u64"},{name:"content",type:"string"}]}},{name:"CEKData",type:{kind:"struct",fields:[{name:"header",docs:["The header information for the CEK"],type:"string"},{name:"encryptedKey",docs:["The CEK itself"],type:"string"}]}},{name:"Message",type:{kind:"struct",fields:[{name:"id",docs:["Uniq message id"],type:"u64"},{name:"sender",docs:["The message sender id"],type:"publicKey"},{name:"createdAt",docs:["The unix timestamp at which the message was received"],type:"i64"},{name:"flags",docs:["The unix timestamp at which the message was updated","Message flags"],type:"u8"},{name:"content",docs:["The (typically encrypted) message content"],type:"string"}]}},{name:"ChannelMembershipStatus",type:{kind:"enum",variants:[{name:"Authorized"},{name:"Pending"}]}}],ao=[{name:"NewChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"creator",type:"publicKey",index:!1},{name:"name",type:"string",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"creator",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"NewMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"message",type:{defined:"Message"},index:!1}]},{name:"UpdateMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"message",type:{defined:"Message"},index:!1}]},{name:"DeleteMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"id",type:"u64",index:!1}]},{name:"ReadMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"id",type:"u64",index:!1}]},{name:"JoinChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"LeaveChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!0},{name:"timestamp",type:"i64",index:!1}]},{name:"AddMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"AuthorizeMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"AddDeviceEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteDeviceEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],so=[{code:6e3,name:"Unauthorized",msg:"Unauthorized"},{code:6001,name:"InvalidChannel",msg:"Invalid channel"},{code:6002,name:"InvalidMembership",msg:"Invalid membership"},{code:6003,name:"InvalidDevice",msg:"Invalid device"},{code:6004,name:"InvalidMessage",msg:"Invalid message"},{code:6005,name:"NameTooLong",msg:"Name too long"},{code:6006,name:"WorkspaceTooLong",msg:"Workspace too long"},{code:6007,name:"MessageTooLong",msg:"Message too long"}],io={address:"CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC",origin:"anchor",binaryVersion:"0.25.0",libVersion:"0.25.0"},oo={version:Zi,name:Ji,instructions:eo,accounts:to,types:no,events:ao,errors:so,metadata:io},Wt=[40,109,247,198,79,121,252,126];class Ce{constructor(e,n,s,i,r){this.channel=e,this.authority=n,this.key=s,this.value=i,this.bump=r}static fromArgs(e){return new Ce(e.channel,e.authority,e.key,e.value,e.bump)}static fromAccountInfo(e,n=0){return Ce.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find ChannelMeta account at ${n}`);return Ce.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){return gt.fromStruct(e,it)}static deserialize(e,n=0){return it.deserialize(e,n)}serialize(){return it.serialize({accountDiscriminator:Wt,...this})}static byteSize(e){const n=Ce.fromArgs(e);return it.toFixedFromValue({accountDiscriminator:Wt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(Ce.byteSize(e),s)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),key:this.key,value:this.value,bump:this.bump}}}const it=new g.FixableBeetStruct([["accountDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["channel",fe],["authority",fe],["key",g.u16],["value",g.bytes],["bump",g.u8]],Ce.fromArgs,"ChannelMeta"),ro=new g.FixableBeetArgsStruct([["id",g.u64],["sender",fe],["createdAt",g.i64],["flags",g.u8],["content",g.utf8String]],"Message"),Ut=[49,159,99,106,220,87,219,88];class _e{constructor(e,n,s,i,r,a,o,u,h,y){this.workspace=e,this.name=n,this.creator=s,this.createdAt=i,this.lastMessageAt=r,this.flags=a,this.memberCount=o,this.messageCount=u,this.maxMessages=h,this.messages=y}static fromArgs(e){return new _e(e.workspace,e.name,e.creator,e.createdAt,e.lastMessageAt,e.flags,e.memberCount,e.messageCount,e.maxMessages,e.messages)}static fromAccountInfo(e,n=0){return _e.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find Channel account at ${n}`);return _e.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){return gt.fromStruct(e,ot)}static deserialize(e,n=0){return ot.deserialize(e,n)}serialize(){return ot.serialize({accountDiscriminator:Ut,...this})}static byteSize(e){const n=_e.fromArgs(e);return ot.toFixedFromValue({accountDiscriminator:Ut,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(_e.byteSize(e),s)}pretty(){return{workspace:this.workspace,name:this.name,creator:this.creator.toBase58(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),lastMessageAt:(()=>{const e=this.lastMessageAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),flags:this.flags,memberCount:this.memberCount,messageCount:(()=>{const e=this.messageCount;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),maxMessages:this.maxMessages,messages:this.messages}}}const ot=new g.FixableBeetStruct([["accountDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["workspace",g.utf8String],["name",g.utf8String],["creator",fe],["createdAt",g.i64],["lastMessageAt",g.i64],["flags",g.u8],["memberCount",g.u16],["messageCount",g.u64],["maxMessages",g.u16],["messages",g.array(ro)]],_e.fromArgs,"Channel"),nt=new g.FixableBeetArgsStruct([["header",g.utf8String],["encryptedKey",g.utf8String]],"CEKData"),Ot=[163,153,9,169,176,51,204,146];class we{constructor(e,n,s,i,r){this.channel=e,this.authority=n,this.key=s,this.cek=i,this.bump=r}static fromArgs(e){return new we(e.channel,e.authority,e.key,e.cek,e.bump)}static fromAccountInfo(e,n=0){return we.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find ChannelDevice account at ${n}`);return we.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){return gt.fromStruct(e,rt)}static deserialize(e,n=0){return rt.deserialize(e,n)}serialize(){return rt.serialize({accountDiscriminator:Ot,...this})}static byteSize(e){const n=we.fromArgs(e);return rt.toFixedFromValue({accountDiscriminator:Ot,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(we.byteSize(e),s)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),key:this.key.toBase58(),cek:this.cek,bump:this.bump}}}const rt=new g.FixableBeetStruct([["accountDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["channel",fe],["authority",fe],["key",fe],["cek",nt],["bump",g.u8]],we.fromArgs,"ChannelDevice");var $e=(t=>(t[t.Authorized=0]="Authorized",t[t.Pending=1]="Pending",t))($e||{});const lo=g.fixedScalarEnum($e),dt=[238,149,255,251,116,131,86,170];class ge{constructor(e,n,s,i,r,a,o,u,h){this.channel=e,this.authority=n,this.status=s,this.statusTarget=i,this.name=r,this.lastReadMessageId=a,this.createdAt=o,this.flags=u,this.bump=h}static fromArgs(e){return new ge(e.channel,e.authority,e.status,e.statusTarget,e.name,e.lastReadMessageId,e.createdAt,e.flags,e.bump)}static fromAccountInfo(e,n=0){return ge.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find ChannelMembership account at ${n}`);return ge.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){return gt.fromStruct(e,lt)}static deserialize(e,n=0){return lt.deserialize(e,n)}serialize(){return lt.serialize({accountDiscriminator:dt,...this})}static byteSize(e){const n=ge.fromArgs(e);return lt.toFixedFromValue({accountDiscriminator:dt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(ge.byteSize(e),s)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),status:`ChannelMembershipStatus.${$e[this.status]}`,statusTarget:this.statusTarget,name:this.name,lastReadMessageId:(()=>{const e=this.lastReadMessageId;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),flags:this.flags,bump:this.bump}}}const lt=new g.FixableBeetStruct([["accountDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["channel",fe],["authority",fe],["status",lo],["statusTarget",g.coption(fe)],["name",g.utf8String],["lastReadMessageId",g.u64],["createdAt",g.i64],["flags",g.u8],["bump",g.u8]],ge.fromArgs,"ChannelMembership"),Ee=new Map,Ie=new Map;class vt extends Error{constructor(){super("Unauthorized");X(this,"code",6e3);X(this,"name","Unauthorized");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,vt)}}Ee.set(6e3,()=>new vt);Ie.set("Unauthorized",()=>new vt);class At extends Error{constructor(){super("Invalid channel");X(this,"code",6001);X(this,"name","InvalidChannel");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,At)}}Ee.set(6001,()=>new At);Ie.set("InvalidChannel",()=>new At);class _t extends Error{constructor(){super("Invalid membership");X(this,"code",6002);X(this,"name","InvalidMembership");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_t)}}Ee.set(6002,()=>new _t);Ie.set("InvalidMembership",()=>new _t);class wt extends Error{constructor(){super("Invalid device");X(this,"code",6003);X(this,"name","InvalidDevice");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,wt)}}Ee.set(6003,()=>new wt);Ie.set("InvalidDevice",()=>new wt);class Mt extends Error{constructor(){super("Invalid message");X(this,"code",6004);X(this,"name","InvalidMessage");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Mt)}}Ee.set(6004,()=>new Mt);Ie.set("InvalidMessage",()=>new Mt);class Ct extends Error{constructor(){super("Name too long");X(this,"code",6005);X(this,"name","NameTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ct)}}Ee.set(6005,()=>new Ct);Ie.set("NameTooLong",()=>new Ct);class St extends Error{constructor(){super("Workspace too long");X(this,"code",6006);X(this,"name","WorkspaceTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,St)}}Ee.set(6006,()=>new St);Ie.set("WorkspaceTooLong",()=>new St);class kt extends Error{constructor(){super("Message too long");X(this,"code",6007);X(this,"name","MessageTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,kt)}}Ee.set(6007,()=>new kt);Ie.set("MessageTooLong",()=>new kt);function ae(t){const e=Ee.get(t);return e!=null?e():null}function Te(t){const e=Ie.get(t);return e!=null?e():null}const co=new g.FixableBeetArgsStruct([["key",fe],["cek",nt]],"AddDeviceData"),uo=new g.FixableBeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["data",co]],"AddDeviceInstructionArgs"),mo=[21,27,66,42,18,30,14,18];function ho(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=uo.serialize({instructionDiscriminator:mo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const po=new g.FixableBeetArgsStruct([["name",g.utf8String],["flags",g.u8],["cek",nt],["key",fe]],"AddMemberData"),go=new g.FixableBeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["data",po]],"AddMemberInstructionArgs"),fo=[13,116,123,130,126,198,57,34];function yo(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=go.serialize({instructionDiscriminator:fo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.invitee,isWritable:!1,isSigner:!1},{pubkey:t.inviteeMembership,isWritable:!0,isSigner:!1},{pubkey:t.inviteeDevice,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const bo=new g.FixableBeetArgsStruct([["key",g.u16],["value",g.bytes]],"AddMetaData"),vo=new g.FixableBeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["data",bo]],"AddMetaInstructionArgs"),Ao=[98,4,232,132,215,202,101,231];function nn(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=vo.serialize({instructionDiscriminator:Ao,...e}),i=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.meta,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const _o=new g.FixableBeetArgsStruct([["cek",nt]],"AuthorizeMemberData"),wo=new g.FixableBeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["data",_o]],"AuthorizeMemberInstructionArgs"),Mo=[194,123,189,175,86,225,93,128];function Co(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=wo.serialize({instructionDiscriminator:Mo,...e}),i=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const So=new g.BeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)]],"DeleteChannelInstructionArgs"),ko=[145,225,187,221,157,142,114,133];function Do(t,e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var r;const[n]=So.serialize({instructionDiscriminator:ko}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(r=t.systemProgram)!=null?r:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ie({programId:e,keys:s,data:n})}const xo=new g.BeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)]],"DeleteDeviceInstructionArgs"),Eo=[168,96,86,82,105,2,215,144];function Io(t,e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var r;const[n]=xo.serialize({instructionDiscriminator:Eo}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.deviceAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(r=t.systemProgram)!=null?r:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ie({programId:e,keys:s,data:n})}const No=new g.BeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)]],"DeleteMemberInstructionArgs"),To=[95,14,98,112,252,218,205,173];function Ko(t,e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var r;const[n]=No.serialize({instructionDiscriminator:To}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.membershipAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(r=t.systemProgram)!=null?r:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ie({programId:e,keys:s,data:n})}const Bo=new g.BeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["id",g.u64]],"DeleteMessageInstructionArgs"),Lo=[198,99,22,204,200,165,54,138];function Ro(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=Bo.serialize({instructionDiscriminator:Lo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const Po=new g.BeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)]],"DeleteMetaInstructionArgs"),zo=[127,117,248,66,151,4,97,146];function qo(t,e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var r;const[n]=Po.serialize({instructionDiscriminator:zo}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.meta,isWritable:!0,isSigner:!1},{pubkey:t.metaAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(r=t.systemProgram)!=null?r:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ie({programId:e,keys:s,data:n})}const Wo=new g.BeetArgsStruct([["flags",g.u8]],"GrantAccessMemberData"),Uo=new g.BeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["data",Wo]],"GrantAccessMemberInstructionArgs"),Oo=[236,46,184,64,57,158,80,142];function Ho(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=Uo.serialize({instructionDiscriminator:Oo,...e}),i=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const $o=new g.FixableBeetArgsStruct([["workspace",g.utf8String],["name",g.utf8String],["maxMessages",g.u16],["memberName",g.utf8String],["cek",nt],["public",g.bool],["permissionless",g.bool]],"InitChannelData"),Fo=new g.FixableBeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["data",$o]],"InitChannelInstructionArgs"),Vo=[21,200,152,39,19,178,76,47];function jo(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=Fo.serialize({instructionDiscriminator:Vo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.key,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const Go=new g.FixableBeetArgsStruct([["name",g.utf8String],["authority",g.coption(fe)]],"JoinChannelData"),Xo=new g.FixableBeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["data",Go]],"JoinChannelInstructionArgs"),Qo=[124,39,115,89,217,26,38,29];function Yo(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=Xo.serialize({instructionDiscriminator:Qo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.key,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const Zo=new g.BeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)]],"LeaveChannelInstructionArgs"),Jo=[104,0,75,134,95,80,68,186];function er(t,e=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var r;const[n]=Zo.serialize({instructionDiscriminator:Jo}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(r=t.systemProgram)!=null?r:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ie({programId:e,keys:s,data:n})}const tr=new g.FixableBeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["message",g.utf8String]],"PostMessageInstructionArgs"),nr=[214,50,100,209,38,34,7,76];function ar(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=tr.serialize({instructionDiscriminator:nr,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const sr=new g.BeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["messageId",g.u64]],"ReadMessageInstructionArgs"),ir=[54,166,48,51,234,46,110,163];function or(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=sr.serialize({instructionDiscriminator:ir,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}const rr=new g.FixableBeetArgsStruct([["instructionDiscriminator",g.uniformFixedSizeArray(g.u8,8)],["id",g.u64],["message",g.utf8String]],"UpdateMessageInstructionArgs"),lr=[23,135,34,211,96,120,107,9];function cr(t,e,n=new T("CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC")){var a;const[s]=rr.serialize({instructionDiscriminator:lr,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:ee.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ie({programId:n,keys:i,data:s})}new g.FixableBeetArgsStruct([["id",g.u64],["content",g.utf8String]],"UpdateMessageData");const ur="CgRaMXqqRHNT3Zo2uVZfX72TuxUgcLb8E3A8KrXnbXAC",dr=new T(ur);function Ht(t,e=new Uint8Array(4)){const n=Ze(t.toString(),"base10");return e.set(n,4-n.length),e}const Lt=t=>Fe([Ht(t.length),t]);function An(t,e,n){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const s=Fe([Lt(Ze(n)),Lt(new Uint8Array(0)),Lt(new Uint8Array(0)),Ht(e)]),i=1;return ta.hash(Fe([Ht(i),t,s]))}const $t=t=>Ze(t,"base64pad"),Ft=t=>dn(t,"base64pad"),mr=t=>Ze(t),hr=t=>dn(t),pr=t=>Ze(t,"base58btc"),Re=ft.NONCE_LENGTH,Ve=ft.TAG_LENGTH,_n=t=>{const e=new ft.XChaCha20Poly1305(t);return(n,s)=>{const i=mn.randomBytes(Re),r=e.seal(i,n,s);return{ciphertext:r.subarray(0,r.length-Ve),tag:r.subarray(r.length-Ve),iv:i}}},wn=t=>{const e=new ft.XChaCha20Poly1305(t);return(n,s,i,r)=>e.open(i,Fe([n,s]),r)},Mn="ECDH-ES+XC20PKW",Cn=256,gr=t=>e=>{const n=zt.generateKeyPair(),s=zt.sharedKey(n.secretKey,t),i=An(s,Cn,Mn),r=_n(i)(e);return{encryptedKey:r.ciphertext,tag:r.tag,iv:r.iv,epPubKey:n.publicKey}},fr=t=>(e,n,s,i)=>{const r=zt.sharedKey(t,i),a=An(r,Cn,Mn);return wn(a)(e,n,s)},yr=t=>Array.isArray(t)?Pe.fromSecretKey(ct.Buffer.from(t)):typeof t=="string"?Pe.fromSecretKey(pr(t)):Pe.fromSecretKey(t),br=async(t=32)=>{const e=mn.randomBytes(t);return Promise.resolve(e)},vr=async(t,e)=>{const n=await gr(na(e.toBytes()))(t);return{header:Ft(Fe([n.iv,n.tag,n.epPubKey])),encryptedKey:Ft(n.encryptedKey)}},Ar=async(t,e)=>{const n=$t(t.header),s=n.subarray(0,Re),i=n.subarray(Re,Re+Ve),r=n.subarray(Re+Ve),a=$t(t.encryptedKey),o=yr(e).secretKey,u=aa(o),h=await fr(u)(a,i,s,r);if(h===null)throw new Error("There was a problem decrypting the CEK");return h},_r=async(t,e)=>{const n=await _n(e)(mr(t));return Ft(Fe([n.iv,n.ciphertext,n.tag]))},wr=async(t,e)=>{const n=$t(t),s=n.subarray(0,Re),i=n.subarray(Re,-Ve),r=n.subarray(-Ve),a=await wn(e)(i,r,s);if(a===null)throw new Error("There was an error decoding the message!");return hr(a)},Mr={maxWorkspaceLength:32,maxChannelNameLength:32,maxMemberNameLength:32,maxMessageLength:400,maxCEKLength:100},Cr="meta";class Sr{constructor(e,n,s){X(this,"programId",dr);X(this,"constants",Mr);X(this,"_coder");X(this,"_events");X(this,"utils",{channel:{isPublic:e=>(e.flags&1)>0,isPermissionless:e=>(e.flags&2)>0},member:{isAuthorized:e=>e.status===$e.Authorized,isPending:e=>e.status===$e.Pending,isOwner:e=>e.flags>=255,isAdmin:e=>(e.flags&7)===7,canAddMember:e=>(e.flags&1)>0,canDeleteMember:e=>(e.flags&2)>0,canAuthorizeMember:e=>(e.flags&4)>0},message:{isEncrypted:e=>(e.flags&1)>0}});this.provider=e,this.keypair=n,this.workspace=s,this._coder=new sa(oo),this._events=new ia(this.programId,e,this._coder)}get connection(){return this.provider.connection}addEventListener(e,n){return this._events.addEventListener(e,(s,i,r)=>{r!=="1111111111111111111111111111111111111111111111111111111111111111"&&n(s,i,r)})}async removeEventListener(e){return await this._events.removeEventListener(e)}setKeypair(e){this.keypair=e}async loadAllChannels(e={}){const n=_e.gpaBuilder().addFilter("accountDiscriminator",Ut);return this.workspace!==void 0&&n.addFilter("workspace",this.workspace),e.name&&n.addFilter("name",e.name),e.creator&&n.addFilter("creator",e.creator),(await n.run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:_e.fromAccountInfo(s.account)[0]}))}async loadChannel(e,n){return _e.fromAccountAddress(this.provider.connection,e,n)}async loadChannelMembers(e){return(await ge.gpaBuilder().addFilter("accountDiscriminator",dt).addFilter("channel",e).run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:ge.fromAccountInfo(s.account)[0]}))}async loadMetas(e={}){const n=Ce.gpaBuilder().addFilter("accountDiscriminator",Wt).addFilter("authority",this.provider.publicKey);return e.channel&&n.addFilter("channel",e.channel),(await n.run(this.provider.connection)).map(i=>({pubkey:i.pubkey,data:Ce.fromAccountInfo(i.account)[0]}))}async loadMemberships(){return(await ge.gpaBuilder().addFilter("accountDiscriminator",dt).addFilter("authority",this.provider.publicKey).run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:ge.fromAccountInfo(s.account)[0]}))}async loadMembership(e,n){return ge.fromAccountAddress(this.provider.connection,e,n)}async getMembershipPDA(e,n){return n=n!=null?n:this.provider.publicKey,await T.findProgramAddress([e.toBuffer(),n.toBuffer()],this.programId)}async loadDevices(e,n){return(await we.gpaBuilder().addFilter("accountDiscriminator",Ot).addFilter("authority",n!=null?n:this.provider.publicKey).addFilter("channel",e).run(this.provider.connection)).map(r=>({pubkey:r.pubkey,data:we.fromAccountInfo(r.account)[0]}))}async loadDevice(e,n){return we.fromAccountAddress(this.provider.connection,e,n)}async getDevicePDA(e,n){return n=n!=null?n:this.keypair.publicKey,await T.findProgramAddress([e.toBuffer(),n.toBuffer()],this.programId)}async loadMeta(e,n){return Ce.fromAccountAddress(this.provider.connection,e,n)}async getMetaPDA(e,n,s){return s=s!=null?s:this.provider.publicKey,await T.findProgramAddress([ct.Buffer.from(Cr),e.toBuffer(),s.toBuffer(),Uint8Array.from([n&255,n>>8&255])],this.programId)}async encryptCEK(e,n){return vr(e,n!=null?n:this.keypair.publicKey)}async decryptCEK(e,n){return Ar(e,n!=null?n:this.keypair.secretKey)}async encryptMessage(e,n){return _r(e,n)}async decryptMessage(e,n){return wr(e,n)}async initChannel(e,n){var v,x,D,L,W,S;const s=(v=e.channel)!=null?v:Pe.generate(),i=await br(),r=await this.encryptCEK(i),[a]=await this.getMembershipPDA(s.publicKey),[o]=await this.getDevicePDA(a),u=this.provider.publicKey,h=new ne,y=this.channelSpace(e.maxMessages);if(h.add(ee.createAccount({fromPubkey:u,newAccountPubkey:s.publicKey,lamports:await this.connection.getMinimumBalanceForRentExemption(y,n==null?void 0:n.commitment),space:y,programId:this.programId})),h.add(jo({key:this.keypair.publicKey,channel:s.publicKey,membership:a,device:o,authority:u},{data:{workspace:(x=e.workspace)!=null?x:"",name:e.name,public:(D=e.public)!=null?D:!1,permissionless:(L=e.permissionless)!=null?L:!1,memberName:(W=e.memberName)!=null?W:"",maxMessages:e.maxMessages,cek:r}})),e.meta)for(const{key:k,value:K}of e.meta){const[I]=await this.getMetaPDA(s.publicKey,k);h.add(nn({channel:s.publicKey,authority:this.provider.publicKey,meta:I},{data:{key:k,value:ct.Buffer.from(K)}}))}let p;try{p=await this.provider.sendAndConfirm(h,[s,this.keypair],n)}catch(k){throw(S=ae(k.code))!=null?S:k}return{signature:p,channel:s,cek:i,cekEncrypted:r}}async deleteChannel({channel:e},n){var o;const s=this.provider.publicKey,[i]=await this.getMembershipPDA(e),r=new ne;r.add(Do({channel:e,authority:s,authorityMembership:i}));let a;try{a=await this.provider.sendAndConfirm(r,void 0,n)}catch(u){throw(o=ae(u.code))!=null?o:Te("Unauthorized")}return{signature:a}}async joinChannel(e,n){var h,y;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getDevicePDA(s),r=this.provider.publicKey,a=this.keypair.publicKey,o=new ne;o.add(Yo({channel:e.channel,membership:s,device:i,authority:r,key:a},{data:{name:e.name,authority:(h=e.authority)!=null?h:null}}));let u;try{u=await this.provider.sendAndConfirm(o,[this.keypair],n)}catch(p){throw(y=ae(p.code))!=null?y:p}return{signature:u}}async leaveChannel(e,n){var u;const[s]=await this.getMembershipPDA(e.channel),i=this.provider.publicKey,r=new ne,a=await this.loadDevices(e.channel);r.add(er({channel:e.channel,membership:s,authority:i,anchorRemainingAccounts:a.map(h=>({pubkey:h.pubkey,isSigner:!1,isWritable:!0}))}));let o;try{o=await this.provider.sendAndConfirm(r,void 0,n)}catch(h){throw(u=ae(h.code))!=null?u:h}return{signature:o}}async addMember(e,n){var x,D,L,W;const s=(x=e.key)!=null?x:e.invitee,[i]=await this.getMembershipPDA(e.channel),[r]=await this.getDevicePDA(i),[a]=await this.getMembershipPDA(e.channel,e.invitee),[o]=await this.getDevicePDA(a,s),u=await this.loadDevice(r);if(!u.cek.encryptedKey)throw Te("Unauthorized");const h=await this.decryptCEK(u.cek),y=await this.encryptCEK(h,s),p=new ne;p.add(yo({channel:e.channel,authority:this.provider.publicKey,invitee:e.invitee,authorityMembership:i,inviteeMembership:a,inviteeDevice:o},{data:{name:(D=e.name)!=null?D:"",flags:(L=e.flags)!=null?L:0,cek:y,key:s}}));let v;try{v=await this.provider.sendAndConfirm(p,void 0,n)}catch(S){throw(W=ae(S.code))!=null?W:S}return{signature:v}}async deleteMember(e,n){var h;const[s]=await this.getMembershipPDA(e.channel,e.authority),[i]=await this.getMembershipPDA(e.channel),r=this.provider.publicKey,a=await this.loadDevices(e.channel,e.authority),o=new ne;o.add(Ko({channel:e.channel,membership:s,membershipAuthority:e.authority,authority:r,authorityMembership:i,anchorRemainingAccounts:a.map(y=>({pubkey:y.pubkey,isSigner:!1,isWritable:!0}))}));let u;try{u=await this.provider.sendAndConfirm(o,void 0,n)}catch(y){throw console.log(y),(h=ae(y.code))!=null?h:y}return{signature:u}}async authorizeMember(e,n){var x,D;const s=(x=e.key)!=null?x:e.authority,[i]=await this.getMembershipPDA(e.channel),[r]=await this.getDevicePDA(i),[a]=await this.getMembershipPDA(e.channel,e.authority),[o]=await this.getDevicePDA(a,s),u=await this.loadDevice(r);if(!u.cek.encryptedKey)throw Te("Unauthorized");const h=await this.decryptCEK(u.cek),y=await this.encryptCEK(h,s),p=new ne;p.add(Co({channel:e.channel,membership:a,device:o,authority:this.provider.publicKey,authorityMembership:i},{data:{cek:y}}));let v;try{v=await this.provider.sendAndConfirm(p,void 0,n)}catch(L){throw(D=ae(L.code))!=null?D:Te("Unauthorized")}return{signature:v}}async grantAccessMember(e,n){var o;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getMembershipPDA(e.channel,e.authority),r=new ne;r.add(Ho({channel:e.channel,membership:i,authority:this.provider.publicKey,authorityMembership:s},{data:{flags:e.flags}}));let a;try{a=await this.provider.sendAndConfirm(r,void 0,n)}catch(u){throw(o=ae(u.code))!=null?o:Te("Unauthorized")}return{signature:a}}async addDevice(e,n){var p;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getDevicePDA(s),[r]=await this.getDevicePDA(s,e.key),a=await this.loadDevice(i);if(!(a!=null&&a.cek.encryptedKey))throw Te("Unauthorized");const o=await this.decryptCEK(a.cek),u=await this.encryptCEK(o,e.key),h=new ne;h.add(ho({channel:e.channel,authority:this.provider.publicKey,membership:s,device:r},{data:{cek:u,key:e.key}}));let y;try{y=await this.provider.sendAndConfirm(h,void 0,n)}catch(v){throw(p=ae(v.code))!=null?p:v}return{signature:y}}async deleteDevice(e,n){var u,h;const s=(u=e.authority)!=null?u:this.provider.publicKey,[i]=await this.getMembershipPDA(e.channel,s),[r]=await this.getDevicePDA(i,e.key),a=new ne;a.add(Io({channel:e.channel,authority:this.provider.publicKey,device:r,deviceAuthority:s}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(y){throw(h=ae(y.code))!=null?h:y}return{signature:o}}async deleteMeta(e,n){var o,u;const s=(o=e.authority)!=null?o:this.provider.publicKey,[i]=await this.getMetaPDA(e.channel,e.key),r=new ne;r.add(qo({channel:e.channel,authority:this.provider.publicKey,metaAuthority:s,meta:i}));let a;try{a=await this.provider.sendAndConfirm(r,void 0,n)}catch(h){throw(u=ae(h.code))!=null?u:h}return{signature:a}}async addMeta(e,n){var a;const[s]=await this.getMetaPDA(e.channel,e.key),i=new ne;i.add(nn({channel:e.channel,authority:this.provider.publicKey,meta:s},{data:{key:e.key,value:ct.Buffer.from(e.value)}}));let r;try{r=await this.provider.sendAndConfirm(i,void 0,n)}catch(o){throw(a=ae(o.code))!=null?a:o}return{signature:r}}async postMessage(e,n){var u;const[s]=await this.getMembershipPDA(e.channel);let i,r=0;if(e.encrypt){const[h]=await this.getDevicePDA(s),y=await this.loadDevice(h);if(!y.cek.header)throw Te("Unauthorized");const p=await this.decryptCEK(y.cek);i=await this.encryptMessage(e.message,p),r|=1}else i=e.message;const a=new ne;a.add(ar({channel:e.channel,membership:s,authority:this.provider.publicKey},{message:String.fromCharCode(r)+i}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(h){throw(u=ae(h.code))!=null?u:h}return{signature:o}}async updateMessage(e,n){var u;const[s]=await this.getMembershipPDA(e.channel);let i,r=0;if(e.encrypt){const[h]=await this.getDevicePDA(s),y=await this.loadDevice(h);if(!y.cek.header)throw Te("Unauthorized");const p=await this.decryptCEK(y.cek);i=await this.encryptMessage(e.newMessage,p),r|=1}else i=e.newMessage;const a=new ne;a.add(cr({channel:e.channel,membership:s,authority:this.provider.publicKey},{id:e.messageId,message:String.fromCharCode(r)+i}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(h){throw(u=ae(h.code))!=null?u:h}return{signature:o}}async deleteMessage(e,n){var a;const[s]=await this.getMembershipPDA(e.channel),i=new ne;i.add(Ro({channel:e.channel,membership:s,authority:this.provider.publicKey},{id:e.messageId}));let r;try{r=await this.provider.sendAndConfirm(i,void 0,n)}catch(o){throw(a=ae(o.code))!=null?a:o}return{signature:r}}async readMessage(e,n){var a;const[s]=await this.getMembershipPDA(e.channel),i=new ne;i.add(or({channel:e.channel,membership:s,authority:this.provider.publicKey},{messageId:e.messageId}));let r;try{r=await this.provider.sendAndConfirm(i,void 0,n)}catch(o){throw(a=ae(o.code))!=null?a:o}return{signature:r}}channelSpace(e=1){return _e.byteSize({workspace:"x".repeat(this.constants.maxWorkspaceLength),name:"x".repeat(this.constants.maxChannelNameLength),creator:T.default,createdAt:0,lastMessageAt:0,flags:0,memberCount:0,messageCount:0,maxMessages:e,messages:Array(e).fill({id:0,sender:T.default,createdAt:0,flags:0,content:"x".repeat(this.constants.maxMessageLength)})})}channelMembershipSpace(){return ge.byteSize({authority:T.default,channel:T.default,name:"x".repeat(this.constants.maxMemberNameLength),status:$e.Authorized,statusTarget:T.default,lastReadMessageId:0,createdAt:0,flags:0,bump:0})}channelDeviceSpace(){return we.byteSize({authority:T.default,channel:T.default,key:T.default,cek:{encryptedKey:"x".repeat(this.constants.maxCEKLength),header:"x".repeat(72)},bump:0})}}const an=2,sn="cgram",kr="https://docs.cgram.one/",Rt=t=>"***** *** *** *** *******",Y=ze("messenger",()=>{const t=bt(),e=Ue(),n=pt(),{noSol:s}=ve(),i=_(()=>e.keypair),r={allChannels:[],ownChannels:[],channel:void 0,channelAddr:void 0,channelMembershipAddr:void 0,channelMembership:void 0,channelMembers:[],channelMessages:[],channelLoading:!1,memberDevices:[],channelEvent:void 0,loading:!1,creating:!1,sending:!1},a=me({...r}),o=_(()=>{var b;return new Sr(new Zt(t.connection,(b=n.value)!=null?b:{publicKey:T.default},Zt.defaultOptions()),e.keypair,sn)});let u=[];J(n,b=>{b?p().then():v()},{immediate:!0}),J([i,a.allChannels],()=>{h().then()},{immediate:!0});async function h(){const M=(await o.value.loadMemberships()).map(E=>({pubkey:E.data.channel.toBase58(),status:E.data.status}));a.ownChannels=M}async function y(){console.log("Register events...");for(const b of u)await o.value.removeEventListener(b);u.push(o.value.addEventListener("DeleteMemberEvent",async b=>{var P;if(`${b.authority}`!=`${(P=n.value)==null?void 0:P.publicKey}`)return;const{channel:M}=b,E=a.allChannels.find(te=>te.pubkey.toBase58()===M.toBase58());a.channelEvent={channel:E.data.name,address:M.toBase58(),event:"delete"},await h(),`${a.channelAddr}`==`${M}`&&(a.channelMessages=[],a.channel=void 0)})),u.push(o.value.addEventListener("DeleteChannelEvent",async b=>{const{channel:M}=b,E=a.ownChannels.findIndex(P=>P.pubkey===M.toBase58());E!==-1&&(a.ownChannels.splice(E,1),`${b.channel}`==`${a.channelAddr}`&&(a.channelMessages=[],a.channel=void 0))})),u.push(o.value.addEventListener("AddDeviceEvent",async b=>{var M;`${(M=n.value)==null?void 0:M.publicKey}`==`${b.authority}`&&(console.log("[Event] AddDeviceEvent"),`${b.channel}`==`${a.channelAddr}`&&(S(a.channelAddr),Oe()))})),u.push(o.value.addEventListener("DeleteDeviceEvent",async b=>{var M;`${(M=n.value)==null?void 0:M.publicKey}`==`${b.authority}`&&(console.log("[Event] DeleteDeviceEvent"),`${b.channel}`==`${a.channelAddr}`&&(S(a.channelAddr),Oe()))})),u.push(o.value.addEventListener("NewMessageEvent",async b=>{if(console.log("[Event] NewMessageEvent",b),`${b.channel}`!=`${a.channelAddr}`)return;let M=b.message.content;if(o.value.utils.message.isEncrypted(b.message))try{const P=await k();M=P?await o.value.decryptMessage(b.message.content,P):Rt(b.message.content)}catch(P){console.log("Error:",P),M=Rt(b.message.content)}a.channelMessages.push({...b.message,content:M})})),u.push(o.value.addEventListener("UpdateMessageEvent",async b=>{console.log("[Event] UpdateMessageEvent",b),`${b.channel}`==`${a.channelAddr}`&&K().then()})),u.push(o.value.addEventListener("DeleteMessageEvent",async b=>{console.log("[Event] DeleteMessageEvent",b),`${b.channel}`==`${a.channelAddr}`&&K().then()})),u.push(o.value.addEventListener("AuthorizeMemberEvent",async b=>{var M,E,P;if(console.log("[Event] AuthorizeMemberEvent",b),`${b.authority}`==`${(M=n.value)==null?void 0:M.publicKey}`){h();const te=b.channel.toBase58(),oe=(P=(E=a.allChannels.find(F=>F.pubkey.toBase58()===te))==null?void 0:E.data.name)!=null?P:"";a.channelEvent={channel:oe,address:te,event:"authorize"}}a.channelAddr&&`${b.channel}`!=`${a.channelAddr}`||(`${b.membership}`==`${a.channelMembershipAddr}`?S(a.channelAddr).then():I().then())})),u.push(o.value.addEventListener("JoinChannelEvent",async b=>{console.log("[Event] JoinChannelEvent",b),`${b.channel}`==`${a.channelAddr}`&&I().then()})),u.push(o.value.addEventListener("LeaveChannelEvent",async b=>{console.log("[Event] LeaveChannelEvent",b),`${b.channel}`==`${a.channelAddr}`&&I().then()}))}async function p(){v(),u=[],a.loading=!0;const b=await o.value.loadAllChannels().then(M=>M.sort((E,P)=>E.data.name.localeCompare(P.data.name)));await y(),a.allChannels=b,a.loading=!1}function v(){Object.assign(a,r)}async function x(b,M,E){try{a.creating=!0;const{channel:P}=await o.value.initChannel({workspace:sn,name:b,memberName:M,maxMessages:Number(E.maxMessages),public:E.public,permissionless:E.permissionless});await S(P.publicKey),a.channel&&(a.allChannels.push({pubkey:P.publicKey,data:a.channel}),a.allChannels.sort((te,oe)=>te.data.name.localeCompare(oe.data.name)))}finally{a.creating=!1}}async function D(b){const M=new T(b);await o.value.deleteChannel({channel:M}),It(b)}async function L(b){await o.value.leaveChannel({channel:b});const M=a.ownChannels.findIndex(E=>E.pubkey===b.toString());a.ownChannels.splice(M,1),a.channelMessages=[],a.channel=void 0}async function W(b,M){const E=new T(b);try{await o.value.joinChannel({channel:E,name:M}),await S(b);const P={pubkey:b.toString(),status:1};a.ownChannels.push(P)}catch(P){console.log(P)}}async function S(b){var M,E,P,te;a.channelLoading=!0,a.channelMessages=(M=a.channelMessages)!=null?M:[],a.channelMembers=(E=a.channelMembers)!=null?E:[],a.channelMembershipAddr=void 0,a.channelMembership=(P=a.channelMembership)!=null?P:void 0,a.channelAddr=new T(b),a.memberDevices=[];try{if((te=n.value)!=null&&te.publicKey)try{const[oe]=await o.value.getMembershipPDA(a.channelAddr);a.channelMembershipAddr=oe,a.channelMembership=await o.value.loadMembership(oe)}catch{a.channelMembershipAddr=void 0,a.channelMembership=void 0}await Oe(),await I(),await K()}catch(oe){console.log("Error",oe)}finally{a.channelLoading=!1}}async function k(){if(!(!a.channelMembership||!i.value))try{const[b]=await o.value.getMembershipPDA(a.channelAddr),[M]=await o.value.getDevicePDA(b,i.value.publicKey),E=await o.value.loadDevice(M);return await o.value.decryptCEK(E.cek,i.value.secretKey)}catch(b){console.log(b)}}async function K(){if(!a.channelAddr){console.log("Invalid channel");return}a.channel=await o.value.loadChannel(a.channelAddr);const M=o.value.utils.channel.isPublic(a.channel)?null:await k();a.channelMessages=await Promise.all(a.channel.messages.map(async E=>{let te=o.value.utils.message.isEncrypted(E)?Rt(E.content):E.content;const oe=tt(E.sender);if(M)try{te=await o.value.decryptMessage(E.content,M)}catch{console.log(`Failed to decrypt message #${E.id}`)}return{...E,senderDisplayName:oe,content:te}}))}async function I(){if(!a.channelAddr){console.error("Invalid channel");return}a.channelMembers=await A()}async function A(b=a.channelAddr){return await o.value.loadChannelMembers(b)}async function w(b){if(!a.channelAddr){console.log("Please select a channel");return}try{if(!e.isUserHaveSol){s();return}a.sending=!0;let M;a.channel&&(M=o.value.utils.channel.isPublic(a.channel)),await o.value.postMessage({channel:a.channelAddr,message:b,encrypt:!M}),await K()}finally{a.sending=!1}}async function G(b,M){if(!a.channelAddr){console.log("Please select a channel");return}try{const E={channel:a.channelAddr,messageId:M,newMessage:b};a.sending=!0,await o.value.updateMessage(E);const P=He(E.messageId);P!==-1&&(a.channelMessages[P].content=b)}finally{a.sending=!1}}async function he(b){if(!a.channelAddr){console.log("Please select a channel");return}const M={channel:a.channelAddr,messageId:b};try{a.sending=!0,await o.value.deleteMessage(M),He(M.messageId)!==-1&&a.channelMessages.splice(b,1)}catch(E){console.log(`[Error: DeleteMessage] ${E}`)}finally{a.sending=!1}}async function pe(b,M,E,P){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.addMember({channel:a.channelAddr,invitee:new T(b),key:M?new T(M):void 0,name:E,flags:P})}async function ke(b){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.deleteMember({channel:a.channelAddr,authority:new T(b)})}async function Ae(b){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.addDevice({channel:a.channelAddr,key:new T(b)})}async function xt(b){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.deleteDevice({channel:a.channelAddr,key:b})}async function Et(b){return(await o.value.loadDevices(a.channelAddr,b)).filter(M=>{var E;return((E=M.data.cek)==null?void 0:E.encryptedKey)===""})[0]}async function Oe(){const b=a.allChannels.find(M=>{var E;return M.pubkey.toBase58()===((E=a.channelAddr)==null?void 0:E.toBase58())});a.channelAddr&&a.channelMembership&&(b==null?void 0:b.data.flags)!==1&&(a.memberDevices=await o.value.loadDevices(a.channelAddr,a.channelMembership.authority))}async function Ge(b){if(!a.channelAddr){console.log("Invalid channel");return}const M=await Et(b);await o.value.authorizeMember({channel:a.channelAddr,authority:b,key:M.data.key}),await Q()}async function at(){await p()}async function Q(){a.channelMembers=await A()}async function R(b){a.channelAddr=b}function He(b){return a.channelMessages.findIndex(M=>M.id===Number(b))}function It(b){const M=a.allChannels.findIndex(E=>E.pubkey.toBase58()===b.toString());a.allChannels.splice(M,1),a.channelMessages=[],a.channel=void 0}async function Nt(b){if(b>qt)return"extra";const M=o.value.channelSpace(b),E=o.value.channelMembershipSpace(),P=o.value.channelDeviceSpace(),te=await t.connection.getMinimumBalanceForRentExemption(M+E+P),oe=890880*2;return(te+oe)/jt}async function Tt(){if(!a.channelAddr)return;const[b]=await o.value.getMembershipPDA(a.channelAddr),[M]=await o.value.getDevicePDA(b);return(await o.value.loadDevice(M)).key.toBase58()}return{channelMessagesCost:Nt,addDevice:Ae,deleteDevice:xt,channelAuthorityDevice:Tt,state:a,client:o.value,leaveChannel:L,loadChannel:S,joinChannel:W,createChannel:x,deleteChannel:D,postMessage:w,editMessage:G,deleteMessage:he,addMember:pe,deleteMember:ke,authorizeMember:Ge,refreshList:at,loadMembers:A,selectChannel:R}});function Dr(){const{connection:t}=bt(),{userBalance:e}=Ue(),n=xe(),{notify:s}=De(),i=U(!1);return{isAirdrop:i,airdropSol:async()=>{try{const a=await t.requestAirdrop(n.publicKey.value,an*jt);await t.confirmTransaction(a),s({type:"positive",message:`you got ${an} sol`,timeout:2e3,position:"bottom"}),i.value=!0,await e()}catch(a){console.log(a),s({type:"negative",message:String(a),position:"bottom",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})}}}}const Sn=15;function xr(){const{createChannel:t,state:e}=Y(),{isWalletConnected:n,ok:s,error:i}=ve(),r=me({dialog:!1,name:"",memberName:"",maxMessages:Sn,public:!1,permissionless:!1,loading:!1});async function a(){if(n())try{if(r.loading=!0,e.allChannels.find(u=>u.data.name===r.name)){i("A channel with the same name already exists");return}await t(r.name,r.memberName,{maxMessages:r.maxMessages,public:r.public,permissionless:r.permissionless}),o(),s("Channel was created!")}catch(u){i(`${u}`),console.log(u)}finally{r.loading=!1}}function o(){r.dialog=!1,r.public=!1,r.loading=!1,r.name="",r.maxMessages=15}return{state:r,submit:a,reset:o}}function Er(){const t=Y(),{info:e,ok:n,error:s}=ve(),i=me({loading:!1});async function r(){if(!t.state.channelAddr){e("Please select a channel");return}try{i.loading=!0,await t.deleteChannel(t.state.channelAddr),n("Channel was deleted!")}catch(a){console.log("Error",a),s(`Error: ${a}`)}finally{i.loading=!1}}return{state:i,submit:r}}function kn(){const{authorizeMember:t,loadChannel:e,state:n}=Y(),{ok:s,error:i}=ve(),r=me({loading:!1,dialog:!1});async function a(o){var u;try{r.loading=!0,await t(o),await e((u=n.channelAddr)!=null?u:""),s("Member was authorized")}catch(h){i(`Error: ${h}`),console.log(h)}finally{r.loading=!1}}return{state:r,submit:a}}function Ir(){const{state:t,addMember:e,loadChannel:n}=Y(),{ok:s,info:i,error:r,noSol:a}=ve(),o=Ue(),u=me({dialog:!1,loading:!1,name:"",wallet:"",key:""});async function h(p){var v;if(u.loading=!0,!t.channelAddr){i("Please select a channel");return}try{if(!o.isUserHaveSol){a();return}return await e(p.wallet,p.key,p.name),await n((v=t.channelAddr)!=null?v:""),s("Member was added"),!0}catch(x){r(`Error: ${x}`),console.log(x)}finally{u.loading=!1,u.dialog=!1}return!1}function y(){u.loading=!1,u.dialog=!1}return{state:u,submit:h,reset:y}}function Dn(){const{deleteMember:t,loadChannel:e,state:n}=Y(),{ok:s,error:i}=ve(),r=me({loading:!1});async function a(o){var u;try{r.loading=!0,await t(o),await e((u=n.channelAddr)!=null?u:""),s("Member was deleted")}catch(h){i(`Error: ${h}`),console.log(h)}finally{r.loading=!1}}return{state:r,submit:a}}function Nr(){const{state:t,joinChannel:e}=Y(),{ok:n,info:s,error:i,noSol:r}=ve(),a=Ue(),o=me({dialog:!1,loading:!1,name:""});async function u(){if(!t.channelAddr){s("Please select a channel");return}o.loading=!0;try{if(!a.isUserHaveSol){r();return}await e(t.channelAddr,o.name),h(),n("Request was sent")}catch(y){console.log("Error",y),i(`Error: ${y}`)}finally{o.loading=!1}}function h(){o.loading=!1,o.dialog=!1,o.name=""}return{state:o,submit:u,reset:h}}function Tr(){const t=Y(),{info:e,ok:n,error:s}=ve(),i=me({loading:!1});async function r(){if(!t.state.channelAddr){e("Please select a channel");return}try{i.loading=!0,await t.leaveChannel(t.state.channelAddr),n("Channel was abandoned!")}catch(a){console.log("Error",a),s(`Error: ${a}`)}finally{i.loading=!1}}return{state:i,submit:r}}function Kr(){const t=Y(),{ok:e,error:n,noSol:s}=ve(),i=Ue(),r=me({loading:!1});async function a(o){try{if(r.loading=!0,!i.isUserHaveSol){s();return}await t.addDevice(o),e("device added")}catch{n("Invalid Device Key")}finally{r.loading=!1}}return{state:r,submit:a}}function Br(){const t=Y(),{ok:e}=ve(),n=me({loading:!1});async function s(i){try{n.loading=!0,await t.deleteDevice(i),e("device removed")}finally{n.loading=!1}}return{state:n,submit:s}}function ve(){const t=xe(),{airdropSol:e}=Dr(),{notify:n}=De(),s=u=>n({type:"info",position:"bottom",message:u,timeout:4e3}),i=u=>n({type:"negative",position:"bottom",message:u,timeout:4e3}),r=(u,h="bottom")=>n({type:"positive",message:u,timeout:4e3,position:h}),a=()=>n({type:"warning",message:"Your wallet has insufficient SOL balance",position:"bottom",timeout:0,actions:[{label:"GET SOL",class:"btn--no-hover q-mr-auto",padding:"0 15px 0 10px",size:"14px",color:"black",noDismiss:!0,handler:()=>e()},{label:"Dismiss",class:"btn--no-hover",padding:"0 15px 0 10px",size:"14px",color:"black"}]});function o(){return t.publicKey.value?!0:(s("Please connect wallet"),!1)}return{ok:r,info:s,error:i,noSol:a,isWalletConnected:o}}const Lr=H({__name:"ImportDeviceDialog",emits:["handleImport","closeImportModal"],setup(t,{emit:e}){const{ok:n,error:s}=ve(),i=U(),r=()=>{const a=i.value[0],o=new FileReader;o.addEventListener("load",()=>{const u=JSON.parse(o.result);u.backupKey||s("Invalid Key"),e("handleImport",u.backupKey),e("closeImportModal"),n("secret key imported")},!1),a&&o.readAsText(a)};return(a,o)=>(f(),C(ye,null,{default:d(()=>[l(se,{flat:"",square:""},{default:d(()=>[l(q,{class:"q-pa-md",style:{height:"20px"}},{default:d(()=>[l(be,{modelValue:c(i),"onUpdate:modelValue":o[0]||(o[0]=u=>le(i)?i.value=u:null),borderless:"",type:"file"},null,8,["modelValue"])]),_:1}),l(q,{class:"q-pa-md"},{default:d(()=>[l(z,{class:"dialog-submit-btn",disabled:!c(i),flat:"",square:"",onClick:r},{default:d(()=>[B(" import device key ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}))}}),Rr=H({__name:"AddDeviceDialog",props:{addLoading:Boolean},emits:["handleAddDevice"],setup(t,{emit:e}){const n=U(""),s=()=>e("handleAddDevice",n.value);return(i,r)=>(f(),C(ye,null,{default:d(()=>[l(se,{flat:"",square:"",class:"add-device-dialog"},{default:d(()=>[l(q,{class:"q-px-md q-pt-md justify-center items-center text-body1"},{default:d(()=>[B(" Enter device key ")]),_:1}),l(q,{class:"q-pa-md justify-center"},{default:d(()=>[l(Je,{onSubmit:s},{default:d(()=>[l(be,{modelValue:c(n),"onUpdate:modelValue":r[0]||(r[0]=a=>le(n)?n.value=a:null),class:"input",label:"Device key",dense:"","lazy-rules":"",rules:[a=>a&&a.length>0||"Please enter device key"]},null,8,["modelValue","rules"]),l(z,{type:"submit",class:"dialog-submit-btn",flat:"",square:""},{default:d(()=>[B(" add device ")]),_:1})]),_:1})]),_:1}),l(je,{showing:t.addLoading},null,8,["showing"])]),_:1})]),_:1}))}});const Pr=ue(Rr,[["__scopeId","data-v-fc061ba6"]]),xn="data:image/png;base64,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",zr="data:image/png;base64,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",qr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXMAAACSCAMAAACAC9ozAAAA7VBMVEX///+ZmZlFWmTg4OD/AACRkZHx8fFzg4uirbKDg4P09vairLFSZW7R1tlcb3f/MzP/KCj/9/f/EBD/p6f/YGD/UFCiLTL/GBj/Bwf/5+f/19f/n59oeYH/f3//7+//39//z8+6wsX/cHDo6+zc4OKNmqD/l5f/j4//aGjj5ujFzM//x8f/r6+Woqj/WFj/eHj/SEjL0dP/v79xgYj/ICD/t7f/h4dXUlv/QEDJGRz7+/ujo6N/jpWLOD6tt7vzBga6wsaUMzniDhDi0tLkxMTlvb3poaHsjIzufn7vd3fxYmJoSVH0TU16QUizJSm4ULjOAAAEhUlEQVR42uzaaVPaUBTG8VO4JZZGEpAIiCJiQSiyyOLG2I52X7//x2kIyAEMWOQmucv5v8qrO/CbDOQZAGp1icdGo9HsOg4+vdokoNaYI3qCzMMpgZG5f8qYF3oHoGsRmactxuxKD7QsIvMe88pk90qgXRGZl/PssW7tGPQqInMoOwyzO2XQqLDNsfReNofsuex5GjQpCnOsWbGRPe/UCqBDQZnH/7fP3y2G2T++xDUt3E1U2mtnkH1QHwIVxg4dVgbInmkXNXyEjGL7H1xaDLs+03eoznqzSfCyCkUnj+x2pQl693qT4OWd13PI7g5VbR4hozDHykcWYxoP1VDNseOawzBLr6EagTkO1Qyy5+r6DNWIzP2HalGPoRqROXZwds0w61KnR8jQzbFSUdOhGok5NqxrOFT5mtNQlcNcv6Eqyn8t0gtDNaf0UBXFfFy5YzHMUXaoimTuDdUuw6wjJYeqYOZ+QxVUSzxz9YeqmOZqD9XNzOOh9unb7zyy535+jauRsPe5/1BV4k95opu7lZeGqvSPkBKYuxVqKg1VOcy9oZpVZahKYz4ZqrYKQ1Uqc0WGqmzmbiXZh6qE5uN6C0O1LddQldTcG6oWwyyJfuuQ13zyi2oe2QeVHmBZcW99Ac1jG/Xn74PfUO2xTBGP2rCtXxWmpLnbr/0HhnW9odoZXxVifpE5n3d3dX8zP1Q7Tdu77e9i/pE5n3eHQ3Wum6vYisic07trTocq9vGOzIM09zo+6y7f6mQenDkOVWfxVifzwMyx4vKtTuaBmztPPtXJPGDzdN7nAYbMAzUvHE3bx+7JfGWiDnYyJ3MyJ/O1Rxlvp3246HM8isxXHpU6Bez2kONRZL7qqPcwX/KQ41FqmpuNhrmleRJ2U9PLXZTic5SS5gaAsaU5wE5sBpVAKS5HkfnzULsnKMXlKDJ/FuqdceFK9TkeRebroPA78JbjUWS+HspIwiSOR5H5Cig8z+0EgNtRZL4OCtvZ3rxanR6lkrlpTGoBtKaXpjjmfYC+euYNeFJDHHMDwCBzMhfqsyUJVb7mKXNsbqZUM+f4HXrYMrmap5KnVYDqaTJF5v/YtWMVBmEojMK3WSJFfQdRF8HBPYPv/1SFSyMtaDN4h/RyDp3/4RusklxPRVPzKPLUX8T8cmqQqTUz1z1t4Nnyy1zRjcwz+uDuP9TSvJ0U3c48bCKbv/cWI/N+1bNLUXQbc23fHX6HGpkvcrSamWuOzW+eza1PycWPR814/2zumPJnbnLXYhaROTRytJicQWsL5mdTSclDJ7mxN7hrkacwP5vqlDz0zbt04xUoNl8lj2fQFuaxS9yd+5NLhphjjjnmlU9hjnm1UJhjjjnmlU9hjnm1UJhjjjnmlU9VaO4+zIth7iDMi2HuIMyLYe4gzIth7iDMbbM3f5BBmFfeqx06pgEAAGAY5N/1JOxvQALOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wEDZ33s0IEYIBgAAAAASUVORK5CYII=",Wr="data:image/png;base64,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",Ur=m("span",{class:"add-title q-pb-md q-pt-sm"}," The Backup Key can be used to restore admin rights in case you lose access to your channels ",-1),Or=m("span",{class:"instructions-step q-pb-md"}," 1. Select Devices from the menu. ",-1),Hr=["src"],$r=m("span",{class:"instructions-step"},"2. Click Export and safely store your Backup Key. ",-1),Fr=["src"],Vr=m("span",{class:"instructions-step"},"3. In order to restore your admin privileges, select Import from the menu.",-1),jr=["src"],Gr=m("span",{class:"instructions-step"},"4. In the pop-up window, click Choose File to select your backup key file, then click Import Device Key. ",-1),Xr=["src"],Qr=m("span",{class:"text-weight-medium"},"Done, your device key has been successfully replaced. ",-1),Yr=H({__name:"BackupDeviceTab",setup(t){return(e,n)=>(f(),C(hn,{class:"add-device-instructions"},{default:d(()=>[l(Se,null,{default:d(()=>[j((f(),C(q,{dense:"",class:"q-pa-none"},{default:d(()=>[l($,null,{default:d(()=>[Ur]),_:1})]),_:1})),[[re]]),l(Ke),j((f(),C(q,{dense:"",class:"q-py-md"},{default:d(()=>[l($,{class:"q-pb-none"},{default:d(()=>[Or,m("img",{src:c(xn),alt:"step"},null,8,Hr)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-sm"},{default:d(()=>[l($,null,{default:d(()=>[$r,m("img",{src:c(zr),alt:"step"},null,8,Fr)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-sm"},{default:d(()=>[l($,null,{default:d(()=>[Vr,m("img",{src:c(qr),alt:"step"},null,8,jr)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-sm"},{default:d(()=>[l($,null,{default:d(()=>[Gr,m("img",{src:c(Wr),alt:"step"},null,8,Xr)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-sm"},{default:d(()=>[l($,null,{default:d(()=>[Qr]),_:1})]),_:1})),[[re]])]),_:1})]),_:1}))}}),Zr="/assets/step_2.80ee96fc.png",Jr="/assets/step_3.ab364468.png",el="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAboAAACZCAMAAABuZg+bAAAA1VBMVEX///+ZmZlFWmSPnKLg4ODx8fH/AACRkZFzg4vHztGirbKDg4P/v7//f3//QECjo6Ortbnj5uhSZW75+vqirLGXoqj/EhLc4OL09vbR1tn/Y2P/KCj/r6+dqa3/MDD/9/f/5+fW2t3/19fHzdC7w8f/UFD/SEiKOD7/7+//x8f/l5f/h4f/eHj/ODj/ICDoCw3/39//z8//t7f/p6f/n5//j49oeYH/WFjp7O2kr7OLmJ5cb3f/cHDYExX/CAjg4+XFzM96QEh/jpVcT1e3IyeiLTKvub33Iv49AAAEbElEQVR42uzbbVPaQBiF4ae0SYMNNEAjoCJisWptre+i+K7t//9JRTYGHCAgm8U9cO5xRvziB64h5DCLsFnnDOuTDOlDYsLGRDpGOvhIBxvpYCMdbKSDjXSwkQ420sFGOthIBxvpYCMdbKSDjXSwkQ420sGmrL6+RDqcnFd2fNUB5fTb8YKJlNNnx/c6qJyeHW9TsOIdJmykg410sJEONtLBRjrYSAfb5HRfEhOmkWG6z4nJJ2ZFU9AxeyMdbKSDjXSwkQ420sFGOthIBxvpYONnmLCRDjbSwUY62EgHG+lgIx1spIONdLCRDjbSwZZMx2NFFsdXHWykg410sJEONtLBlhLdri9sTFbS1ddd193P5453hY3MSrojN271R27tUNiQrKTbuXFft36eO9oU9ior6WRza90d7PdKzj8QFmUn3XO7x7kfq4N+N/mVPX9DZl9mugz/q4/TNYtx4J/k8suDgMv5q1O/LkmR7n3pVHX/56/hgL9++jIi0tlAp9rxT1fyNwN+o1YE6eyhU234eyv5mC1hRZDONjrVwVHu/Lc72PpWvCJIZyedanMtN3pFkM5musQV4XZXBOlspuutiP0RK2KHdDbTjV8RpLOZLl4RVyNWxMku6Wymm2BFkM5mOtWBn7AiSGcz3QQrgnQ206kONVaEcTrvW1SQ9TTpgu9R1dtgTug0VoRpunZLepXOdOhqjvR1MU90062IjTWjdHfSX+VMg64s/ZUu5o3uzStizb2+H6VTLBSKmnQVqbajh1VlNzVdSQq16GGhazeXdG9YEXuuOxLPE/E06USWMjGdo+ympBPJfozpKs9280s30Yo47/5xvT0LumozstOnKzSe7eacbsyKWHZVf7bN05W9bMfOS4OuFdx27IJFoEtaETGeWbo7UZX06coStTh0CStC4Zmk8yqi0qcLSgtKl7AiFF76dCqvU1ObTuF1aiwonWrnfBDPFJ1qSZ+u2VS/swtNJ1vugN3TY9FThSKhpyraQxeIBKQTWe2RXT/93b5/zHQqyEAF0llWvTPQI7Io0oFU3xj2fKd4wazIZbp0tfCZLqwtPF3/821kkp+FxVTpaiWnKdJ0SjXSGaRTeanSBSKl7k9AOtN0TSkX07xgNqRbgxfMGdApu7TolF2Dtynm6YplZZfeHeatyC3vMM3StcNvnQKJ7fTpujUa/DTFMN2dxIVp0alIl0inf8AhrMhLXt/1s6V9wEEVtsQhXULa4+BSpDPLlyTuTvdYUa8y6QzSPXTlMlV5qdXWPMzXy6mRziBdtSuXaS9FPUx/hDYMsq/6N+/Hit6Zzqs+8OB6FBgdv3PQi3SkIx3pSDdhpCMd6UhHugkjHelIRzrSTRjpSEc60pFuwkhHuoWJdLCRDjbSwUY62EgHG+lgIx1spIONdLCNofvAQCMdbKSDjXSwkQ420sFGOthIBxvp/rdHByQAAAAAgv6/boeQF2Rdx7qOdR3rOtZ1rOtY17GuY13Huo51Hes61nWs61jXsQIoIffa0tNzZgAAAABJRU5ErkJggg==",tl="/assets/step_5.6d31bfa7.png",nl="/assets/step_6.2834efd1.png",al=m("span",{class:"add-title q-pb-none q-pt-sm"}," For security purposes, you can only access your channels from a single device. If you try to view them from another device, all messages will appear encrypted. ",-1),sl=m("span",{class:"add-title q-pb-md q-pt-sm"}," In order to add a new device, follow these instructions: ",-1),il=m("span",{class:"instructions-step"}," 1. Log in with your new device and select Devices from the menu ",-1),ol=["src"],rl=m("span",{class:"instructions-step"}," 2. Copy your new device key. ",-1),ll=["src"],cl=m("span",{class:"instructions-step"},"3. On your main device, select the channel to which you will add the device",-1),ul=["src"],dl=m("span",{class:"instructions-step"},"4. Pull up the Devices window and click Add Device.",-1),ml=["src"],hl=m("span",{class:"instructions-step"},"5. Enter the previously copied key and click Add.",-1),pl=["src"],gl=m("span",{class:"instructions-step"},"6. Confirm the transaction",-1),fl=["src"],yl=m("span",{class:"text-weight-medium"},"Congratulations, you have added a new device. ",-1),bl=H({__name:"AddDeviceTab",setup(t){return(e,n)=>(f(),C(hn,{class:"add-device-instructions"},{default:d(()=>[l(Se,null,{default:d(()=>[j((f(),C(q,{dense:"",class:"q-pa-none"},{default:d(()=>[l($,null,{default:d(()=>[al,sl]),_:1})]),_:1})),[[re]]),l(Ke),j((f(),C(q,{dense:"",class:"q-py-md"},{default:d(()=>[l($,null,{default:d(()=>[il,m("img",{src:c(xn),alt:"step"},null,8,ol)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-md"},{default:d(()=>[l($,null,{default:d(()=>[rl,m("img",{src:c(Zr),alt:"step"},null,8,ll)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-sm"},{default:d(()=>[l($,null,{default:d(()=>[cl,m("img",{src:c(Jr),alt:"step"},null,8,ul)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"instructions-step"},{default:d(()=>[l($,null,{default:d(()=>[dl,m("img",{src:c(el),alt:"step"},null,8,ml)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-sm"},{default:d(()=>[l($,null,{default:d(()=>[hl,m("img",{src:c(tl),alt:"step"},null,8,pl)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-sm"},{default:d(()=>[l($,null,{default:d(()=>[gl,m("img",{src:c(nl),alt:"step"},null,8,fl)]),_:1})]),_:1})),[[re]]),j((f(),C(q,{dense:"",class:"q-py-sm"},{default:d(()=>[l($,null,{default:d(()=>[yl]),_:1})]),_:1})),[[re]])]),_:1})]),_:1}))}}),vl=m("span",{class:"text-h6"},"Instructions",-1),Al=H({__name:"InstructionsDialog",setup(t){const e=U("add");return(n,s)=>{const i=bl,r=Yr;return f(),C(ye,null,{default:d(()=>[l(se,{square:"",flat:"",class:"instructions-card"},{default:d(()=>[l(V,{class:"row items-center justify-between q-pb-sm"},{default:d(()=>[vl,j(l(z,{size:"10px",flat:"",round:"",dense:"",icon:c(mt)},null,8,["icon"]),[[Le]])]),_:1}),l(V,{class:"q-pt-none"},{default:d(()=>[l(oa,{modelValue:c(e),"onUpdate:modelValue":s[0]||(s[0]=a=>le(e)?e.value=a:null),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:d(()=>[l(Jt,{name:"add",label:"Add Device"}),l(Jt,{name:"backup",label:"backup"})]),_:1},8,["modelValue"]),l(ra,{modelValue:c(e),"onUpdate:modelValue":s[1]||(s[1]=a=>le(e)?e.value=a:null),animated:"",class:"panels-height"},{default:d(()=>[l(i,{name:"add"}),l(r,{name:"backup"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}});const _l=H({props:{text:{type:String,default:""},padding:{type:String,default:"0"}}});const wl=["innerHTML"];function Ml(t,e,n,s,i,r){return f(),C(la,{class:"bg-white text-primary shadow-1 custom-tooltip",style:{"border-radius":"0"},anchor:"top middle",self:"bottom middle"},{default:d(()=>[m("div",{style:et({fontSize:"11px",padding:`${t.padding}`}),innerHTML:t.text},null,12,wl)]),_:1})}const Ne=ue(_l,[["render",Ml]]),Cl="/assets/help-btn.06005d5c.svg",Sl={class:"q-gutter-md row justify-between q-px-sm",style:{width:"100%"}},kl=["src"],Dl=H({__name:"DevicesControl",props:{addLoading:Boolean,isAuthorityDevice:Boolean,devices:Object},emits:["handleExport","handleAddDevice","handleImport"],setup(t,{emit:e}){const n=t,s=U(!1),i=U(!1),r=U(!1),a=async y=>{await e("handleAddDevice",y)};J(()=>n.addLoading,y=>{y||(s.value=!1)});const o=y=>e("handleImport",y),u=()=>i.value=!1,h=()=>{e("handleExport")};return(y,p)=>{const v=Ne,x=Al,D=Pr,L=Lr;return f(),N(Z,null,[m("div",Sl,[l(z,{class:"q-mr-auto q-ml-none device-btn instructions-btn",round:"",flat:"",size:"16px",color:"indigo-14",onClick:p[1]||(p[1]=W=>r.value=!0)},{default:d(()=>[m("img",{src:c(Cl),alt:"help"},null,8,kl),l(v,{text:"Instructions"}),l(x,{modelValue:c(r),"onUpdate:modelValue":p[0]||(p[0]=W=>le(r)?r.value=W:null)},null,8,["modelValue"])]),_:1}),l(z,{class:"control-btn device-btn",square:"",flat:"",disabled:!t.devices.length,onClick:p[2]||(p[2]=W=>s.value=!0)},{default:d(()=>[l(v,{text:"Add new device"}),l(c(pn))]),_:1},8,["disabled"]),l(z,{class:"control-btn device-btn",square:"",flat:"",onClick:p[3]||(p[3]=W=>i.value=!0)},{default:d(()=>[l(v,{text:"Import device key"}),l(c(ca))]),_:1}),l(z,{class:"control-btn device-btn",square:"",flat:"",disabled:!t.isAuthorityDevice&&t.devices.length,onClick:h},{default:d(()=>[l(v,{text:"Export device key"}),l(c(ua))]),_:1},8,["disabled"])]),l(D,{modelValue:c(s),"onUpdate:modelValue":p[4]||(p[4]=W=>le(s)?s.value=W:null),"add-loading":t.addLoading,onHandleAddDevice:a},null,8,["modelValue","add-loading"]),l(L,{modelValue:c(i),"onUpdate:modelValue":p[5]||(p[5]=W=>le(i)?i.value=W:null),"is-import-modal":c(i),onHandleImport:o,onCloseImportModal:u},null,8,["modelValue","is-import-modal"])],64)}}});const xl=ue(Dl,[["__scopeId","data-v-e1ffd1bb"]]),El=t=>(qe("data-v-f16da68a"),t=t(),We(),t),Il=El(()=>m("div",{class:"text-body1 text-blue-grey-8 text-left device"}," Devices ",-1)),Nl={class:"devices-item__key"},Tl=H({__name:"DevicesList",props:{selectDevicekey:Object,deleteLoading:Boolean,devices:Object,authorityDevice:String},emits:["handleSelect","handleDelete"],setup(t,{emit:e}){const n=t,s=a=>e("handleSelect",a),i=a=>e("handleDelete",a),r=a=>a.toBase58()===n.authorityDevice;return(a,o)=>{const u=Ne;return f(),N(Z,null,[Il,l(Se,{bordered:"",separator:"",class:"devices-list"},{default:d(()=>[(f(!0),N(Z,null,de(t.devices,(h,y)=>(f(),C(q,{key:y,"active-class":"bg-blue-grey-8 text-white active",class:Me(["devices-item",{"authority-device":r(h.data.key)}]),clickable:"",active:t.selectDevicekey===h.data.key,onClick:p=>s(h.data.key)},{default:d(()=>[m("span",Nl,[r(h.data.key)?(f(),C(u,{key:0,text:"Authority device"})):ce("",!0),B(" "+O(h.data.key),1)]),l(ht),r(h.data.key)?ce("",!0):(f(),C(da,{key:0,name:c(mt),size:"18px",class:"delete-device-btn",onClick:p=>i(h.data.key)},{default:d(()=>[l(u,{text:"Delete device"})]),_:2},1032,["name","onClick"]))]),_:2},1032,["class","active","onClick"]))),128))]),_:1}),l(je,{showing:t.deleteLoading},null,8,["showing"])],64)}}});const Kl=ue(Tl,[["__scopeId","data-v-f16da68a"]]),Bl=t=>(qe("data-v-fecc3a61"),t=t(),We(),t),Ll=Bl(()=>m("div",{class:"text-body1 text-blue-grey-8 text-left"}," Device Key ",-1)),Rl={class:"text-left q-pb-xs"},Pl=["title"],zl=H({__name:"DevicesDialog",props:{authorityDevice:String},emits:["regenerate","channelAuthorityDevice","loadChannel"],setup(t,{emit:e}){const n=t,s=Ue(),{state:i}=Y(),r=Kr(),a=Br(),o=U(),u=_(()=>{var S;return n.authorityDevice===((S=o.value)==null?void 0:S.toBase58())}),h=()=>{var S,k;return ga(String((k=(S=s.keypair)==null?void 0:S.publicKey)!=null?k:""))},y=_(()=>i.memberDevices),p=_(()=>{var S,k;return ma.xs?tt(String((S=s.keypair)==null?void 0:S.publicKey),12):(k=s.keypair)==null?void 0:k.publicKey}),v=S=>o.value=S,x=S=>{r.submit(S)},D=()=>{s.exportKey()},L=S=>{s.importKey(S),setTimeout(()=>e("loadChannel"),1e3)},W=S=>{a.submit(S)};return(S,k)=>{const K=Ne,I=Kl,A=xl;return f(),C(ye,{"transition-duration":"150","transition-show":"fade","transition-hide":"fade"},{default:d(()=>[l(se,{square:"",flat:"",class:"dialog-wrapper"},{default:d(()=>[l(V,{class:"row items-center q-pb-none q-pr-sm q-pt-sm"},{default:d(()=>[l(ht),j(l(z,{size:"10px",flat:"",round:"",dense:"",icon:c(mt)},null,8,["icon"]),[[Le]])]),_:1}),l(V,{class:"q-py-none"},{default:d(()=>{var w;return[Ll,m("div",Rl,[l(z,{class:"copy-btn",size:"12px",flat:"",round:"",dense:"",icon:c(ha),onClick:h},{default:d(()=>[l(K,{text:"Copy to clipboard"})]),_:1},8,["icon"]),m("span",{class:"text-body2",title:String((w=c(s).keypair)==null?void 0:w.publicKey)},O(c(p)),9,Pl)])]}),_:1}),l(Ke),l(V,null,{default:d(()=>[l(I,{devices:c(y),"authority-device":t.authorityDevice,"select-devicekey":c(o),"delete-loading":c(a).state.loading,onHandleSelect:v,onHandleDelete:W},null,8,["devices","authority-device","select-devicekey","delete-loading"])]),_:1}),l(Ke),l(pa,{align:"right"},{default:d(()=>[l(A,{"add-loading":c(r).state.loading,"is-authority-device":c(u),devices:c(y),onHandleExport:D,onHandleAddDevice:x,onHandleImport:L},null,8,["add-loading","is-authority-device","devices"])]),_:1})]),_:1})]),_:1})}}});const ql=ue(zl,[["__scopeId","data-v-fecc3a61"]]),Be=ze("channel",()=>{const t=pt(),{state:e,client:n}=Y(),s=_(()=>e.channelLoading),i=_(()=>e.sending),r=_(()=>{var A;return!!((A=t.value)!=null&&A.publicKey)}),a=_(()=>!!e.channel&&n.utils.channel.isPublic(e.channel)),o=_(()=>!!e.channel&&n.utils.channel.isPermissionless(e.channel)),u=_(()=>{var A;return((A=e.channelMembership)==null?void 0:A.status)===0}),h=_(()=>{var A;return((A=e.channelMembership)==null?void 0:A.status)===1}),y=_(()=>{var A,w,G;return String((A=e.channel)==null?void 0:A.creator)===String((G=(w=t.value)==null?void 0:w.publicKey)!=null?G:"-")}),p=_(()=>!!e.channelMembership&&n.utils.member.canAddMember(e.channelMembership)),v=_(()=>!!e.channelMembership&&n.utils.member.canAuthorizeMember(e.channelMembership)),x=_(()=>!!e.channelMembership&&n.utils.member.canDeleteMember(e.channelMembership)),D=_(()=>!!e.channelMembership&&n.utils.member.isAdmin(e.channelMembership)),L=_(()=>!!e.channelMembership&&n.utils.member.isOwner(e.channelMembership)),W=_(()=>r.value&&!!e.channel&&!e.loading&&!u.value),S=_(()=>r.value),k=_(()=>L.value),K=_(()=>!e.sending&&(a.value||u.value));return{ownChannels:_(()=>e.allChannels.filter(A=>{var w;return!!e.ownChannels.find(G=>G.pubkey===A.pubkey.toBase58())||A.data.flags===1||A.data.creator.toBase58()===String((w=t.value)==null?void 0:w.publicKey)})),isChannelLoading:s,isSendMessage:i,isPublicChannel:a,isWalletConnected:r,isPermissionlessChannel:o,isAuthorizedMember:u,isPendingMember:h,isChannelCreator:y,isAdmin:D,isOwner:L,canJoinChannel:W,canAddMember:p,canAuthorizeMember:v,canDeleteMember:x,canCreateChannel:S,canDeleteChannel:k,canPostMessage:K}}),En="/assets/star.073c274c.svg",Wl={class:"text-weight-medium row wallet"},Ul={key:0,class:"channel-owner"},Ol=m("img",{src:En},null,-1),Hl={class:"memberlist-info__details"},$l=m("span",null,"Authority:",-1),Fl={class:"memberlist-btns"},Vl=H({__name:"MemberListDialog",props:{membersDialog:{type:Boolean,default:!1},authorizeMemberState:{type:Object},deleteMemberState:{type:Object},wallet:{type:Object}},emits:["submit","deleteMember"],setup(t){const{state:e}=Y(),n=Be(),s=u=>u>0?"pending":"authorized",i=_(()=>n.canAuthorizeMember),r=_(()=>n.isAuthorizedMember),a=_(()=>n.isPermissionlessChannel),o=u=>{var h;return((h=e.channel)==null?void 0:h.creator.toBase58())===u};return(u,h)=>{const y=Ne;return f(),C(ye,{class:"memberlist"},{default:d(()=>[l(se,{square:"",flat:"",horizontal:""},{default:d(()=>[l(V,{class:"q-px-lg"},{default:d(()=>[B(" MEMBERS ")]),_:1}),l(V,{class:"memberlist-card"},{default:d(()=>[l(Se,{separator:""},{default:d(()=>[(f(!0),N(Z,null,de(c(e).channelMembers,p=>(f(),C(q,{key:p.pubkey.toString(),"active-class":"owner",active:`${p.pubkey}`==`${c(e).channelMembershipAddr}`,class:"memberlist-item"},{default:d(()=>[l($,{class:"memberlist-info"},{default:d(()=>[l(Qe,{class:"row justify-between memberlist-info__header"},{default:d(()=>[m("span",Wl,[B(O(c(bn)(p.data))+" ",1),o(p.data.authority.toBase58())?(f(),N("div",Ul,[l(y,{text:"Channel Owner"}),Ol])):ce("",!0)]),l(fa,{class:Me([s(p.data.status),"memberlist-status q-pa-xs q-ml-lg"])},{default:d(()=>[B(O(s(p.data.status)),1)]),_:2},1032,["class"])]),_:2},1024),l(Qe,{caption:"",lines:"2"},{default:d(()=>[m("div",Hl,[$l,m("span",null,O(p.data.authority),1)])]),_:2},1024)]),_:2},1024),m("div",Fl,[s(p.data.status)==="pending"&&(c(i)||c(r)&&c(a))?(f(),C(z,{key:0,color:"positive",size:"sm",unelevated:"",class:"full-width",loading:t.authorizeMemberState.loading,disabled:t.authorizeMemberState.loading,onClick:v=>u.$emit("submit",p.data.authority)},{default:d(()=>[B(" Authorize ")]),_:2},1032,["loading","disabled","onClick"])):ce("",!0),c(n).canDeleteMember?(f(),C(z,{key:1,color:"negative",size:"sm",unelevated:"",class:"full-width",loading:t.deleteMemberState.loading,disabled:t.deleteMemberState.loading||o(p.data.authority.toBase58()),onClick:v=>u.$emit("deleteMember",p.data.authority)},{default:d(()=>[B(" Remove ")]),_:2},1032,["loading","disabled","onClick"])):ce("",!0)])]),_:2},1032,["active"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}}),jl=m("br",null,null,-1),Gl=H({__name:"JoinChennalModal",emits:["join"],setup(t){const e=U("");return(n,s)=>(f(),C(ye,null,{default:d(()=>[l(se,{square:"",flat:""},{default:d(()=>[l(V,{class:"text-body1"},{default:d(()=>[B(" Join Channel ")]),_:1}),l(V,{class:"text-body1 text-blue-grey-8"},{default:d(()=>[l(Je,{class:"join-channel-form",onSubmit:s[1]||(s[1]=Gt(i=>n.$emit("join",c(e)),["prevent"]))},{default:d(()=>[l(be,{modelValue:c(e),"onUpdate:modelValue":s[0]||(s[0]=i=>le(e)?e.value=i:null),label:"Member name *","lazy-rules":"",rules:[i=>i&&i.length>2||"Your name"]},null,8,["modelValue","rules"]),jl,l(z,{type:"submit",class:"dialog-submit-btn","text-color":"black",ripple:!1,square:""},{default:d(()=>[B(" Join Channel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const Xl=t=>(qe("data-v-9ea1b601"),t=t(),We(),t),Ql=Xl(()=>m("span",{class:"text-blue-grey-8 q-pb-xs"},"Search by name or address",-1)),Yl={class:"search-block"},Zl={class:"channel-info text-weight-medium"},Jl={class:"channel-info mobile-text-short"},ec={key:0,class:"already-in-chat"},tc={class:"control-btns"},nc=H({__name:"JoinChannelDialog",props:{loading:{type:Boolean}},emits:["submit","reset"],setup(t,{emit:e}){const n=t,{state:s,selectChannel:i,refreshList:r}=Y(),a=Be(),o=U(!1),u=U(""),h=U([]),y=_(()=>s.allChannels.filter(S=>S.data.flags===0||S.data.flags===2)),p=_(()=>s.loading),v=S=>S.name.slice(0,2),x=()=>{if(u.value===""){h.value=[],u.value="";return}h.value=y.value.filter(S=>S.data.name.toLocaleLowerCase().includes(u.value.toLocaleLowerCase())||S.pubkey.toBase58().toLocaleLowerCase().includes(u.value.toLocaleLowerCase()))},D=_(()=>{var S;return((S=u.value)==null?void 0:S.length)>0?h.value:y.value}),L=S=>{e("submit",S)};J(u,()=>{x()}),J(()=>n.loading,S=>{S&&(o.value=!1)});const W=S=>a.ownChannels.find(k=>String(k.pubkey)===String(S.pubkey));return(S,k)=>{const K=Ne,I=Gl;return f(),C(ye,{class:"join-channel-dialog",onHide:k[3]||(k[3]=A=>S.$emit("reset"))},{default:d(()=>[l(se,{square:"",flat:""},{default:d(()=>[l(V,{class:"text-body1 text-blue-grey-8"},{default:d(()=>[B(" Join channel ")]),_:1}),l(V,{class:"q-py-none"},{default:d(()=>[Ql,m("div",Yl,[l(be,{modelValue:c(u),"onUpdate:modelValue":k[0]||(k[0]=A=>le(u)?u.value=A:null),class:"input no-margin q-pa-none",placeholder:"Search ...",borderless:"",dense:"",debounce:"300"},null,8,["modelValue"])])]),_:1}),l(V,null,{default:d(()=>[c(D).length?(f(),C(Se,{key:0,bordered:"",separator:"",class:"privat-channels"},{default:d(()=>[(f(!0),N(Z,null,de(c(D),A=>j((f(),C(q,{key:A.data.name,"active-class":"bg-blue-grey-8 text-white",class:"privat-channels-item",active:`${c(s).channelAddr}`==`${A.pubkey}`,clickable:"",onClick:w=>c(i)(A.pubkey)},{default:d(()=>[m("div",{class:"chat-avatar",style:et(c(vn)(`${A.pubkey}`))},[m("span",null,O(v(A.data)),1)],4),l($,{class:"channel-wrapper"},{default:d(()=>[m("span",Zl,O(A.data.name),1),m("span",Jl,O(A.pubkey),1)]),_:2},1024),W(A)?(f(),N("div",ec,[l(K,{text:"already in channel"}),l(c(un),{size:"18"})])):ce("",!0)]),_:2},1032,["active","onClick"])),[[re]])),128))]),_:1})):(f(),C(q,{key:1,class:"privat-channels justify-center items-center text-blue-grey-5"},{default:d(()=>[B(" Channels not found ")]),_:1}))]),_:1}),m("div",tc,[l(z,{class:Me(["control-button",{"refresh-btn":c(p)}]),square:"",flat:"",onClick:c(r)},{default:d(()=>[l(c(gn),{style:{color:"#fff"}}),l(K,{text:"Refresh channels"})]),_:1},8,["class","onClick"]),l(z,{class:"control-button",square:"",flat:"",disable:!c(s).channelAddr,onClick:k[1]||(k[1]=A=>o.value=!0)},{default:d(()=>[l(c(ya),{style:{color:"#fff"}}),l(K,{text:"Request to join"})]),_:1},8,["disable"]),l(I,{modelValue:c(o),"onUpdate:modelValue":k[2]||(k[2]=A=>le(o)?o.value=A:null),onJoin:L},null,8,["modelValue"])]),l(je,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})}}});const ac=ue(nc,[["__scopeId","data-v-9ea1b601"]]),sc=t=>(qe("data-v-0a2e7c72"),t=t(),We(),t),ic=sc(()=>m("br",null,null,-1)),oc=H({__name:"AddMemberDialog",props:{loading:{type:Boolean,default:!1},defaultState:{type:Object,required:!0}},emits:["submit","reset"],setup(t,{emit:e}){const s=Xt(t,"defaultState"),i=()=>e("submit",s.value);return(r,a)=>(f(),C(ye,{class:"add-member-dialog",onHide:a[3]||(a[3]=o=>r.$emit("reset"))},{default:d(()=>[l(se,{square:"",flat:""},{default:d(()=>[l(V,null,{default:d(()=>[l(Je,{class:"add-member-form",onSubmit:Gt(i,["prevent"])},{default:d(()=>[l(be,{modelValue:c(s).name,"onUpdate:modelValue":a[0]||(a[0]=o=>c(s).name=o),label:"Member name *",hint:"Min length 3 chars","lazy-rules":"",rules:[o=>o&&o.length>2||"Please type something"]},null,8,["modelValue","rules"]),l(be,{modelValue:c(s).wallet,"onUpdate:modelValue":a[1]||(a[1]=o=>c(s).wallet=o),label:"Member Wallet *","lazy-rules":"",rules:[o=>o&&o.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),l(be,{modelValue:c(s).key,"onUpdate:modelValue":a[2]||(a[2]=o=>c(s).key=o),label:"Member Device Key",hint:"Default: The same as member wallet","lazy-rules":"",rules:[o=>!o||o.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),ic,l(z,{type:"submit",class:"dialog-submit-btn","text-color":"black",ripple:!1,square:"",flat:""},{default:d(()=>[B(" Add Member ")]),_:1})]),_:1},8,["onSubmit"]),l(je,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1}))}});const rc=ue(oc,[["__scopeId","data-v-0a2e7c72"]]),Dt="/assets/info.bfade5eb.svg",lc={class:"toggle-info max-messages-tooltip"},cc=m("img",{src:Dt,alt:"info"},null,-1),uc={class:"relative-position"},dc={class:"messages-cost"},mc={class:"toggle-info max-messages-tooltip"},hc=m("img",{src:Dt,alt:"info"},null,-1),pc={class:"row q-mt-md relative-position",style:{height:"42px"}},gc={class:"toggle-info"},fc=m("img",{src:Dt,alt:"info"},null,-1),yc={key:0,class:"row text-primary toggle-approve"},bc={class:"toggle-info"},vc=m("img",{src:Dt,alt:"info"},null,-1),Ac=H({__name:"NewChannelDialog",props:{loading:{type:Boolean,default:!1},defaultState:{type:Object,required:!0}},emits:["submit","reset"],setup(t,{emit:e}){const n=t,{noSol:s}=ve(),{channelMessagesCost:i}=Y(),r=Ue(),a=Xt(n,"defaultState"),o=U(0),u=async()=>{if(await o.value>r.balance){s();return}e("submit",a)},h=_(()=>o.value!=="extra"?`~${Number(o.value).toFixed(5)} SOL`:"Limit exceeded");J(()=>{var p;return(p=a.value)==null?void 0:p.maxMessages},async p=>{const v=await i(Number(p));o.value=v});const y=p=>p===""?!0:p!==""&&p.length<=25;return fn(async()=>{const p=Sn;o.value=await i(Number(p))}),(p,v)=>{const x=Ne;return f(),C(ye,{class:"new-channel-dialog",onHide:v[5]||(v[5]=D=>p.$emit("reset"))},{default:d(()=>[l(se,{square:"",flat:""},{default:d(()=>[l(V,null,{default:d(()=>[l(Je,{class:"messenger-new-channel-form",onSubmit:u},{default:d(()=>[l(be,{modelValue:c(a).name,"onUpdate:modelValue":v[0]||(v[0]=D=>c(a).name=D),label:"Channel name *","lazy-rules":"",maxlength:c(tn),rules:[D=>D&&D.length>2||"Please type something",D=>D&&D.length<=25||"Please use maximum 25 characters"]},null,8,["modelValue","maxlength","rules"]),l(be,{modelValue:c(a).memberName,"onUpdate:modelValue":v[1]||(v[1]=D=>c(a).memberName=D),label:"Member name","lazy-rules":"",maxlength:c(tn),rules:[D=>y(D)||"Please use maximum 25 characters"]},{default:d(()=>[m("div",lc,[l(x,{text:c(st)[3],padding:"8px"},null,8,["text"]),cc])]),_:1},8,["modelValue","maxlength","rules"]),m("div",uc,[l(be,{modelValue:c(a).maxMessages,"onUpdate:modelValue":v[2]||(v[2]=D=>c(a).maxMessages=D),label:"Max messages","lazy-rules":"",type:"number",debounce:"200",rules:[D=>+D>0||"Invalid value",D=>+D<c(qt)+1||`Max messages ${c(qt)}`]},null,8,["modelValue","rules"]),m("div",dc,O(c(h)),1),m("div",mc,[l(x,{text:c(st)[2],padding:"8px"},null,8,["text"]),hc])]),m("div",pc,[m("div",gc,[l(x,{text:c(st)[0],padding:"8px"},null,8,["text"]),fc]),m("div",{class:Me(["col text-primary",{"toggle-border":!c(a).public}])},[B(" Private"),l(en,{modelValue:c(a).public,"onUpdate:modelValue":v[3]||(v[3]=D=>c(a).public=D),label:"Public"},null,8,["modelValue"])],2),c(a).public?ce("",!0):(f(),N("div",yc,[l(en,{modelValue:c(a).permissionless,"onUpdate:modelValue":v[4]||(v[4]=D=>c(a).permissionless=D)},null,8,["modelValue"]),m("span",null,[m("div",bc,[l(x,{text:c(st)[1],padding:"8px"},null,8,["text"]),vc]),B(" Members can approve")])]))]),l(z,{type:"submit",class:"dialog-submit-btn q-mt-md","text-color":"black",ripple:!1,square:"",flat:""},{default:d(()=>[B(" Create Channel ")]),_:1})]),_:1}),l(je,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1})}}});const _c=H({__name:"ChannelForm",props:{message:{type:Object,required:!0},disabled:{type:Boolean,default:!1},sending:{type:Boolean,default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,s=Xt(n,"message"),{notify:i}=De(),r=()=>{e("submit"),s.value.message=""};let a,o=59;const u=()=>{clearInterval(a)},h=()=>{const y=i({group:!1,timeout:0,classes:"expires-notofocation",message:"Transaction expires",type:"warning",caption:"9"}),p=setInterval(()=>{y({caption:`${o}`}),(o===0||o>10)&&(y({timeout:100,caption:"--"}),clearInterval(p))},1e3)};return J(()=>n.sending,y=>{y?a=setInterval(()=>{if(o===0){u(),i({timeout:3e3,message:"Transaction expires",type:"negative"}),o=59;return}o===10&&h(),o--},1e3):(u(),o=59)}),(y,p)=>(f(),C(Je,{class:"channel-form",onSubmit:Gt(r,["prevent"])},{default:d(()=>[l(ba,{class:"row message-control"},{default:d(()=>[l(be,{ref:"inputFocus",modelValue:c(s).message,"onUpdate:modelValue":p[0]||(p[0]=v=>c(s).message=v),class:"col-grow message-input",placeholder:"Type a message",maxlength:"201",dense:"",borderless:"",autofocus:"",disable:t.disabled,rules:[v=>v.length<=200||"Please use maximum 200 characters"]},null,8,["modelValue","disable","rules"]),l(z,{class:"send-btn",square:"",flat:"",type:"submit",disable:t.disabled||!c(s).message.length,loading:t.sending},{default:d(()=>[B(" Send ")]),_:1},8,["disable","loading"])]),_:1})]),_:1},8,["onSubmit"]))}});const wc=ue(_c,[["__scopeId","data-v-598f1565"]]),Mc={class:"message-wrapper"},Cc={key:0,class:"message-actions"},Sc=["innerHTML"],kc=H({__name:"ChannelMessage",props:{text:String,sender:Boolean},emits:["handleEdit","handleDelete"],setup(t,{emit:e}){const n=r=>e("handleEdit",r),s=r=>e("handleDelete",r),i=U(null);return(r,a)=>(f(),N("div",Mc,[t.sender?ce("",!0):(f(),N("div",Cc,[l(c(va),{width:"12",height:"12",onClick:a[0]||(a[0]=o=>n({messageId:c(i).lastChild.dataset.id,text:c(i).lastChild.innerHTML}))}),l(c(Aa),{width:"12",height:"12",onClick:a[1]||(a[1]=o=>s(c(i).lastChild.dataset.id))})])),m("div",{ref_key:"message",ref:i,innerHTML:t.text},null,8,Sc)]))}}),Dc="/assets/solana-logo.3caace62.svg",xc={class:"messenger-content"},Ec={key:0,class:"preloader"},Ic={key:1,class:"messenger-empty"},Nc={key:2,class:"messenger-empty"},Tc=m("img",{src:Dc,alt:"logo"},null,-1),Kc=m("span",{name:"connect"},"Please connect a wallet",-1),Bc=[Tc,Kc],Lc={key:3,class:"messenger-empty"},Rc=m("span",{name:"select"},"Please select a channel",-1),Pc=[Rc],zc=H({__name:"ChannelWrapper",props:{postMessageState:{type:Object,required:!0}},emits:["sendMessage","deleteMessage"],setup(t,{emit:e}){const n=t,s=xe(),{state:i}=Y(),r=Be();function a(k){const K=s.publicKey.value;return K?String(K)!==String(k):!0}const o=_(()=>[...new Map(i.channelMessages.map(k=>[k.id=Number(k.id.toString()),k])).values()]),u=_(()=>{const k=[];let K=0,I;for(const A of o.value)if(I&&`${A.sender}`==`${I}`)k[K-1].text.push(`<div data-id='${A.id}'>${A.content}</div>`);else{I=A.sender;const w=i.channelMembers.find(G=>G.data.authority.toBase58()===I.toBase58());k.push({id:A.id,sender:A.sender,senderDisplayName:(w==null?void 0:w.data.name)!==""&&!r.isPublicChannel?w==null?void 0:w.data.name:A.senderDisplayName,text:[`<div data-id='${A.id}'>${A.content}</div>`],date:A.createdAt}),K++}return k}),h=_(()=>r.canPostMessage),y=k=>e("sendMessage",k),p=k=>{n.postMessageState.message=k.text,n.postMessageState.edit=!0,n.postMessageState.messageId=k.messageId},v=k=>{e("deleteMessage",k)},x=U(),D=U();J(D,k=>{k&&(x.value.scrollTop=k.scrollHeight)});const L=U(!1),W=Ma(()=>{L.value=!1},2e3),S=(k,K,I)=>{if(K){L.value=!1;return}if(I){L.value=!0,W();return}L.value=!0,W()};return(k,K)=>{const I=kc,A=wc;return f(),C(se,{class:Me(["messenger-card",{"show-scroll":c(L)}]),square:"",flat:""},{default:d(()=>[m("div",xc,[c(r).isChannelLoading?(f(),N("div",Ec,[l(_a,{color:"primary",size:"2em"})])):c(i).channel?(f(),N("div",{key:1,ref_key:"chat",ref:x,class:"row justify-center channel-wrapper",onMouseenter:S,onMouseleave:K[0]||(K[0]=w=>S(w,!0)),onScroll:K[1]||(K[1]=w=>S(w,!1,!0))},[c(u).length>0?(f(),N("div",{key:0,ref_key:"mes",ref:D,class:"messenger-messages"},[(f(!0),N(Z,null,de(c(u),w=>(f(),C(wa,{key:Number(w.id),"text-html":"",name:w.senderDisplayName,sent:a(w.sender),class:Me(a(w.sender)?"others":"sender")},{default:d(()=>[(f(!0),N(Z,null,de(w.text,(G,he)=>(f(),N("div",{key:he,class:"message"},[l(I,{text:G,sender:!!a(w.sender),onHandleEdit:p,onHandleDelete:v},null,8,["text","sender"])]))),128))]),_:2},1032,["name","sent","class"]))),128))],512)):(f(),N("div",Ic," No messages "))],544)):c(r).isWalletConnected?(f(),N("div",Lc,Pc)):(f(),N("div",Nc,Bc))]),l(A,{message:t.postMessageState,sending:c(r).isSendMessage,disabled:!c(h),onSubmit:y},null,8,["message","sending","disabled"])]),_:1},8,["class"])}}});const qc=`<svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M13 25C19.6274 25 25 19.6274 25 13C25 6.37258 19.6274 1 13 1C6.37258 1 1 6.37258 1 13C1 19.6274 6.37258 25 13 25Z" stroke="#516670" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M12.0227 15.5795V15.4318C12.0265 14.7462 12.0909 14.2008 12.2159 13.7955C12.3447 13.3902 12.5265 13.0644 12.7614 12.8182C12.9962 12.5682 13.2822 12.339 13.6193 12.1307C13.8504 11.9867 14.0568 11.8295 14.2386 11.6591C14.4242 11.4848 14.5701 11.2917 14.6761 11.0795C14.7822 10.8636 14.8352 10.6231 14.8352 10.358C14.8352 10.0587 14.7652 9.79924 14.625 9.57955C14.4848 9.35985 14.2955 9.18939 14.0568 9.06818C13.822 8.94697 13.5587 8.88636 13.267 8.88636C12.9981 8.88636 12.7424 8.94508 12.5 9.0625C12.2614 9.17614 12.0625 9.35038 11.9034 9.58523C11.7481 9.81629 11.661 10.1098 11.642 10.4659H9.61932C9.63826 9.74621 9.8125 9.14394 10.142 8.65909C10.4754 8.17424 10.9148 7.81061 11.4602 7.56818C12.0095 7.32576 12.6155 7.20455 13.2784 7.20455C14.0019 7.20455 14.6383 7.33144 15.1875 7.58523C15.7405 7.83902 16.1705 8.20076 16.4773 8.67045C16.7879 9.13636 16.9432 9.68939 16.9432 10.3295C16.9432 10.7614 16.8731 11.1477 16.733 11.4886C16.5966 11.8295 16.4015 12.1326 16.1477 12.3977C15.8939 12.6629 15.5928 12.8996 15.2443 13.108C14.9375 13.2973 14.6856 13.4943 14.4886 13.6989C14.2955 13.9034 14.1515 14.1439 14.0568 14.4205C13.9659 14.6932 13.9186 15.0303 13.9148 15.4318V15.5795H12.0227ZM13.0114 19.125C12.6705 19.125 12.3769 19.0038 12.1307 18.7614C11.8845 18.5189 11.7614 18.2235 11.7614 17.875C11.7614 17.5341 11.8845 17.2424 12.1307 17C12.3769 16.7576 12.6705 16.6364 13.0114 16.6364C13.3485 16.6364 13.6402 16.7576 13.8864 17C14.1364 17.2424 14.2614 17.5341 14.2614 17.875C14.2614 18.1061 14.2027 18.3163 14.0852 18.5057C13.9716 18.6951 13.8201 18.8466 13.6307 18.9602C13.4451 19.0701 13.2386 19.125 13.0114 19.125Z" fill="#516670"/>
</svg>
`,Wc=["href"],Uc=["innerHTML"],Oc=H({__name:"ChannelControl",props:{isLoading:{type:Boolean}},emits:["createChannel","joinChannel","refreshList"],setup(t,{emit:e}){const n=Be(),{notify:s}=De(),i=r=>{if(!n.isWalletConnected){s({message:"Please connect wallet",color:"negative",position:"bottom"});return}e(r)};return(r,a)=>{const o=Ne;return f(),C(q,{class:"channel-control-wrapper q-pa-none"},{default:d(()=>[l($,{class:"button-wrapper"},{default:d(()=>[m("a",{class:"control-button documentation-link",href:c(kr),target:"_blank"},[m("i",{class:"help-icon",innerHTML:c(qc)},null,8,Uc),l(o,{text:"Documentation"})],8,Wc),l(z,{class:Me(["control-button",{"refresh-btn":t.isLoading}]),square:"",flat:"",onClick:a[0]||(a[0]=u=>i("refreshList"))},{default:d(()=>[l(c(gn),{style:{color:"#fff"}}),l(o,{text:"Refresh channels"})]),_:1},8,["class"]),l(z,{class:"control-button",square:"",flat:"",onClick:a[1]||(a[1]=u=>i("createChannel"))},{default:d(()=>[l(c(pn),{style:{color:"#fff"}}),l(o,{text:"Create a channel"})]),_:1}),l(z,{class:"control-button",square:"",flat:"",onClick:a[2]||(a[2]=u=>i("joinChannel"))},{default:d(()=>[l(c(Ca),{style:{color:"#fff"}}),l(o,{text:"Browse channels"})]),_:1})]),_:1})]),_:1})}}});const Hc=ue(Oc,[["__scopeId","data-v-f4ca6b7f"]]),$c=t=>(qe("data-v-e4dca9fa"),t=t(),We(),t),Fc={class:"chat-name"},Vc={key:0,class:"message-owner row"},jc=$c(()=>m("img",{src:En},null,-1)),Gc={key:1,class:"message-public"},Xc={key:2,class:"pending-icon"},Qc=H({__name:"MessengerChannel",props:{pubkey:{type:Object,required:!0},channel:{type:Object,required:!0},isActive:Boolean},emits:["select"],setup(t){const e=t,{state:n}=Y(),s=xe(),i=_(()=>{var y;return(y=n.ownChannels.find(p=>p.pubkey===e.pubkey.toBase58()))==null?void 0:y.status}),r=_(()=>i.value===1),a=_(()=>e.channel.name.slice(0,2)),o=_(()=>e.channel.flags===1),u=_(()=>{var y,p;return(p=(y=s.publicKey.value)==null?void 0:y.toBase58())!=null?p:""}),h=_(()=>e.channel.creator.toBase58()===u.value);return(y,p)=>{const v=Ne;return f(),C(q,{"active-class":"bg-blue-grey-8 text-white",style:{"min-height":"60px"},active:t.isActive},{default:d(()=>[l($,{class:"chat-item cursor-pointer",onClick:p[0]||(p[0]=x=>y.$emit("select"))},{default:d(()=>[m("div",{class:"chat-badge",style:et(c(vn)(`${t.pubkey}`))},[m("span",null,O(c(a)),1)],4),m("div",Fc,O(t.channel.name),1),c(h)?(f(),N("div",Vc,[l(v,{text:"Channel Owner"}),jc])):ce("",!0),c(o)?(f(),N("div",Gc,[l(v,{text:"Public Channel"}),B(" P ")])):ce("",!0),c(r)?(f(),N("div",Xc,[l(v,{text:"Waiting for confirmation"}),l(Sa,{color:"primary",size:"16px"})])):ce("",!0)]),_:1})]),_:1},8,["active"])}}});const Yc=ue(Qc,[["__scopeId","data-v-e4dca9fa"]]),Zc=m("div",{class:"text-h5"}," Channels ",-1),Jc={class:"text-weight-medium"},eu={class:"memberlist-info__details"},tu=m("span",null,"Authority:",-1),nu={class:"memberlist-info__details"},au=m("span",null,"Key:",-1),su=H({__name:"PendingUsersDialog",props:{pendingChannels:Object},setup(t){const{state:e}=Y(),n=kn(),s=Dn(),i=async(u,h)=>{e.channelAddr=h,await n.submit(u)},r=async(u,h)=>{e.channelAddr=h,await s.submit(u)},a=_(()=>n.state.loading),o=_(()=>s.state.loading);return(u,h)=>(f(),C(ye,null,{default:d(()=>[l(se,{class:"pending-channels",square:"",flat:"",horizontal:""},{default:d(()=>[l(V,null,{default:d(()=>[Zc]),_:1}),l(V,null,{default:d(()=>[l(Se,{bordered:""},{default:d(()=>[(f(!0),N(Z,null,de(t.pendingChannels,(y,p)=>(f(),C(ka,{key:y.name,"expand-separator":"",label:y.channel.data.name,caption:"channel","default-opened":p===0,"header-class":"owner"},{default:d(()=>[l(Se,{separator:""},{default:d(()=>[(f(!0),N(Z,null,de(y.pendingMembers,v=>(f(),C(q,{key:v,class:"row justify-between pending-item"},{default:d(()=>[l($,{class:"memberlist-info"},{default:d(()=>[l(Qe,{class:"row justify-between"},{default:d(()=>[m("span",Jc,O(c(bn)(v.data)),1)]),_:2},1024),l(Qe,{caption:"",lines:"2"},{default:d(()=>[m("div",eu,[tu,m("span",null,O(v.data.authority),1)]),m("div",nu,[au,m("span",null,O(v.data.key),1)])]),_:2},1024)]),_:2},1024),l($,{side:"",class:"memberlist-btns"},{default:d(()=>[l(z,{color:"teal",size:"xs",unelevated:"",class:"full-width",loading:c(a),disabled:c(a),onClick:x=>i(v.data.authority,y.channel.pubkey)},{default:d(()=>[B(" Authorize ")]),_:2},1032,["loading","disabled","onClick"]),l(z,{color:"negative",size:"xs",unelevated:"",class:"full-width",loading:c(o),disabled:c(o),onClick:x=>r(v.data.authority,y.channel.pubkey)},{default:d(()=>[B(" Remove ")]),_:2},1032,["loading","disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label","default-opened"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}});const iu={class:"bell",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",fill:"none","xmlns:v":"https://vecta.io/nano"},ou=["fill"],ru=H({__name:"iconBell",props:{color:{type:String,default:"AABEC8"}},setup(t){return(e,n)=>(f(),N("svg",iu,[m("path",{d:"M5.352 14.359h3.294c0 .821-.59 1.641-1.647 1.641s-1.647-.82-1.647-1.641zm8.434-3.467l-.911-1.515a3.68 3.68 0 0 1-.527-1.897V5.325C12.348 2.389 9.949 0 7 0S1.651 2.389 1.651 5.325v2.155a3.68 3.68 0 0 1-.527 1.897l-.911 1.515c-.278.461-.285 1.018-.018 1.487s.749.749 1.29.749h11.03a1.47 1.47 0 0 0 1.291-.749 1.46 1.46 0 0 0-.021-1.487z",fill:`#${t.color}`},null,8,ou)]))}}),In=ze("notifications",()=>{const t=pt(),{loadMembers:e,state:n}=Y(),s=Be(),i=me({showInfo:!1,showDialog:!1,pendingChannels:[]});J([()=>s.ownChannels,()=>n.channelMembers],async(a,o)=>{o.length>0&&await r(o[0])});async function r(a){try{const o=await Promise.all(a.map(async u=>{var p;const{pubkey:h,data:y}=u;if(y.creator.toBase58()===((p=t.value)==null?void 0:p.publicKey.toBase58())){const v=await e(h);if(v.length===0)return;const x=v.filter(D=>D.data.status===1);return x.length?{channel:u,pendingMembers:x}:void 0}}));i.pendingChannels=o.filter(u=>u),i.pendingChannels.length>0?(setTimeout(()=>i.showInfo=!0,2e3),setTimeout(()=>i.showInfo=!1,7e3)):i.showDialog=!1}catch(o){console.log(o)}}return{state:i}});function lu(){const{state:t}=In();return{showDialog:_(()=>t.showDialog),showInfo:_(()=>t.showInfo),pendingChannels:_(()=>t.pendingChannels)}}const cu={class:"panel-notifications__info"},uu=H({__name:"MessengerNotification",setup(t){const{pendingChannels:e,showInfo:n}=lu(),{state:s}=In(),i=_(()=>{var u,h;return(h=(u=e.value)==null?void 0:u.length)!=null?h:0}),r=_(()=>i.value>0),a=_(()=>n.value?"width: 100%; padding-right: 14px":"width: 0; padding-right: 0;"),o=()=>{!r.value||(s.showDialog=!s.showDialog)};return(u,h)=>{const y=ru,p=su;return f(),N("div",{class:Me(["panel-notifications",{"has-notifications":c(r)}]),onClick:o},[m("div",cu,[l(y,{class:"ring",color:c(r)?"FF5C5C":"AABEC8"},null,8,["color"]),m("span",null,O(i.value),1)]),m("div",{ref:"notificationsInfo",class:"panel-notifications__details",style:et(c(a))}," channel(s) with pending user authorization ",4),l(p,{modelValue:c(s).showDialog,"onUpdate:modelValue":h[0]||(h[0]=v=>c(s).showDialog=v),"pending-channels":c(e)},null,8,["modelValue","pending-channels"])],2)}}});const Nn=ze("mobile",()=>{const{screen:t}=De(),e=me({searchOrInfo:"search"}),n=_(()=>t.xs);return J(n,s=>{s&&(e.searchOrInfo="search")}),{state:e,isMobile:n}}),du={class:"panel-search"},mu={class:"search-wrapper"},hu={class:"panel-info"},pu={class:"chat-info"},gu={class:"chat-members"},fu={class:"chat-messages"},yu=["title"],bu={key:0,class:"members-count bg-cyan-9"},vu=H({__name:"MessengerToolbar",emits:["search","showMembers","deleteChannel","addMember","showDeviceKey","leaveChannel"],setup(t,{emit:e}){const n=xe(),{state:s}=Y(),i=Be(),r=Nn(),a=yn(),{screen:o,notify:u}=De(),h=_(()=>!!n.publicKey.value),y=U(""),p=_(()=>s.channel),v=_(()=>{var A,w,G;if(((A=p.value)==null?void 0:A.memberCount)===null||((w=p.value)==null?void 0:w.memberCount)===void 0)return"";if(i.isPublicChannel){const he=s.channelMessages.map(ke=>ke.sender.toBase58());return`${[...new Set(he)].length}\xA0members`}return`${(G=p.value)==null?void 0:G.memberCount}\xA0members`}),x=_(()=>{var A,w;return((A=p.value)==null?void 0:A.messageCount)===null||((w=p.value)==null?void 0:w.messageCount)===void 0?"":`${s.channelMessages.length}\xA0messages`}),D=A=>e("search",A),L=()=>e("showMembers"),W=()=>e("addMember"),S=_(()=>{if(!(!i.isOwner||!i.isAdmin))return s.channelMembers.filter(A=>A.data.status===1).length}),k=_(()=>a.state.mode==="FullScreen");J(y,A=>{D(String(A))});const K=_(()=>r.isMobile&&r.state.searchOrInfo==="info"),I=()=>{if(!i.isWalletConnected)return u({type:"negative",position:"bottom",message:"Please connect your wallet"});a.state.mode=ut[0]};return J(()=>s.channelAddr,A=>{A&&r.isMobile&&(r.state.searchOrInfo="info")}),(A,w)=>{var pe,ke;const G=uu,he=Ne;return f(),N("div",{class:Me(["panel-toolbar",c(r).state.searchOrInfo])},[l(G),c(K)?(f(),C(c(Da),{key:0,class:"back-arrow",onClick:w[0]||(w[0]=Ae=>c(r).state.searchOrInfo="search")})):ce("",!0),m("div",du,[m("div",mu,[l(be,{modelValue:c(y),"onUpdate:modelValue":w[1]||(w[1]=Ae=>le(y)?y.value=Ae:null),class:"search-input no-margin q-pa-none",placeholder:"Search ...",clearable:"",debounce:"300",borderless:"",disable:!c(i).isWalletConnected,onClear:w[2]||(w[2]=Ae=>y.value="")},null,8,["modelValue","disable"])]),c(k)?(f(),N("div",{key:1,class:"size-icon",onClick:w[3]||(w[3]=Ae=>c(a).state.mode=c(ut)[1])},[l(he,{text:"Compact"}),l(c(Ea))])):(f(),N("div",{key:0,class:"size-icon",onClick:I},[l(he,{text:"Full"}),l(c(xa))]))]),m("div",hu,[m("div",pu,[m("div",gu,O(c(v)),1),m("div",fu,O(c(x)),1)]),l(ht,{class:""}),m("div",{class:"chat-name",title:(pe=c(p))==null?void 0:pe.name},O((ke=c(p))==null?void 0:ke.name),9,yu),m("div",null,[l(z,{class:"chat-menu",flat:"",square:"",disabled:!c(h)},{default:d(()=>[l(c(Ia),{size:"18"}),l(Na,{anchor:"bottom middle",self:"top middle"},{default:d(()=>[l(Se,{style:{"min-width":"120px"},bordered:""},{default:d(()=>[j((f(),C(q,{class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",onClick:w[4]||(w[4]=Ae=>A.$emit("showDeviceKey"))},{default:d(()=>[l($,{class:"q-pa-none"},{default:d(()=>[l(z,{flat:"",square:"",size:"sm",class:"bg-blue-grey-7 text-white q-px-xs"},{default:d(()=>[B(" Devices ")]),_:1})]),_:1})]),_:1})),[[Le]]),j((f(),C(q,{class:"q-my-sm q-mx-sm q-pa-none chat-menu__item relative-position",clickable:"",disable:!c(p),onClick:L},{default:d(()=>[l($,null,{default:d(()=>[c(S)>0?(f(),N("div",bu,O(c(S)),1)):ce("",!0),l(z,{flat:"",square:"",size:"sm",class:"bg-cyan-9 text-white q-px-xs"},{default:d(()=>[B(" Members ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Le]]),c(i).isOwner&&!c(i).isPublicChannel?j((f(),C(q,{key:0,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!c(i).canAddMember,onClick:W},{default:d(()=>[l($,null,{default:d(()=>[l(z,{flat:"",square:"",size:"sm",class:"bg-amber-7 text-white q-px-xs"},{default:d(()=>[B(" Add member ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Le]]):ce("",!0),c(i).isOwner?j((f(),C(q,{key:1,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!c(i).isChannelCreator,onClick:w[5]||(w[5]=Ae=>A.$emit("deleteChannel"))},{default:d(()=>[l($,null,{default:d(()=>[l(z,{flat:"",square:"",size:"sm",class:"bg-negative text-white q-px-xs"},{default:d(()=>[B(" Delete ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Le]]):j((f(),C(q,{key:2,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!c(p)||c(i).isPublicChannel,onClick:w[6]||(w[6]=Ae=>A.$emit("leaveChannel"))},{default:d(()=>[l($,null,{default:d(()=>[l(z,{flat:"",square:"",size:"sm",class:"bg-negative text-white q-px-xs"},{default:d(()=>[B(" Leave ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Le]])]),_:1})]),_:1})]),_:1},8,["disabled"])])])],2)}}});const Au={class:"col col-4"},_u={class:"col"},wu={class:"no-margin"},Mu=H({__name:"DebugBtn",props:{isDebugOpen:{type:Boolean,default:!1}},emits:["handleDebugBtn"],setup(t){const e=t,{state:n}=Y(),{isAuthorizedMember:s,isPendingMember:i,isChannelCreator:r}=Be(),a=U(!1);return J(()=>e.isDebugOpen,o=>{n.channel&&(a.value=o)}),(o,u)=>(f(),C(ye,{modelValue:c(a),"onUpdate:modelValue":u[0]||(u[0]=h=>le(a)?a.value=h:null),onHide:u[1]||(u[1]=h=>o.$emit("handleDebugBtn"))},{default:d(()=>[l(se,{style:{width:"800px","max-width":"80vw"}},{default:d(()=>[l(V,null,{default:d(()=>[(f(!0),N(Z,null,de([["Authorized",c(s)],["Pending Access",c(i)],["Channel Creator",c(r)],["Channel Address",c(n).channelAddr],["Channel",c(n).channel],["Membership",c(n).channelMembership],["Members",c(n).channelMembers]],h=>(f(),N("div",{key:h[0],class:"row q-mt-md"},[m("div",Au,O(h[0]),1),m("div",_u,[m("pre",wu,O(h[1]),1)])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),Cu={class:"messenger-wrapper"},Su={class:"messenger-main"},ku={key:1,class:"messenger-channels-empty"},Du=H({__name:"Messenger",setup(t){const e=xe(),{state:n,postMessage:s,editMessage:i,deleteMessage:r,loadChannel:a,refreshList:o,channelAuthorityDevice:u}=Y(),h=Be(),y=Nn(),p=xr(),v=Nr(),x=Ir(),D=kn(),L=Dn(),W=Er(),S=Tr(),k=me({message:"",edit:!1,messageId:0}),K=U([]),I=U("");async function A(){const{message:Q,edit:R,messageId:He}=k;R?w(Q,He):await s(k.message),k.message="",k.edit=!1,k.messageId=0}async function w(Q,R){await i(Q,Number(R))}const G=Q=>{if(Q===""){K.value=[],I.value="";return}K.value=h.ownChannels.filter(R=>R.data.name.toLocaleLowerCase().includes(Q.toLocaleLowerCase())||R.pubkey.toBase58().toLocaleLowerCase().includes(Q.toLocaleLowerCase())),I.value=Q},he=_(()=>n.loading),pe=U(!1),ke=_(()=>K.value.length>0||I.value.length>0?K.value:h.ownChannels),Ae=Q=>x.submit(Q),xt=Q=>{v.state.name=Q,v.submit()},Et=_(()=>y.isMobile?y.state.searchOrInfo==="search"?1:2:1),Oe=U("");J(()=>n.memberDevices,async Q=>{Q.length>0&&(Oe.value=await u())});const Ge=U(!1),at=()=>Ge.value=!Ge.value;return fn(()=>{const Q=document.querySelector(".sol-icon");Q==null||Q.addEventListener("dblclick",()=>{at()})}),(Q,R)=>{const He=vu,It=Yc,Nt=Hc,Tt=zc,b=Ac,M=rc,E=ac,P=Vl,te=ql,oe=Yi;return f(),N(Z,null,[m("div",Cu,[l(He,{onSearch:G,onShowMembers:R[0]||(R[0]=F=>c(D).state.dialog=!0),onDeleteChannel:R[1]||(R[1]=F=>c(W).submit()),onLeaveChannel:R[2]||(R[2]=F=>c(S).submit()),onAddMember:R[3]||(R[3]=F=>c(x).state.dialog=!0),onShowDeviceKey:R[4]||(R[4]=F=>pe.value=!0)}),m("div",Su,[l(se,{class:"messenger-channels",square:"",flat:""},{default:d(()=>[c(ke).length>0?(f(),C(Se,{key:0,separator:"",class:"channels-list"},{default:d(()=>[(f(!0),N(Z,null,de(c(ke),F=>(f(),C(It,{key:F.data.name,pubkey:F.pubkey,channel:F.data,"active-class":"select-channel","is-active":`${c(n).channelAddr}`==`${F.pubkey}`,onSelect:Qu=>c(a)(F.pubkey)},null,8,["pubkey","channel","is-active","onSelect"]))),128))]),_:1})):(f(),N("div",ku," No channels ")),l(Nt,{"is-joining":c(v).state.loading,"is-loading":c(he),onCreateChannel:R[5]||(R[5]=F=>c(p).state.dialog=!0),onJoinChannel:R[6]||(R[6]=F=>c(v).state.dialog=!0),onRefreshList:c(o)},null,8,["is-joining","is-loading","onRefreshList"])]),_:1}),l(Tt,{style:et({"z-index":c(Et)}),"post-message-state":c(k),onEditMemberMessage:c(i),onSendMessage:A,onDeleteMessage:c(r)},null,8,["style","post-message-state","onEditMemberMessage","onDeleteMessage"]),l(je,{showing:c(n).loading,color:"primary"},null,8,["showing"])])]),l(b,{modelValue:c(p).state.dialog,"onUpdate:modelValue":R[7]||(R[7]=F=>c(p).state.dialog=F),loading:c(p).state.loading,"default-state":c(p).state,onSubmit:c(p).submit,onReset:c(p).reset},null,8,["modelValue","loading","default-state","onSubmit","onReset"]),l(M,{modelValue:c(x).state.dialog,"onUpdate:modelValue":R[8]||(R[8]=F=>c(x).state.dialog=F),loading:c(x).state.loading,"default-state":c(x).state,onSubmit:Ae,onReset:c(x).reset},null,8,["modelValue","loading","default-state","onReset"]),l(E,{modelValue:c(v).state.dialog,"onUpdate:modelValue":R[9]||(R[9]=F=>c(v).state.dialog=F),loading:c(v).state.loading,onSubmit:xt,onReset:c(v).reset},null,8,["modelValue","loading","onReset"]),l(P,{modelValue:c(D).state.dialog,"onUpdate:modelValue":R[10]||(R[10]=F=>c(D).state.dialog=F),wallet:c(e),"authorize-member-state":c(D).state,"delete-member-state":c(L).state,onSubmit:c(D).submit,onDeleteMember:c(L).submit},null,8,["modelValue","wallet","authorize-member-state","delete-member-state","onSubmit","onDeleteMember"]),l(te,{modelValue:c(pe),"onUpdate:modelValue":R[11]||(R[11]=F=>le(pe)?pe.value=F:null),"authority-device":c(Oe),onLoadChannel:R[12]||(R[12]=F=>c(a)(c(n).channelAddr))},null,8,["modelValue","authority-device"]),l(oe,{"channel-event":c(n).channelEvent},null,8,["channel-event"]),l(Mu,{"is-debug-open":c(Ge),onHandleDebugBtn:at},null,8,["is-debug-open"])],64)}}});const xu={},Eu={class:"page-wrapper"},Iu={class:"messenger-container"};function Nu(t,e){const n=Du,s=Oi;return f(),N("div",Eu,[m("div",Iu,[l(n)]),l(s)])}const Tu=ue(xu,[["render",Nu],["__scopeId","data-v-76692499"]]),Ku=()=>cn(()=>import("./_...all_.2c83ad42.js"),["assets/_...all_.2c83ad42.js","assets/vendor.6fbdfaab.js","assets/_...all_.73169310.css"]),Bu=[{name:"index",path:"/",component:Tu,props:!0},{name:"all",path:"/:all(.*)*",component:Ku,props:!0,meta:{layout:"empty"}}],Lu=Ei(Bu),Ru="/",Pu=Ta({history:Ka(Ru),scrollBehavior:()=>({left:0,top:0}),strict:!0,routes:Lu}),zu=({app:t})=>{t.use(Pu)},qu=Object.freeze(Object.defineProperty({__proto__:null,install:zu},Symbol.toStringTag,{value:"Module"})),Wu=({app:t})=>{t.use(Ba,{wallets:[new La,new Ra,new Pa,new za,new qa,new Wa,new Ua,new Oa,new Ha,new $a,new Fa,new Va,new ja,new Ga,new Xa,new Qa,new Ya,new Za,new Ja,new es,new ts,new ns,new as,new ss,new is,new os,new rs,new ls,new cs,new us],autoConnect:!1})},Uu=Object.freeze(Object.defineProperty({__proto__:null,install:Wu},Symbol.toStringTag,{value:"Module"})),Ou=ds();function Hu(){return Ou}const $u=Symbol("WALLET_CONNECT_EVENT"),Fu=Symbol("WALLET_DISCONNECT_EVENT"),Vu=Symbol("ACCOUNT_CHANGE_EVENT"),Pt=5e3;function ju(){const{connection:t}=bt(),{emit:e}=Hu(),{notify:n}=De(),{wallet:s}=xe();J(s,i=>{if(!i)return;const r=()=>{const u=i.adapter.publicKey;t.onAccountChange(u,h=>{e(Vu,h)}),t.onLogs(u,h=>{console.log(h)}),n({message:"Wallet update",caption:`Connected to wallet ${tt(u.toBase58(),7)}`,timeout:Pt}),e($u,i)},a=()=>{n({message:"Wallet update",caption:"Disconnected from wallet",timeout:Pt}),e(Fu,i)},o=u=>{!(u!=null&&u.message)||n({type:"negative",message:"Wallet update",caption:u.message,timeout:Pt})};i.adapter.once("connect",r),i.adapter.once("disconnect",a),i.adapter.removeAllListeners("error"),i.adapter.on("error",o)},{immediate:!0})}const Gu=H({__name:"App",setup(t){return ms(()=>{ju()}),hs({title:"Cgram",meta:[{name:"description",content:""},{name:"keywords",content:""}],link:[{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"}]}),(e,n)=>{const s=Vt("router-view");return f(),C(s)}}});async function Xu(){const t=ps(Gu);Object.values(Object.assign({"./plugins/app.ts":fs,"./plugins/pinia.ts":bs,"./plugins/quasar.ts":As,"./plugins/router.ts":qu,"./plugins/wallet.ts":Uu})).forEach(e=>{var n;return(n=e.install)==null?void 0:n.call(e,{app:t})}),t.mount("#app")}Xu().then();export{ue as _};
