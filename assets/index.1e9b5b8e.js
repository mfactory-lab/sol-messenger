var Sn=Object.defineProperty;var Cn=(t,e,n)=>e in t?Sn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var j=(t,e,n)=>(Cn(t,typeof e!="symbol"?e+"":e,n),n);import{c as Dn,a as xn,Q as In,P as En,D as Bn,N as Tn,b as Nn,i as Pn,u as Se,d as Ve,e as Le,r as de,w as te,f as O,g as L,o as g,h as B,j as m,k as N,l as V,v as Kn,m as c,F as Z,n as ue,t as q,p as Me,q as A,s as P,x as De,y as zn,z as Ln,S as Wn,A as k,B as u,C as Gt,E as W,G as r,H as ne,I as G,J as Te,K as Rn,L as F,M as U,O as Fn,R as se,T as ye,U as ct,V as We,W as Re,X as Hn,Y as Zt,Z as ke,_ as Qe,$ as ie,a0 as qn,a1 as Ht,a2 as ut,a3 as On,a4 as Un,a5 as en,a6 as $n,a7 as tn,a8 as Gn,a9 as dt,aa as jn,ab as ze,ac as It,ad as Vn,ae as qt,af as y,ag as we,ah as Ot,ai as oe,aj as me,ak as Xe,al as nn,am as Ue,an as Qn,ao as mt,ap as an,aq as Pt,ar as Yn,as as Xn,at as Jn,au as Zn,av as ea,aw as re,ax as jt,ay as be,az as Je,aA as Ge,aB as ae,aC as sn,aD as Pe,aE as ta,aF as Vt,aG as na,aH as Ze,aI as aa,aJ as on,aK as sa,aL as ia,aM as oa,aN as la,aO as ra,aP as ca,aQ as ua,aR as da,aS as Ut,aT as ln,aU as ma,aV as rn,aW as Qt,aX as ha,aY as pa,aZ as ga,a_ as fa,a$ as ya,b0 as ba,b1 as va,b2 as _a,b3 as Aa,b4 as wa,b5 as Ma,b6 as ka,b7 as Sa,b8 as Ca,b9 as Da,ba as xa,bb as Ia,bc as Ea,bd as Ba,be as Ta,bf as Na,bg as Pa,bh as Ka,bi as za,bj as La,bk as Wa,bl as Ra,bm as Fa,bn as Ha,bo as qa,bp as Oa,bq as Ua,br as $a,bs as Ga,bt as ja,bu as Va,bv as Qa,bw as Ya,bx as Xa,by as Ja,bz as Za,bA as es,bB as ts,bC as ns,bD as as,bE as ss,bF as is,bG as os,bH as ls,bI as rs,bJ as cs}from"./vendor.a1ecef17.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();const us=({app:t})=>{t.use(Dn())},ds=Object.freeze(Object.defineProperty({__proto__:null,install:us},Symbol.toStringTag,{value:"Module"})),ms=({app:t})=>{const e=xn();t.use(e)},hs=Object.freeze(Object.defineProperty({__proto__:null,install:ms},Symbol.toStringTag,{value:"Module"})),ps=({app:t})=>{t.use(In,{plugins:{Dark:En,Dialog:Bn,Notify:Tn,LocalStorage:Nn},iconSet:Pn})},gs=Object.freeze(Object.defineProperty({__proto__:null,install:ps},Symbol.toStringTag,{value:"Module"}));function fs(){const{dark:t}=Se(),e=Ve("theme-mode",t.isActive);return t.set(e.value),{isActive:e,set(n){t.set(n),e.value=t.isActive},toggle(){t.toggle(),e.value=t.isActive}}}var lt=(t=>(t[t.FullScreen=0]="FullScreen",t[t.Compact=1]="Compact",t))(lt||{});const cn=Le("app-size",()=>{const t=de({mode:lt[1],isFooter:!1}),e=document.getElementById("app");return te(()=>t.mode,()=>{e.className="",e==null||e.classList.add(t.mode)}),{state:t}}),Ye=[],un={id:"devnet",name:"DevNet",cluster:"devnet",url:"https://devnet.rpcpool.com/"};Ye.push(un);var Jt;const ys=(Jt=Ye.find(t=>t.id==={}.VITE_CONNECTION_ENDPOINT))!=null?Jt:un,bs="confirmed",vs=12e4,at=[`<span>Public channels</span> are non-encrypted and available to anyone, both for reading and writing.</br></br>
    <span>Public channels</span> are encrypted, and new users need to request approval to join them.</br>
    Depending on the \u2018Members can approve\u2019 setting, such requests can be approved either by channel\u2019s 
    owner/admin only, or by any authorized member of the channel.
    `,"Any authorized channel member can approve new requests to join","This setting determines how many messages will be available in chat until they are updated with new messages","Leave empty to use your wallet address instead of a nickname"],_s="https://twitter.com/JPoolSolana",As="https://t.me/jpool_solana",ws="https://t.me/jpoolsolana",Ms="https://discord.gg/qR4BA9QXVR",ks="https://jfactory.ch",Ss="https://jpool.one",Cs="https://svt.one",Ds="https://staking.kiwi/",Kt=350,Yt=26,xs={class:"container"},Is={class:"footer-section"},Es={class:"footer-info"},Bs={class:"theme"},Ts={class:"switch"},Ns=m("span",{class:"slider round"},null,-1),Ps=m("div",{class:"copyright"},[N(" \xA9 Copyright 2022 cgram.one. All rights reserved."),m("br"),N("Powered by jFactory ")],-1),Ks={class:"footer-links"},zs={class:"social"},Ls=["href"],Ws=m("span",null,[N("official"),m("br"),N("channel")],-1),Rs=[Ws],Fs=["href"],Hs=["href"],qs=["href"],Os=["href"],Us=O({__name:"AppFooter",setup(t){const e=fs(),{state:n}=cn(),i=[{name:"JFACTORY",link:ks},{name:"JPOOL",link:Ss},{name:"STAKING KIWI",link:Ds},{name:"SOLANA VALIDATOR TOOLKIT",link:Cs}];return L(!0),(s,l)=>(g(),B("footer",{class:Me({"show-footer":c(n).isFooter})},[m("div",xs,[m("div",Is,[m("div",Es,[m("div",Bs,[N(" Dark mode "),m("label",Ts,[V(m("input",{"onUpdate:modelValue":l[0]||(l[0]=a=>c(e).isActive.value=a),type:"checkbox",onClick:l[1]||(l[1]=(...a)=>c(e).toggle&&c(e).toggle(...a))},null,512),[[Kn,c(e).isActive.value]]),Ns])]),Ps]),m("div",Ks,[m("div",zs,[m("a",{href:c(As),target:"_blank",class:"social-link social-link-text"},Rs,8,Ls),m("a",{href:c(ws),target:"_blank",class:"social-link telegram"},null,8,Fs),m("a",{href:c(_s),target:"_blank",class:"social-link twitter"},null,8,Hs),m("a",{href:c(Ms),target:"_blank",class:"social-link discord"},null,8,qs)]),m("nav",null,[m("ul",null,[(g(),B(Z,null,ue(i,({name:a,link:o})=>m("li",{key:a},[m("a",{target:"_blank",href:o},q(a),9,Os)])),64))])])])])])],2))}});function $s(){const t=L(Gs());return{userAgent:t,isMobileOs:A(()=>js(t.value)),isWebView:A(()=>Vs(t.value))}}let Et;function Gs(){var t,e;return Et===void 0&&(Et=(e=(t=globalThis.navigator)==null?void 0:t.userAgent)!=null?e:null),Et}function js(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)}function Vs(t){return/(WebView|(Phantom|Solflare)|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function et(t,e=4){return t instanceof P&&(t=t.toBase58()),`${t.slice(0,e)}...${t.slice(-e)}`}function dn(t){return(t==null?void 0:t.name)&&t.name!==""?t.name:et(t.authority)}const mn=t=>{if(!t)return{background:"#000"};let e=0;for(let i=0;i<t.length;i++)e=t.charCodeAt(i)+((e<<5)-e),e=e&e;let n="#";for(let i=0;i<3;i++)n+=`00${(e>>i*8&255).toString(16)}`.substr(-2);return{background:n}},Qs="/assets/clover.968404b0.svg",Ys="/assets/ledger.40cf6861.svg",Xs="/assets/mathwallet.1d763e81.svg",ht=t=>(We("data-v-5e69d5e0"),t=t(),Re(),t),Js=ht(()=>m("div",{class:"text-h6 text-center"}," Your wallet ",-1)),Zs={class:"q-gutter-md row justify-between"},ei=ht(()=>m("span",{name:"wallet"},"Disconnect",-1)),ti=ht(()=>m("span",{name:"wallet"},"Ok",-1)),ni=ht(()=>m("div",{class:"text-h6"}," Connect to a wallet ",-1)),ai={class:"text-light-gray text-caption full-width text-no-wrap",style:{"text-overflow":"ellipsis",overflow:"hidden"}},si=["src","alt"],ii=O({__name:"ConnectWallet",setup(t){const e={priority:{solflare:10,phantom:20,sollet:5,nufi:5,blocto:1},icons:{clover:Qs},darkIcons:{ledger:Ys,mathwallet:Xs},deepLinks:{phantom:"https://phantom.app/ul/browse/{uri}?ref={ref}",solflare:"https://solflare.com/ul/browse/{uri}?ref={ref}"}},{userAgent:n,isWebView:i,isMobileOs:s}=$s(),l={close:ct},a=E=>["Installed","Loadable"].includes(E.readyState);Se();const o=De(),{connected:d,connecting:h}=o;zn();const p=A(()=>s.value&&!i.value);if(i.value){const E=String(n.value).toLowerCase();E.includes("phantom")?(o.select(Ln),o.connect()):E.includes("solflare")&&(o.select(Wn),o.connect())}const b=A(()=>{var E,_;return(_=(E=o.publicKey.value)==null?void 0:E.toBase58())!=null?_:""}),v=A(()=>et(b.value)),w=A(()=>[...o.wallets.value].map(E=>{var M,Q;const _=E.adapter.name.toLowerCase();return E.adapter.icon=(Q=(M=e.darkIcons[_])!=null?M:e.icons[_])!=null?Q:E.adapter.icon,p.value&&e.deepLinks[_]&&(E.deepLink=e.deepLinks[_].replace("{uri}",location.href).replace("{ref}",location.origin)),E}).sort((E,_)=>{var pe,ge;const M=(pe=e.priority[E.adapter.name.toLowerCase()])!=null?pe:1;return((ge=e.priority[_.adapter.name.toLowerCase()])!=null?ge:1)-M+((a(_)?1:0)-(a(E)?1:0))})),T=A(()=>p.value?w.value.filter(E=>!!E.deepLink):w.value),C=L(!1);async function H(E){await o.select(E.adapter.name),C.value=!1,await o.connect()}function S(){C.value=!1,o.disconnect()}function x(){C.value=!0}function K(){C.value=!1}return(E,_)=>(g(),B(Z,null,[c(d)?(g(),k(W,Gt({key:0},E.$attrs,{ripple:!1,color:"primary-gray","text-color":"white",square:"",unelevated:"",onClick:x}),{default:u(()=>[N(q(c(v)),1)]),_:1},16)):(g(),k(W,Gt({key:1},E.$attrs,{color:"primary-gray",class:"q-pa-none btn","text-color":"white",square:"",flat:"",ripple:!1,loading:c(h),onClick:x}),{default:u(()=>[N(" CONNECT WALLET ")]),_:1},16,["loading"])),r(ye,{modelValue:c(C),"onUpdate:modelValue":_[0]||(_[0]=M=>se(C)?C.value=M:null),"transition-duration":"150","transition-show":"fade","transition-hide":"fade"},{default:u(()=>[c(d)?(g(),k(ne,{key:0,flat:"",square:""},{default:u(()=>[r(G,{class:"relative-position"},{default:u(()=>[Js,r(W,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:l.close,size:"md",onClick:K},null,8,["icon"])]),_:1}),r(Te),r(G,null,{default:u(()=>[N(q(c(b)),1)]),_:1}),r(Te),r(G,null,{default:u(()=>[m("div",Zs,[r(W,{class:"disconnect-btn","text-color":"black",square:"",flat:"",onClick:S},{default:u(()=>[ei]),_:1}),r(W,{class:"disconnect-btn","text-color":"black",square:"",flat:"",onClick:K},{default:u(()=>[ti]),_:1})])]),_:1})]),_:1})):(g(),k(ne,{key:1,class:"wallet-connect-card"},{default:u(()=>[r(G,null,{default:u(()=>[ni,r(W,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:l.close,size:"md",onClick:K},null,8,["icon"])]),_:1}),r(Te),r(G,{style:{"max-height":"80vh"},class:"scroll"},{default:u(()=>[r(Rn,{grid:"",rows:c(T),"row-key":"name","hide-pagination":"","hide-header":"","rows-per-page-options":[100]},{item:u(({row:M})=>[(g(),B("div",{key:`wallet-${M.adapter.name}`,class:"col-12 col-md-6"},[r(F,{clickable:"",href:M.deepLink,onClick:Q=>M.deepLink?!0:H(M)},{default:u(()=>[r(U,null,{default:u(()=>[m("b",null,q(M.adapter.name),1),m("div",ai,q(M.adapter.url),1)]),_:2},1024),r(U,{avatar:""},{default:u(()=>[r(Fn,{square:""},{default:u(()=>[m("img",{src:M.adapter.icon,alt:M.adapter.name},null,8,si)]),_:2},1024)]),_:2},1024)]),_:2},1032,["href","onClick"])]))]),_:1},8,["rows"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])],64))}});const le=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},oi=le(ii,[["__scopeId","data-v-5e69d5e0"]]),pt=Le({id:"connection",state:()=>({commitment:bs,confirmTransactionInitialTimeout:vs,rpc:Hn("rpc","")}),getters:{endpoint(t){var e;return(e=Ye.find(n=>n.id===t.rpc))!=null?e:ys},connection(t){return console.log("[connection]",this.endpoint.url),new Zt(this.endpoint.url,{confirmTransactionInitialTimeout:t.confirmTransactionInitialTimeout,commitment:t.commitment})},cluster(){return this.endpoint.cluster}},actions:{setRpc(t){this.rpc=t},setCommitment(t){this.commitment=t}}}),li=O({__name:"ClusterSelector",setup(t){const e=pt(),{connected:n,connect:i,disconnect:s,autoConnect:l}=De(),a=[Ye.filter(h=>h.cluster==="mainnet-beta"),Ye.filter(h=>h.cluster!=="mainnet-beta")],o=A(()=>e.endpoint),d=h=>{n&&e.cluster!==h.cluster&&(s(),l.value&&i()),e.setRpc(h.id)};return(h,p)=>(g(),k(qn,{label:c(o).name,"model-value":!1,"auto-close":"",color:"secondary","text-color":"#000",square:"",unelevated:"",ripple:!1},{default:u(()=>[r(ke,null,{default:u(()=>[(g(),B(Z,null,ue(a,(b,v)=>(g(),B(Z,{key:`${v}-cluster-group`},[(g(!0),B(Z,null,ue(b,w=>(g(),k(F,{key:w.id,clickable:"",onClick:T=>d(w)},{default:u(()=>[(g(),k(U,{key:`${w.id}-item`},{default:u(()=>[r(Qe,null,{default:u(()=>[m("b",null,q(w.name),1)]),_:2},1024),N(" "+q(w.url),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128)),v!==a.length-1?(g(),k(Te,{key:0})):ie("",!0)],64))),64))]),_:1})]),_:1},8,["label"]))}});const ri={},ci={class:"app-header"},ui={class:"container"},di={class:"app-header__info"},mi={class:"app-header__logo"},hi={class:"logo-wrapper"},pi=m("div",{class:"sol-icon"},null,-1),gi=m("div",{class:"app-header__title"},[m("h1",null,[N(" BLOCKCHAIN "),m("br"),N(" messenger "),m("span",{class:"marked"},"SOLANA")])],-1),fi={class:"app-header__right"},yi={class:"app-header__buttons"};function bi(t,e){const n=Ht("router-link"),i=li,s=oi;return g(),B("header",ci,[m("div",ui,[m("div",di,[m("div",mi,[m("div",hi,[pi,r(n,{to:"/"})])]),gi]),r(ut),m("div",fi,[m("div",yi,[r(i,{class:"app-header__cluster-btn header-btn"}),r(s,{class:"app-header__wallet-btn header-btn"})])])])])}const vi=le(ri,[["render",bi]]),_i={};function Ai(t,e){const n=vi,i=Ht("router-view"),s=Us;return g(),k(On,{view:"lfh Lpr lff"},{default:u(()=>[r(n),r(Un,null,{default:u(()=>[r(i)]),_:1}),r(s)]),_:1})}const wi=le(_i,[["render",Ai]]),Mi={default:wi,empty:()=>en(()=>import("./empty.4883fc9f.js"),["assets/empty.4883fc9f.js","assets/vendor.a1ecef17.js"])};function ki(t){return t.map(e=>{var n;return{path:e.path,component:Mi[((n=e.meta)==null?void 0:n.layout)||"default"],children:[{...e,path:""}]}})}const Si="/assets/search.b4fadb1c.svg",Ci="/assets/transfer.796e9da5.svg",Di="/assets/plus.ee413328.svg",xi={class:"how-it-works"},Ii={class:"app-info"},Ei=m("div",{class:"app-info__title"}," JOIN A CHANNEL ",-1),Bi={class:"app-info__list"},Ti=["innerHTML"],Ni={class:"app-info"},Pi=m("div",{class:"app-info__title"}," CREATE YOUR OWN CHANNEL ",-1),Ki={class:"app-info__list"},zi=["innerHTML"],Li=O({__name:"HowItWorks",setup(t){const e=["For <span>public channels</span>, you can read or send messages without limitations.",`In order to join one of the existing private channels, click
        <img src="${Si}" class="icon" alt="search">
        (BROWSE CHANNELS) at the bottom of the left-side panel.`,`Find a channel you are interested in and click
        <img src="${Ci}" class="icon" alt="transfer">
        (REQUEST TO JOIN). Your status for that channel will be set to Pending
        Approval until your request has been accepted. While awaiting approval,
        all messages in the channel will appear scrambled.`,`After the private channel's owner or admin approves your membership,your
        status will change to Authorized. You will be able to read the channel
        and send messages.`],n=["You can create a channel of your own as well.",`Click <img src="${Di}" class="icon" alt="search"> (CREATE A CHANNEL) 
  at the bottom of the left-side panel, then choose between Private and Public options.`,"A public channel is open to anyone for reading and writing, and no encryption is used.",`If you create a private channel, joining it will require your approval. You will see a red 
  notification badge above the channel list if there are approval requests pending.`];return(i,s)=>(g(),B("div",xi,[m("div",Ii,[Ei,m("ul",Bi,[(g(),B(Z,null,ue(e,l=>m("li",{key:l},[m("p",{innerHTML:l},null,8,Ti)])),64))])]),m("div",Ni,[Pi,m("ul",Ki,[(g(),B(Z,null,ue(n,l=>m("li",{key:l},[m("p",{innerHTML:l},null,8,zi)])),64))])])]))}});const $t=t=>(We("data-v-316fa5a7"),t=t(),Re(),t),Wi={class:"q-pb-sm"},Ri={class:"text-blue-grey-10 text-h6 text-weight-regular alert-title"},Fi=$t(()=>m("span",{class:"text-weight-medium text-h6 text-grey-10"},null,-1)),Hi=$t(()=>m("span",{class:"text-blue-grey-10 text-body2 text-weight-regular",name:"name"},"Channel Name: ",-1)),qi={class:"text-weight-medium text-body2 text-grey-10"},Oi=$t(()=>m("span",{class:"text-blue-grey-10 text-body2 text-weight-regular",name:"name"},"Channel Address: ",-1)),Ui={class:"text-weight-medium text-body2 text-grey-10 alert-address"},$i=O({__name:"EventChannelDialog",props:{channelEvent:Object},setup(t){const e=t,n=L(!1),i=L(""),s=A(()=>i.value==="delete"),l=A(()=>s.value?"You have been removed from the channel":"You have been authorized"),a=A(()=>s.value?$n:tn),o=A(()=>s.value?"#d32f2f":"#00c853");return te(()=>e.channelEvent,d=>{d&&(n.value=!0,i.value=d.event)}),(d,h)=>(g(),k(ye,{modelValue:c(n),"onUpdate:modelValue":h[0]||(h[0]=p=>se(n)?n.value=p:null)},{default:u(()=>[r(ne,{square:"",flat:"",class:"row no-wrap items-center alert-card"},{default:u(()=>[r(G,{class:"q-pr-none event-icon"},{default:u(()=>[(g(),k(Gn(c(a)),{size:"80",color:c(o),class:"alert-icon"},null,8,["color"]))]),_:1}),r(G,{class:Me(["alert-info",c(i)])},{default:u(()=>[m("div",Wi,[m("span",Ri,[N(q(c(l))+" ",1),Fi])]),m("div",null,[Hi,m("span",qi,q(e.channelEvent.channel),1)]),m("div",null,[Oi,m("span",Ui,q(e.channelEvent.address),1)])]),_:1},8,["class"])]),_:1})]),_:1},8,["modelValue"]))}});const Gi=le($i,[["__scopeId","data-v-316fa5a7"]]),Fe=Le("user",()=>{const t=dt(),e=L(),n=L();jn(async()=>{var h;const d=(h=t.value)==null?void 0:h.publicKey;if(d){const p=Ve(d.toString(),()=>It.encode(ze.generate().secretKey));i(p.value),await o()}else e.value=void 0});function i(d){e.value=ze.fromSecretKey(It.decode(d))}function s(){var p;const d=(p=t.value)==null?void 0:p.publicKey;if(!d)return;const h=Ve(d.toString(),"");i(h.value=It.encode(ze.generate().secretKey))}function l(d){var b;const h=(b=t.value)==null?void 0:b.publicKey;if(!h)return;const p=Ve(h.toString(),"");i(p.value=d)}function a(){var w;const d=(w=t.value)==null?void 0:w.publicKey;if(!d)return;const p={backupKey:Ve(d.toString(),"").value},b=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(p))}`,v=document.createElement("a");v.setAttribute("href",b),v.setAttribute("download","backup_key.json"),v.click()}async function o(){var b;const d=(b=t.value)==null?void 0:b.publicKey,p=await new Zt(Vn("devnet"),"confirmed").getBalance(d);n.value=p/qt}return{keypair:e,balance:n,userBalance:o,generateKey:s,importKey:l,exportKey:a,isUserHaveSol:A(()=>n.value>.1)}}),ji="0.0.13",Vi="messenger",Qi=[{name:"initChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"key",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"InitChannelData"}}]},{name:"deleteChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"joinChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"key",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"JoinChannelData"}}]},{name:"leaveChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"grantAccessMember",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!1,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"GrantAccessMemberData"}}]},{name:"addMember",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"invitee",isMut:!1,isSigner:!1},{name:"inviteeMembership",isMut:!0,isSigner:!1},{name:"inviteeDevice",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddMemberData"}}]},{name:"authorizeMember",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AuthorizeMemberData"}}]},{name:"deleteMember",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"membershipAuthority",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"addDevice",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddDeviceData"}}]},{name:"deleteDevice",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"deviceAuthority",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"postMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"message",type:"string"}]},{name:"readMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"messageId",type:"u64"}]},{name:"updateMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u64"},{name:"message",type:"string"}]},{name:"deleteMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u64"}]}],Yi=[{name:"Channel",type:{kind:"struct",fields:[{name:"workspace",docs:["Workspace used to group channels"],type:"string"},{name:"name",docs:["Name of the channel"],type:"string"},{name:"creator",docs:["Channel creator"],type:"publicKey"},{name:"createdAt",docs:["Creation date"],type:"i64"},{name:"lastMessageAt",docs:["Last message date"],type:"i64"},{name:"flags",docs:["Channel flags"],type:"u8"},{name:"memberCount",docs:["Number of members"],type:"u16"},{name:"messageCount",docs:["Message counter"],type:"u64"},{name:"maxMessages",docs:["The maximum number of messages that are stored in [messages]"],type:"u16"},{name:"messages",docs:["List of latest messages"],type:{vec:{defined:"Message"}}}]}},{name:"ChannelDevice",type:{kind:"struct",fields:[{name:"channel",docs:["Associated [Channel] address"],type:"publicKey"},{name:"authority",docs:["Authority of the [ChannelKey]"],type:"publicKey"},{name:"key",docs:["The device key used to encrypt the `cek`"],type:"publicKey"},{name:"cek",docs:["The content encryption key (CEK)"],type:{defined:"CEKData"}},{name:"bump",docs:["Bump seed for deriving PDA seeds"],type:"u8"}]}},{name:"ChannelMembership",type:{kind:"struct",fields:[{name:"channel",docs:["Associated [Channel] address"],type:"publicKey"},{name:"authority",docs:["Authority of membership"],type:"publicKey"},{name:"status",docs:["Status of membership"],type:{defined:"ChannelMembershipStatus"}},{name:"statusTarget",docs:["Status target key"],type:{option:"publicKey"}},{name:"name",docs:["Name of the channel member"],type:"string"},{name:"lastReadMessageId",docs:["The last read message id"],type:"u64"},{name:"createdAt",docs:["Creation date"],type:"i64"},{name:"flags",docs:["Membership flags"],type:"u8"},{name:"bump",docs:["Bump seed for deriving PDA seeds"],type:"u8"}]}}],Xi=[{name:"AddDeviceData",type:{kind:"struct",fields:[{name:"key",type:"publicKey"},{name:"cek",type:{defined:"CEKData"}}]}},{name:"AddMemberData",type:{kind:"struct",fields:[{name:"name",docs:["Member name"],type:"string"},{name:"flags",docs:["Membership flags, only `admin` and `owner` can set membership flags"],type:"u8"},{name:"cek",docs:["Content Encryption Key"],type:{defined:"CEKData"}},{name:"key",docs:["Device key"],type:"publicKey"}]}},{name:"AuthorizeMemberData",type:{kind:"struct",fields:[{name:"cek",type:{defined:"CEKData"}}]}},{name:"GrantAccessMemberData",type:{kind:"struct",fields:[{name:"flags",type:"u8"}]}},{name:"InitChannelData",type:{kind:"struct",fields:[{name:"workspace",type:"string"},{name:"name",type:"string"},{name:"maxMessages",type:"u16"},{name:"memberName",type:"string"},{name:"cek",type:{defined:"CEKData"}},{name:"public",type:"bool"},{name:"permissionless",type:"bool"}]}},{name:"JoinChannelData",type:{kind:"struct",fields:[{name:"name",type:"string"},{name:"authority",type:{option:"publicKey"}}]}},{name:"UpdateMessageData",type:{kind:"struct",fields:[{name:"id",type:"u64"},{name:"content",type:"string"}]}},{name:"CEKData",type:{kind:"struct",fields:[{name:"header",docs:["The header information for the CEK"],type:"string"},{name:"encryptedKey",docs:["The CEK itself"],type:"string"}]}},{name:"Message",type:{kind:"struct",fields:[{name:"id",docs:["Uniq message id"],type:"u64"},{name:"sender",docs:["The message sender id"],type:"publicKey"},{name:"createdAt",docs:["The unix timestamp at which the message was received"],type:"i64"},{name:"flags",docs:["The unix timestamp at which the message was updated","Message flags"],type:"u8"},{name:"content",docs:["The (typically encrypted) message content"],type:"string"}]}},{name:"ChannelMembershipStatus",type:{kind:"enum",variants:[{name:"Authorized"},{name:"Pending"}]}}],Ji=[{name:"NewChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"creator",type:"publicKey",index:!1},{name:"name",type:"string",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"creator",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"NewMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"message",type:{defined:"Message"},index:!1}]},{name:"UpdateMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"message",type:{defined:"Message"},index:!1}]},{name:"DeleteMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"id",type:"u64",index:!1}]},{name:"JoinChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"LeaveChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!0},{name:"timestamp",type:"i64",index:!1}]},{name:"AddMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"AuthorizeMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"AddDeviceEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteDeviceEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],Zi=[{code:6e3,name:"Unauthorized",msg:"Unauthorized"},{code:6001,name:"InvalidChannel",msg:"Invalid channel"},{code:6002,name:"InvalidMembership",msg:"Invalid membership"},{code:6003,name:"InvalidDevice",msg:"Invalid device"},{code:6004,name:"InvalidMessage",msg:"Invalid message"},{code:6005,name:"NameTooLong",msg:"Name too long"},{code:6006,name:"WorkspaceTooLong",msg:"Workspace too long"},{code:6007,name:"MessageTooLong",msg:"Message too long"}],eo={address:"4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw",origin:"anchor",binaryVersion:"0.25.0",libVersion:"0.25.0"},to={version:ji,name:Vi,instructions:Qi,accounts:Yi,types:Xi,events:Ji,errors:Zi,metadata:eo},no=new y.FixableBeetArgsStruct([["id",y.u64],["sender",we],["createdAt",y.i64],["flags",y.u8],["content",y.utf8String]],"Message"),zt=[49,159,99,106,220,87,219,88];class _e{constructor(e,n,i,s,l,a,o,d,h,p){this.workspace=e,this.name=n,this.creator=i,this.createdAt=s,this.lastMessageAt=l,this.flags=a,this.memberCount=o,this.messageCount=d,this.maxMessages=h,this.messages=p}static fromArgs(e){return new _e(e.workspace,e.name,e.creator,e.createdAt,e.lastMessageAt,e.flags,e.memberCount,e.messageCount,e.maxMessages,e.messages)}static fromAccountInfo(e,n=0){return _e.deserialize(e.data,n)}static async fromAccountAddress(e,n,i){const s=await e.getAccountInfo(n,i);if(s==null)throw new Error(`Unable to find Channel account at ${n}`);return _e.fromAccountInfo(s,0)[0]}static gpaBuilder(e=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Ot.fromStruct(e,st)}static deserialize(e,n=0){return st.deserialize(e,n)}serialize(){return st.serialize({accountDiscriminator:zt,...this})}static byteSize(e){const n=_e.fromArgs(e);return st.toFixedFromValue({accountDiscriminator:zt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,i){return n.getMinimumBalanceForRentExemption(_e.byteSize(e),i)}pretty(){return{workspace:this.workspace,name:this.name,creator:this.creator.toBase58(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),lastMessageAt:(()=>{const e=this.lastMessageAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),flags:this.flags,memberCount:this.memberCount,messageCount:(()=>{const e=this.messageCount;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),maxMessages:this.maxMessages,messages:this.messages}}}const st=new y.FixableBeetStruct([["accountDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["workspace",y.utf8String],["name",y.utf8String],["creator",we],["createdAt",y.i64],["lastMessageAt",y.i64],["flags",y.u8],["memberCount",y.u16],["messageCount",y.u64],["maxMessages",y.u16],["messages",y.array(no)]],_e.fromArgs,"Channel"),tt=new y.FixableBeetArgsStruct([["header",y.utf8String],["encryptedKey",y.utf8String]],"CEKData"),Lt=[163,153,9,169,176,51,204,146];class Ae{constructor(e,n,i,s,l){this.channel=e,this.authority=n,this.key=i,this.cek=s,this.bump=l}static fromArgs(e){return new Ae(e.channel,e.authority,e.key,e.cek,e.bump)}static fromAccountInfo(e,n=0){return Ae.deserialize(e.data,n)}static async fromAccountAddress(e,n,i){const s=await e.getAccountInfo(n,i);if(s==null)throw new Error(`Unable to find ChannelDevice account at ${n}`);return Ae.fromAccountInfo(s,0)[0]}static gpaBuilder(e=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Ot.fromStruct(e,it)}static deserialize(e,n=0){return it.deserialize(e,n)}serialize(){return it.serialize({accountDiscriminator:Lt,...this})}static byteSize(e){const n=Ae.fromArgs(e);return it.toFixedFromValue({accountDiscriminator:Lt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,i){return n.getMinimumBalanceForRentExemption(Ae.byteSize(e),i)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),key:this.key.toBase58(),cek:this.cek,bump:this.bump}}}const it=new y.FixableBeetStruct([["accountDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["channel",we],["authority",we],["key",we],["cek",tt],["bump",y.u8]],Ae.fromArgs,"ChannelDevice");var Oe=(t=>(t[t.Authorized=0]="Authorized",t[t.Pending=1]="Pending",t))(Oe||{});const ao=y.fixedScalarEnum(Oe),rt=[238,149,255,251,116,131,86,170];class fe{constructor(e,n,i,s,l,a,o,d,h){this.channel=e,this.authority=n,this.status=i,this.statusTarget=s,this.name=l,this.lastReadMessageId=a,this.createdAt=o,this.flags=d,this.bump=h}static fromArgs(e){return new fe(e.channel,e.authority,e.status,e.statusTarget,e.name,e.lastReadMessageId,e.createdAt,e.flags,e.bump)}static fromAccountInfo(e,n=0){return fe.deserialize(e.data,n)}static async fromAccountAddress(e,n,i){const s=await e.getAccountInfo(n,i);if(s==null)throw new Error(`Unable to find ChannelMembership account at ${n}`);return fe.fromAccountInfo(s,0)[0]}static gpaBuilder(e=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Ot.fromStruct(e,ot)}static deserialize(e,n=0){return ot.deserialize(e,n)}serialize(){return ot.serialize({accountDiscriminator:rt,...this})}static byteSize(e){const n=fe.fromArgs(e);return ot.toFixedFromValue({accountDiscriminator:rt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,i){return n.getMinimumBalanceForRentExemption(fe.byteSize(e),i)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),status:`ChannelMembershipStatus.${Oe[this.status]}`,statusTarget:this.statusTarget,name:this.name,lastReadMessageId:(()=>{const e=this.lastReadMessageId;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),flags:this.flags,bump:this.bump}}}const ot=new y.FixableBeetStruct([["accountDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["channel",we],["authority",we],["status",ao],["statusTarget",y.coption(we)],["name",y.utf8String],["lastReadMessageId",y.u64],["createdAt",y.i64],["flags",y.u8],["bump",y.u8]],fe.fromArgs,"ChannelMembership"),xe=new Map,Ie=new Map;class gt extends Error{constructor(){super("Unauthorized");j(this,"code",6e3);j(this,"name","Unauthorized");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,gt)}}xe.set(6e3,()=>new gt);Ie.set("Unauthorized",()=>new gt);class ft extends Error{constructor(){super("Invalid channel");j(this,"code",6001);j(this,"name","InvalidChannel");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ft)}}xe.set(6001,()=>new ft);Ie.set("InvalidChannel",()=>new ft);class yt extends Error{constructor(){super("Invalid membership");j(this,"code",6002);j(this,"name","InvalidMembership");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,yt)}}xe.set(6002,()=>new yt);Ie.set("InvalidMembership",()=>new yt);class bt extends Error{constructor(){super("Invalid device");j(this,"code",6003);j(this,"name","InvalidDevice");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,bt)}}xe.set(6003,()=>new bt);Ie.set("InvalidDevice",()=>new bt);class vt extends Error{constructor(){super("Invalid message");j(this,"code",6004);j(this,"name","InvalidMessage");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,vt)}}xe.set(6004,()=>new vt);Ie.set("InvalidMessage",()=>new vt);class _t extends Error{constructor(){super("Name too long");j(this,"code",6005);j(this,"name","NameTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_t)}}xe.set(6005,()=>new _t);Ie.set("NameTooLong",()=>new _t);class At extends Error{constructor(){super("Workspace too long");j(this,"code",6006);j(this,"name","WorkspaceTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,At)}}xe.set(6006,()=>new At);Ie.set("WorkspaceTooLong",()=>new At);class wt extends Error{constructor(){super("Message too long");j(this,"code",6007);j(this,"name","MessageTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,wt)}}xe.set(6007,()=>new wt);Ie.set("MessageTooLong",()=>new wt);function ce(t){const e=xe.get(t);return e!=null?e():null}function Be(t){const e=Ie.get(t);return e!=null?e():null}const so=new y.FixableBeetArgsStruct([["key",we],["cek",tt]],"AddDeviceData"),io=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",so]],"AddDeviceInstructionArgs"),oo=[21,27,66,42,18,30,14,18];function lo(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=io.serialize({instructionDiscriminator:oo,...e}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const ro=new y.FixableBeetArgsStruct([["name",y.utf8String],["flags",y.u8],["cek",tt],["key",we]],"AddMemberData"),co=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",ro]],"AddMemberInstructionArgs"),uo=[13,116,123,130,126,198,57,34];function mo(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=co.serialize({instructionDiscriminator:uo,...e}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.invitee,isWritable:!1,isSigner:!1},{pubkey:t.inviteeMembership,isWritable:!0,isSigner:!1},{pubkey:t.inviteeDevice,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const ho=new y.FixableBeetArgsStruct([["cek",tt]],"AuthorizeMemberData"),po=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",ho]],"AuthorizeMemberInstructionArgs"),go=[194,123,189,175,86,225,93,128];function fo(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=po.serialize({instructionDiscriminator:go,...e}),s=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const yo=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)]],"DeleteChannelInstructionArgs"),bo=[145,225,187,221,157,142,114,133];function vo(t,e=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var l;const[n]=yo.serialize({instructionDiscriminator:bo}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(l=t.systemProgram)!=null?l:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)i.push(a);return new me({programId:e,keys:i,data:n})}const _o=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)]],"DeleteDeviceInstructionArgs"),Ao=[168,96,86,82,105,2,215,144];function wo(t,e=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var l;const[n]=_o.serialize({instructionDiscriminator:Ao}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.deviceAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(l=t.systemProgram)!=null?l:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)i.push(a);return new me({programId:e,keys:i,data:n})}const Mo=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)]],"DeleteMemberInstructionArgs"),ko=[95,14,98,112,252,218,205,173];function So(t,e=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var l;const[n]=Mo.serialize({instructionDiscriminator:ko}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.membershipAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(l=t.systemProgram)!=null?l:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)i.push(a);return new me({programId:e,keys:i,data:n})}const Co=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["id",y.u64]],"DeleteMessageInstructionArgs"),Do=[198,99,22,204,200,165,54,138];function xo(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=Co.serialize({instructionDiscriminator:Do,...e}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const Io=new y.BeetArgsStruct([["flags",y.u8]],"GrantAccessMemberData"),Eo=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",Io]],"GrantAccessMemberInstructionArgs"),Bo=[236,46,184,64,57,158,80,142];function To(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=Eo.serialize({instructionDiscriminator:Bo,...e}),s=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const No=new y.FixableBeetArgsStruct([["workspace",y.utf8String],["name",y.utf8String],["maxMessages",y.u16],["memberName",y.utf8String],["cek",tt],["public",y.bool],["permissionless",y.bool]],"InitChannelData"),Po=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",No]],"InitChannelInstructionArgs"),Ko=[21,200,152,39,19,178,76,47];function zo(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=Po.serialize({instructionDiscriminator:Ko,...e}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.key,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const Lo=new y.FixableBeetArgsStruct([["name",y.utf8String],["authority",y.coption(we)]],"JoinChannelData"),Wo=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["data",Lo]],"JoinChannelInstructionArgs"),Ro=[124,39,115,89,217,26,38,29];function Fo(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=Wo.serialize({instructionDiscriminator:Ro,...e}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.key,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const Ho=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)]],"LeaveChannelInstructionArgs"),qo=[104,0,75,134,95,80,68,186];function Oo(t,e=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var l;const[n]=Ho.serialize({instructionDiscriminator:qo}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(l=t.systemProgram)!=null?l:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)i.push(a);return new me({programId:e,keys:i,data:n})}const Uo=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["message",y.utf8String]],"PostMessageInstructionArgs"),$o=[214,50,100,209,38,34,7,76];function Go(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=Uo.serialize({instructionDiscriminator:$o,...e}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const jo=new y.BeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["messageId",y.u64]],"ReadMessageInstructionArgs"),Vo=[54,166,48,51,234,46,110,163];function Qo(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=jo.serialize({instructionDiscriminator:Vo,...e}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}const Yo=new y.FixableBeetArgsStruct([["instructionDiscriminator",y.uniformFixedSizeArray(y.u8,8)],["id",y.u64],["message",y.utf8String]],"UpdateMessageInstructionArgs"),Xo=[23,135,34,211,96,120,107,9];function Jo(t,e,n=new P("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[i]=Yo.serialize({instructionDiscriminator:Xo,...e}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:oe.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)s.push(o);return new me({programId:n,keys:s,data:i})}new y.FixableBeetArgsStruct([["id",y.u64],["content",y.utf8String]],"UpdateMessageData");const Zo="4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw",el=new P(Zo);function Wt(t,e=new Uint8Array(4)){const n=Xe(t.toString(),"base10");return e.set(n,4-n.length),e}const Bt=t=>Ue([Wt(t.length),t]);function hn(t,e,n){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const i=Ue([Bt(Xe(n)),Bt(new Uint8Array(0)),Bt(new Uint8Array(0)),Wt(e)]),s=1;return Qn.hash(Ue([Wt(s),t,i]))}const Rt=t=>Xe(t,"base64pad"),Ft=t=>nn(t,"base64pad"),tl=t=>Xe(t),nl=t=>nn(t),al=t=>Xe(t,"base58btc"),Ke=mt.NONCE_LENGTH,$e=mt.TAG_LENGTH,pn=t=>{const e=new mt.XChaCha20Poly1305(t);return(n,i)=>{const s=an.randomBytes(Ke),l=e.seal(s,n,i);return{ciphertext:l.subarray(0,l.length-$e),tag:l.subarray(l.length-$e),iv:s}}},gn=t=>{const e=new mt.XChaCha20Poly1305(t);return(n,i,s,l)=>e.open(s,Ue([n,i]),l)},fn="ECDH-ES+XC20PKW",yn=256,sl=t=>e=>{const n=Pt.generateKeyPair(),i=Pt.sharedKey(n.secretKey,t),s=hn(i,yn,fn),l=pn(s)(e);return{encryptedKey:l.ciphertext,tag:l.tag,iv:l.iv,epPubKey:n.publicKey}},il=t=>(e,n,i,s)=>{const l=Pt.sharedKey(t,s),a=hn(l,yn,fn);return gn(a)(e,n,i)},ol=t=>Array.isArray(t)?ze.fromSecretKey(Jn.Buffer.from(t)):typeof t=="string"?ze.fromSecretKey(al(t)):ze.fromSecretKey(t),ll=async(t=32)=>{const e=an.randomBytes(t);return Promise.resolve(e)},rl=async(t,e)=>{const n=await sl(Yn(e.toBytes()))(t);return{header:Ft(Ue([n.iv,n.tag,n.epPubKey])),encryptedKey:Ft(n.encryptedKey)}},cl=async(t,e)=>{const n=Rt(t.header),i=n.subarray(0,Ke),s=n.subarray(Ke,Ke+$e),l=n.subarray(Ke+$e),a=Rt(t.encryptedKey),o=ol(e).secretKey,d=Xn(o),h=await il(d)(a,s,i,l);if(h===null)throw new Error("There was a problem decrypting the CEK");return h},ul=async(t,e)=>{const n=await pn(e)(tl(t));return Ft(Ue([n.iv,n.ciphertext,n.tag]))},dl=async(t,e)=>{const n=Rt(t),i=n.subarray(0,Ke),s=n.subarray(Ke,-$e),l=n.subarray(-$e),a=await gn(e)(s,l,i);if(a===null)throw new Error("There was an error decoding the message!");return nl(a)},ml={maxWorkspaceLength:32,maxChannelNameLength:32,maxMemberNameLength:32,maxMessageLength:400,maxCEKLength:100};class hl{constructor(e,n){j(this,"programId",el);j(this,"constants",ml);j(this,"workspace","cgram");j(this,"_coder");j(this,"_events");j(this,"utils",{channel:{isPublic:e=>(e.flags&1)>0,isPermissionless:e=>(e.flags&2)>0},member:{isAuthorized:e=>e.status===Oe.Authorized,isPending:e=>e.status===Oe.Pending,isOwner:e=>e.flags>=255,isAdmin:e=>(e.flags&7)===7,canAddMember:e=>(e.flags&1)>0,canDeleteMember:e=>(e.flags&2)>0,canAuthorizeMember:e=>(e.flags&4)>0},message:{isEncrypted:e=>(e.flags&1)>0}});this.provider=e,this.keypair=n,this._coder=new Zn(to),this._events=new ea(this.programId,e,this._coder)}get connection(){return this.provider.connection}addEventListener(e,n){return this._events.addEventListener(e,(i,s,l)=>{l!=="1111111111111111111111111111111111111111111111111111111111111111"&&n(i,s,l)})}async removeEventListener(e){return await this._events.removeEventListener(e)}setKeypair(e){this.keypair=e}async loadAllChannels(e={}){const n=_e.gpaBuilder().addFilter("accountDiscriminator",zt);return this.workspace!==void 0&&n.addFilter("workspace",this.workspace),e.name&&n.addFilter("name",e.name),e.creator&&n.addFilter("creator",e.creator),(await n.run(this.provider.connection)).map(i=>({pubkey:i.pubkey,data:_e.fromAccountInfo(i.account)[0]}))}async loadChannel(e,n){return _e.fromAccountAddress(this.provider.connection,e,n)}async loadChannelMembers(e){return(await fe.gpaBuilder().addFilter("accountDiscriminator",rt).addFilter("channel",e).run(this.provider.connection)).map(i=>({pubkey:i.pubkey,data:fe.fromAccountInfo(i.account)[0]}))}async loadMemberships(){return(await fe.gpaBuilder().addFilter("accountDiscriminator",rt).addFilter("authority",this.provider.publicKey).run(this.provider.connection)).map(i=>({pubkey:i.pubkey,data:fe.fromAccountInfo(i.account)[0]}))}async loadMembership(e,n){return fe.fromAccountAddress(this.provider.connection,e,n)}async getMembershipPDA(e,n){return n=n!=null?n:this.provider.publicKey,await P.findProgramAddress([e.toBuffer(),n.toBuffer()],this.programId)}async loadDevices(e,n){return(await Ae.gpaBuilder().addFilter("accountDiscriminator",Lt).addFilter("authority",n!=null?n:this.provider.publicKey).addFilter("channel",e).run(this.provider.connection)).map(l=>({pubkey:l.pubkey,data:Ae.fromAccountInfo(l.account)[0]}))}async loadDevice(e,n){return Ae.fromAccountAddress(this.provider.connection,e,n)}async getDevicePDA(e,n){return n=n!=null?n:this.keypair.publicKey,await P.findProgramAddress([e.toBuffer(),n.toBuffer()],this.programId)}async encryptCEK(e,n){return rl(e,n!=null?n:this.keypair.publicKey)}async decryptCEK(e,n){return cl(e,n!=null?n:this.keypair.secretKey)}async encryptMessage(e,n){return ul(e,n)}async decryptMessage(e,n){return dl(e,n)}async initChannel(e,n){var v,w,T,C,H,S;const i=(v=e.channel)!=null?v:ze.generate(),s=await ll(),l=await this.encryptCEK(s),[a]=await this.getMembershipPDA(i.publicKey),[o]=await this.getDevicePDA(a),d=this.provider.publicKey,h=new re,p=this.channelSpace(e.maxMessages);h.add(oe.createAccount({fromPubkey:d,newAccountPubkey:i.publicKey,lamports:await this.connection.getMinimumBalanceForRentExemption(p,n==null?void 0:n.commitment),space:p,programId:this.programId})),h.add(zo({key:this.keypair.publicKey,channel:i.publicKey,membership:a,device:o,authority:d},{data:{workspace:(w=e.workspace)!=null?w:"",name:e.name,public:(T=e.public)!=null?T:!1,permissionless:(C=e.permissionless)!=null?C:!1,memberName:(H=e.memberName)!=null?H:"",maxMessages:e.maxMessages,cek:l}}));let b;try{b=await this.provider.sendAndConfirm(h,[i,this.keypair],n)}catch(x){throw(S=ce(x.code))!=null?S:x}return{signature:b,channel:i,cek:s,cekEncrypted:l}}async deleteChannel({channel:e},n){var o;const i=this.provider.publicKey,[s]=await this.getMembershipPDA(e),l=new re;l.add(vo({channel:e,authority:i,authorityMembership:s}));let a;try{a=await this.provider.sendAndConfirm(l,void 0,n)}catch(d){throw(o=ce(d.code))!=null?o:Be("Unauthorized")}return{signature:a}}async joinChannel(e,n){var h,p;const[i]=await this.getMembershipPDA(e.channel),[s]=await this.getDevicePDA(i),l=this.provider.publicKey,a=this.keypair.publicKey,o=new re;o.add(Fo({channel:e.channel,membership:i,device:s,authority:l,key:a},{data:{name:e.name,authority:(h=e.authority)!=null?h:null}}));let d;try{d=await this.provider.sendAndConfirm(o,[this.keypair],n)}catch(b){throw(p=ce(b.code))!=null?p:b}return{signature:d}}async leaveChannel(e,n){var d;const[i]=await this.getMembershipPDA(e.channel),s=this.provider.publicKey,l=new re,a=await this.loadDevices(e.channel);l.add(Oo({channel:e.channel,membership:i,authority:s,anchorRemainingAccounts:a.map(h=>({pubkey:h.pubkey,isSigner:!1,isWritable:!0}))}));let o;try{o=await this.provider.sendAndConfirm(l,void 0,n)}catch(h){throw(d=ce(h.code))!=null?d:h}return{signature:o}}async addMember(e,n){var w,T,C,H;const i=(w=e.key)!=null?w:e.invitee,[s]=await this.getMembershipPDA(e.channel),[l]=await this.getDevicePDA(s),[a]=await this.getMembershipPDA(e.channel,e.invitee),[o]=await this.getDevicePDA(a,i),d=await this.loadDevice(l);if(!d.cek.encryptedKey)throw Be("Unauthorized");const h=await this.decryptCEK(d.cek),p=await this.encryptCEK(h,i),b=new re;b.add(mo({channel:e.channel,authority:this.provider.publicKey,invitee:e.invitee,authorityMembership:s,inviteeMembership:a,inviteeDevice:o},{data:{name:(T=e.name)!=null?T:"",flags:(C=e.flags)!=null?C:0,cek:p,key:i}}));let v;try{v=await this.provider.sendAndConfirm(b,void 0,n)}catch(S){throw(H=ce(S.code))!=null?H:S}return{signature:v}}async deleteMember(e,n){var h;const[i]=await this.getMembershipPDA(e.channel,e.authority),[s]=await this.getMembershipPDA(e.channel),l=this.provider.publicKey,a=await this.loadDevices(e.channel,e.authority),o=new re;o.add(So({channel:e.channel,membership:i,membershipAuthority:e.authority,authority:l,authorityMembership:s,anchorRemainingAccounts:a.map(p=>({pubkey:p.pubkey,isSigner:!1,isWritable:!0}))}));let d;try{d=await this.provider.sendAndConfirm(o,void 0,n)}catch(p){throw console.log(p),(h=ce(p.code))!=null?h:p}return{signature:d}}async authorizeMember(e,n){var w,T;const i=(w=e.key)!=null?w:e.authority,[s]=await this.getMembershipPDA(e.channel),[l]=await this.getDevicePDA(s),[a]=await this.getMembershipPDA(e.channel,e.authority),[o]=await this.getDevicePDA(a,i),d=await this.loadDevice(l);if(!d.cek.encryptedKey)throw Be("Unauthorized");const h=await this.decryptCEK(d.cek),p=await this.encryptCEK(h,i),b=new re;b.add(fo({channel:e.channel,membership:a,device:o,authority:this.provider.publicKey,authorityMembership:s},{data:{cek:p}}));let v;try{v=await this.provider.sendAndConfirm(b,void 0,n)}catch(C){throw(T=ce(C.code))!=null?T:Be("Unauthorized")}return{signature:v}}async grantAccessMember(e,n){var o;const[i]=await this.getMembershipPDA(e.channel),[s]=await this.getMembershipPDA(e.channel,e.authority),l=new re;l.add(To({channel:e.channel,membership:s,authority:this.provider.publicKey,authorityMembership:i},{data:{flags:e.flags}}));let a;try{a=await this.provider.sendAndConfirm(l,void 0,n)}catch(d){throw(o=ce(d.code))!=null?o:Be("Unauthorized")}return{signature:a}}async addDevice(e,n){var b;const[i]=await this.getMembershipPDA(e.channel),[s]=await this.getDevicePDA(i),[l]=await this.getDevicePDA(i,e.key),a=await this.loadDevice(s);if(!(a!=null&&a.cek.encryptedKey))throw Be("Unauthorized");const o=await this.decryptCEK(a.cek),d=await this.encryptCEK(o,e.key),h=new re;h.add(lo({channel:e.channel,authority:this.provider.publicKey,membership:i,device:l},{data:{cek:d,key:e.key}}));let p;try{p=await this.provider.sendAndConfirm(h,void 0,n)}catch(v){throw(b=ce(v.code))!=null?b:v}return{signature:p}}async deleteDevice(e,n){var d,h;const i=(d=e.authority)!=null?d:this.provider.publicKey,[s]=await this.getMembershipPDA(e.channel,i),[l]=await this.getDevicePDA(s,e.key),a=new re;a.add(wo({channel:e.channel,authority:this.provider.publicKey,device:l,deviceAuthority:i}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(p){throw(h=ce(p.code))!=null?h:p}return{signature:o}}async postMessage(e,n){var d;const[i]=await this.getMembershipPDA(e.channel);let s,l=0;if(e.encrypt){const[h]=await this.getDevicePDA(i),p=await this.loadDevice(h);if(!p.cek.header)throw Be("Unauthorized");const b=await this.decryptCEK(p.cek);s=await this.encryptMessage(e.message,b),l|=1}else s=e.message;const a=new re;a.add(Go({channel:e.channel,membership:i,authority:this.provider.publicKey},{message:String.fromCharCode(l)+s}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(h){throw(d=ce(h.code))!=null?d:h}return{signature:o}}async updateMessage(e,n){var d;const[i]=await this.getMembershipPDA(e.channel);let s,l=0;if(e.encrypt){const[h]=await this.getDevicePDA(i),p=await this.loadDevice(h);if(!p.cek.header)throw Be("Unauthorized");const b=await this.decryptCEK(p.cek);s=await this.encryptMessage(e.newMessage,b),l|=1}else s=e.newMessage;const a=new re;a.add(Jo({channel:e.channel,membership:i,authority:this.provider.publicKey},{id:e.messageId,message:String.fromCharCode(l)+s}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(h){throw(d=ce(h.code))!=null?d:h}return{signature:o}}async deleteMessage(e,n){var a;const[i]=await this.getMembershipPDA(e.channel),s=new re;s.add(xo({channel:e.channel,membership:i,authority:this.provider.publicKey},{id:e.messageId}));let l;try{l=await this.provider.sendAndConfirm(s,void 0,n)}catch(o){throw(a=ce(o.code))!=null?a:o}return{signature:l}}async readMessage(e,n){var a;const[i]=await this.getMembershipPDA(e.channel),s=new re;s.add(Qo({channel:e.channel,membership:i,authority:this.provider.publicKey},{messageId:e.messageId}));let l;try{l=await this.provider.sendAndConfirm(s,void 0,n)}catch(o){throw(a=ce(o.code))!=null?a:o}return{signature:l}}channelSpace(e=1){return _e.byteSize({workspace:"x".repeat(this.constants.maxWorkspaceLength),name:"x".repeat(this.constants.maxChannelNameLength),creator:P.default,createdAt:0,lastMessageAt:0,flags:0,memberCount:0,messageCount:0,maxMessages:e,messages:Array(e).fill({id:0,sender:P.default,createdAt:0,flags:0,content:"x".repeat(this.constants.maxMessageLength)})})}channelMembershipSpace(){return fe.byteSize({authority:P.default,channel:P.default,name:"x".repeat(this.constants.maxMemberNameLength),status:Oe.Authorized,statusTarget:P.default,lastReadMessageId:0,createdAt:0,flags:0,bump:0})}channelDeviceSpace(){return Ae.byteSize({authority:P.default,channel:P.default,key:P.default,cek:{encryptedKey:"x".repeat(this.constants.maxCEKLength),header:"x".repeat(72)},bump:0})}}const Tt=t=>"***** *** *** *** *******",pl="cgram",J=Le("messenger",()=>{const t=pt(),e=Fe(),n=dt(),{noSol:i}=he(),s=A(()=>e.keypair),l={allChannels:[],ownChannels:[],channel:void 0,channelAddr:void 0,channelMembershipAddr:void 0,channelMembership:void 0,channelMembers:[],channelMessages:[],channelLoading:!1,memberDevices:[],channelEvent:void 0,loading:!1,creating:!1,sending:!1},a=de({...l}),o=A(()=>{var f;return new hl(new jt(t.connection,(f=n.value)!=null?f:{publicKey:P.default},jt.defaultOptions()),e.keypair)});let d=[];te(n,f=>{f?b().then():v()},{immediate:!0}),te([s,a.allChannels],()=>{h().then()},{immediate:!0});async function h(){const D=(await o.value.loadMemberships()).map(I=>({pubkey:I.data.channel.toBase58(),status:I.data.status}));a.ownChannels=D}async function p(){console.log("Register events...");for(const f of d)await o.value.removeEventListener(f);d.push(o.value.addEventListener("DeleteMemberEvent",async f=>{var R;if(`${f.authority}`!=`${(R=n.value)==null?void 0:R.publicKey}`)return;const{channel:D}=f,I=a.allChannels.find(ee=>ee.pubkey.toBase58()===D.toBase58());a.channelEvent={channel:I.data.name,address:D.toBase58(),event:"delete"},await h(),`${a.channelAddr}`==`${D}`&&(a.channelMessages=[],a.channel=void 0)})),d.push(o.value.addEventListener("DeleteChannelEvent",async f=>{const{channel:D}=f,I=a.ownChannels.findIndex(R=>R.pubkey===D.toBase58());I!==-1&&(a.ownChannels.splice(I,1),`${f.channel}`==`${a.channelAddr}`&&(a.channelMessages=[],a.channel=void 0))})),d.push(o.value.addEventListener("AddDeviceEvent",async f=>{var D;`${(D=n.value)==null?void 0:D.publicKey}`==`${f.authority}`&&(console.log("[Event] AddDeviceEvent"),`${f.channel}`==`${a.channelAddr}`&&(S(a.channelAddr),He()))})),d.push(o.value.addEventListener("DeleteDeviceEvent",async f=>{var D;`${(D=n.value)==null?void 0:D.publicKey}`==`${f.authority}`&&(console.log("[Event] DeleteDeviceEvent"),`${f.channel}`==`${a.channelAddr}`&&(S(a.channelAddr),He()))})),d.push(o.value.addEventListener("NewMessageEvent",async(f,D,I)=>{if(console.log("[Event] NewMessageEvent",f),`${f.channel}`!=`${a.channelAddr}`)return;let R=f.message.content;if(o.value.utils.message.isEncrypted(f.message))try{const X=await x();R=X?await o.value.decryptMessage(f.message.content,X):Tt(f.message.content)}catch(X){console.log("Error:",X),R=Tt(f.message.content)}a.channelMessages.push({...f.message,content:R})})),d.push(o.value.addEventListener("UpdateMessageEvent",async f=>{console.log("[Event] UpdateMessageEvent",f),`${f.channel}`==`${a.channelAddr}`&&K().then()})),d.push(o.value.addEventListener("DeleteMessageEvent",async f=>{console.log("[Event] DeleteMessageEvent",f),`${f.channel}`==`${a.channelAddr}`&&K().then()})),d.push(o.value.addEventListener("AuthorizeMemberEvent",async f=>{var D,I,R;if(console.log("[Event] AuthorizeMemberEvent",f),`${f.authority}`==`${(D=n.value)==null?void 0:D.publicKey}`){h();const ee=f.channel.toBase58(),X=(R=(I=a.allChannels.find($=>$.pubkey.toBase58()===ee))==null?void 0:I.data.name)!=null?R:"";a.channelEvent={channel:X,address:ee,event:"authorize"}}a.channelAddr&&`${f.channel}`!=`${a.channelAddr}`||(`${f.membership}`==`${a.channelMembershipAddr}`?S(a.channelAddr).then():E().then())})),d.push(o.value.addEventListener("JoinChannelEvent",async f=>{console.log("[Event] JoinChannelEvent",f),`${f.channel}`==`${a.channelAddr}`&&E().then()})),d.push(o.value.addEventListener("LeaveChannelEvent",async f=>{console.log("[Event] LeaveChannelEvent",f),`${f.channel}`==`${a.channelAddr}`&&E().then()}))}async function b(){v(),d=[],a.loading=!0;const f=await o.value.loadAllChannels().then(D=>D.sort((I,R)=>I.data.name.localeCompare(R.data.name)));await p(),a.allChannels=f,a.loading=!1,console.log(a)}function v(){Object.assign(a,l)}async function w(f,D,I){try{a.creating=!0;const{channel:R}=await o.value.initChannel({workspace:pl,name:f,memberName:D,maxMessages:Number(I.maxMessages),public:I.public,permissionless:I.permissionless});await S(R.publicKey),a.channel&&(a.allChannels.push({pubkey:R.publicKey,data:a.channel}),a.allChannels.sort((ee,X)=>ee.data.name.localeCompare(X.data.name)))}finally{a.creating=!1}}async function T(f){const D=new P(f);await o.value.deleteChannel({channel:D}),Ct(f)}async function C(f){await o.value.leaveChannel({channel:f});const D=a.ownChannels.findIndex(I=>I.pubkey===f.toString());a.ownChannels.splice(D,1),a.channelMessages=[],a.channel=void 0}async function H(f,D){const I=new P(f);try{await o.value.joinChannel({channel:I,name:D}),await S(f);const R={pubkey:f.toString(),status:1};a.ownChannels.push(R)}catch(R){console.log(R)}}async function S(f){var D,I,R,ee;a.channelLoading=!0,a.channelMessages=(D=a.channelMessages)!=null?D:[],a.channelMembers=(I=a.channelMembers)!=null?I:[],a.channelMembershipAddr=void 0,a.channelMembership=(R=a.channelMembership)!=null?R:void 0,a.channelAddr=new P(f),a.memberDevices=[];try{if((ee=n.value)!=null&&ee.publicKey)try{const[X]=await o.value.getMembershipPDA(a.channelAddr);a.channelMembershipAddr=X,a.channelMembership=await o.value.loadMembership(X)}catch(X){console.log(X),a.channelMembershipAddr=void 0,a.channelMembership=void 0}await He(),await E(),await K()}catch(X){console.log("Error",X)}finally{a.channelLoading=!1}}async function x(){if(!(!a.channelMembership||!s.value))try{const[f]=await o.value.getMembershipPDA(a.channelAddr),[D]=await o.value.getDevicePDA(f,s.value.publicKey),I=await o.value.loadDevice(D);return await o.value.decryptCEK(I.cek,s.value.secretKey)}catch(f){console.log(f)}}async function K(){if(!a.channelAddr){console.log("Invalid channel");return}a.channel=await o.value.loadChannel(a.channelAddr);const D=o.value.utils.channel.isPublic(a.channel)?null:await x();a.channelMessages=await Promise.all(a.channel.messages.map(async I=>{let ee=o.value.utils.message.isEncrypted(I)?Tt(I.content):I.content;const X=et(I.sender);if(D)try{ee=await o.value.decryptMessage(I.content,D)}catch{console.log(`Failed to decrypt message #${I.id}`)}return{...I,senderDisplayName:X,content:ee}}))}async function E(){if(!a.channelAddr){console.error("Invalid channel");return}a.channelMembers=await _()}async function _(f=a.channelAddr){return await o.value.loadChannelMembers(f)}async function M(f){if(!a.channelAddr){console.log("Please select a channel");return}try{if(!e.isUserHaveSol){i();return}a.sending=!0;let D;a.channel&&(D=o.value.utils.channel.isPublic(a.channel)),await o.value.postMessage({channel:a.channelAddr,message:f,encrypt:!D}),await K()}finally{a.sending=!1}}async function Q(f,D){if(!a.channelAddr){console.log("Please select a channel");return}try{const I={channel:a.channelAddr,messageId:D,newMessage:f,encrypt:!0};a.sending=!0,await o.value.updateMessage(I);const R=qe(I.messageId);R!==-1&&(a.channelMessages[R].content=f)}finally{a.sending=!1}}async function pe(f){if(!a.channelAddr){console.log("Please select a channel");return}const D={channel:a.channelAddr,messageId:f};try{a.sending=!0,await o.value.deleteMessage(D),qe(D.messageId)!==-1&&a.channelMessages.splice(f,1)}catch(I){console.log(`[Error: DeleteMessage] ${I}`)}finally{a.sending=!1}}async function ge(f,D,I,R){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.addMember({channel:a.channelAddr,invitee:new P(f),key:D?new P(D):void 0,name:I,flags:R})}async function Ce(f){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.deleteMember({channel:a.channelAddr,authority:new P(f)})}async function ve(f){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.addDevice({channel:a.channelAddr,key:new P(f)})}async function kt(f){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.deleteDevice({channel:a.channelAddr,key:f})}async function St(f){return(await o.value.loadDevices(a.channelAddr,f)).filter(D=>{var I;return((I=D.data.cek)==null?void 0:I.encryptedKey)===""})[0]}async function He(){a.channelAddr&&a.channelMembership&&(a.memberDevices=await o.value.loadDevices(a.channelAddr,a.channelMembership.authority))}async function je(f){if(!a.channelAddr){console.log("Invalid channel");return}const D=await St(f);await o.value.authorizeMember({channel:a.channelAddr,authority:f,key:D.data.key}),await Y()}async function nt(){await b()}async function Y(){a.channelMembers=await _()}async function z(f){a.channelAddr=f}function qe(f){return a.channelMessages.findIndex(D=>D.id===Number(f))}function Ct(f){const D=a.allChannels.findIndex(I=>I.pubkey.toBase58()===f.toString());a.allChannels.splice(D,1),a.channelMessages=[],a.channel=void 0}async function Dt(f){if(f>Kt)return"extra";const D=o.value.channelSpace(f),I=o.value.channelMembershipSpace(),R=o.value.channelDeviceSpace(),ee=await t.connection.getMinimumBalanceForRentExemption(D+I+R),X=890880*2;return(ee+X)/qt}async function xt(){if(!a.channelAddr)return;const[f]=await o.value.getMembershipPDA(a.channelAddr),[D]=await o.value.getDevicePDA(f);return(await o.value.loadDevice(D)).key.toBase58()}return{channelMessagesCost:Dt,addDevice:ve,deleteDevice:kt,channelAuthorityDevice:xt,state:a,client:o.value,leaveChannel:C,loadChannel:S,joinChannel:H,createChannel:w,deleteChannel:T,postMessage:M,editMessage:Q,deleteMessage:pe,addMember:ge,deleteMember:Ce,authorizeMember:je,refreshList:nt,loadMembers:_,selectChannel:z}}),Xt=2;function gl(){const{connection:t}=pt(),{userBalance:e}=Fe(),n=De(),{notify:i}=Se(),s=L(!1);return{isAirdrop:s,airdropSol:async()=>{try{const a=await t.requestAirdrop(n.publicKey.value,Xt*qt);await t.confirmTransaction(a),i({type:"positive",message:`you got ${Xt} sol`,timeout:2e3,position:"bottom"}),s.value=!0,await e()}catch(a){console.log(a),i({type:"negative",message:String(a),position:"bottom",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})}}}}const bn=15;function fl(){const{createChannel:t,state:e}=J(),{isWalletConnected:n,ok:i,error:s}=he(),l=de({dialog:!1,name:"",memberName:"",maxMessages:bn,public:!1,permissionless:!1,loading:!1});async function a(){if(n())try{if(l.loading=!0,e.allChannels.find(d=>d.data.name===l.name)){s("A channel with the same name already exists");return}await t(l.name,l.memberName,{maxMessages:l.maxMessages,public:l.public,permissionless:l.permissionless}),o(),i("Channel was created!")}catch(d){s(`${d}`),console.log(d)}finally{l.loading=!1}}function o(){l.dialog=!1,l.public=!1,l.loading=!1,l.name="",l.maxMessages=15}return{state:l,submit:a,reset:o}}function yl(){const t=J(),{info:e,ok:n,error:i}=he(),s=de({loading:!1});async function l(){if(!t.state.channelAddr){e("Please select a channel");return}try{s.loading=!0,await t.deleteChannel(t.state.channelAddr),n("Channel was deleted!")}catch(a){console.log("Error",a),i(`Error: ${a}`)}finally{s.loading=!1}}return{state:s,submit:l}}function vn(){const{authorizeMember:t,loadChannel:e,state:n}=J(),{ok:i,error:s}=he(),l=de({loading:!1,dialog:!1});async function a(o){var d;try{l.loading=!0,await t(o),await e((d=n.channelAddr)!=null?d:""),i("Member was authorized")}catch(h){s(`Error: ${h}`),console.log(h)}finally{l.loading=!1}}return{state:l,submit:a}}function bl(){const{state:t,addMember:e,loadChannel:n}=J(),{ok:i,info:s,error:l,noSol:a}=he(),o=Fe(),d=de({dialog:!1,loading:!1});async function h(b){var v;if(d.loading=!0,!t.channelAddr){s("Please select a channel");return}try{if(!o.isUserHaveSol){a();return}return await e(b.wallet,b.key,b.name),await n((v=t.channelAddr)!=null?v:""),i("Member was added"),!0}catch(w){l(`Error: ${w}`),console.log(w)}finally{d.loading=!1,d.dialog=!1}return!1}function p(){d.loading=!1,d.dialog=!1}return{state:d,submit:h,reset:p}}function _n(){const{deleteMember:t,loadChannel:e,state:n}=J(),{ok:i,error:s}=he(),l=de({loading:!1});async function a(o){var d;try{l.loading=!0,await t(o),await e((d=n.channelAddr)!=null?d:""),i("Member was deleted")}catch(h){s(`Error: ${h}`),console.log(h)}finally{l.loading=!1}}return{state:l,submit:a}}function vl(){const{state:t,joinChannel:e}=J(),{ok:n,info:i,error:s,noSol:l}=he(),a=Fe(),o=de({dialog:!1,loading:!1,name:""});async function d(){if(!t.channelAddr){i("Please select a channel");return}o.loading=!0;try{if(!a.isUserHaveSol){l();return}await e(t.channelAddr,o.name),h(),n("Request was sent")}catch(p){console.log("Error",p),s(`Error: ${p}`)}finally{o.loading=!1}}function h(){o.loading=!1,o.dialog=!1,o.name=""}return{state:o,submit:d,reset:h}}function _l(){const t=J(),{info:e,ok:n,error:i}=he(),s=de({loading:!1});async function l(){if(!t.state.channelAddr){e("Please select a channel");return}try{s.loading=!0,await t.leaveChannel(t.state.channelAddr),n("Channel was abandoned!")}catch(a){console.log("Error",a),i(`Error: ${a}`)}finally{s.loading=!1}}return{state:s,submit:l}}function Al(){const t=J(),{ok:e,error:n,noSol:i}=he(),s=Fe(),l=de({loading:!1});async function a(o){try{if(l.loading=!0,!s.isUserHaveSol){i();return}await t.addDevice(o),e("device added")}catch{n("Invalid Device Key")}finally{l.loading=!1}}return{state:l,submit:a}}function wl(){const t=J(),{ok:e}=he(),n=de({loading:!1});async function i(s){try{n.loading=!0,await t.deleteDevice(s),e("device removed")}finally{n.loading=!1}}return{state:n,submit:i}}function he(){const t=De(),{airdropSol:e}=gl(),{notify:n}=Se(),i=d=>n({type:"info",position:"bottom",message:d,timeout:4e3}),s=d=>n({type:"negative",position:"bottom",message:d,timeout:4e3}),l=(d,h="bottom")=>n({type:"positive",message:d,timeout:4e3,position:h}),a=()=>n({type:"warning",message:"Your wallet has insufficient SOL balance",position:"bottom",timeout:0,actions:[{label:"GET SOL",class:"btn--no-hover q-mr-auto",padding:"0 15px 0 10px",size:"14px",color:"black",noDismiss:!0,handler:()=>e()},{label:"Dismiss",class:"btn--no-hover",padding:"0 15px 0 10px",size:"14px",color:"black"}]});function o(){return t.publicKey.value?!0:(i("Please connect wallet"),!1)}return{ok:l,info:i,error:s,noSol:a,isWalletConnected:o}}const Ml=O({__name:"ImportDeviceDialog",emits:["handleImport","closeImportModal"],setup(t,{emit:e}){const{ok:n,error:i}=he(),s=L(),l=()=>{const a=s.value[0],o=new FileReader;o.addEventListener("load",()=>{const d=JSON.parse(o.result);d.backupKey||i("Invalid Key"),e("handleImport",d.backupKey),e("closeImportModal"),n("secret key imported")},!1),a&&o.readAsText(a)};return(a,o)=>(g(),k(ye,null,{default:u(()=>[r(ne,{flat:"",square:""},{default:u(()=>[r(F,{class:"q-pa-md",style:{height:"20px"}},{default:u(()=>[r(be,{modelValue:c(s),"onUpdate:modelValue":o[0]||(o[0]=d=>se(s)?s.value=d:null),borderless:"",type:"file"},null,8,["modelValue"])]),_:1}),r(F,{class:"q-pa-md"},{default:u(()=>[r(W,{class:"dialog-submit-btn",disabled:!c(s),flat:"",square:"",onClick:l},{default:u(()=>[N(" import device key ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}))}}),kl=O({__name:"AddDeviceDialog",props:{addLoading:Boolean},emits:["handleAddDevice"],setup(t,{emit:e}){const n=L(""),i=()=>e("handleAddDevice",n.value);return(s,l)=>(g(),k(ye,null,{default:u(()=>[r(ne,{flat:"",square:"",class:"add-device-dialog"},{default:u(()=>[r(F,{class:"q-px-md q-pt-md justify-center items-center text-body1"},{default:u(()=>[N(" Enter device key ")]),_:1}),r(F,{class:"q-pa-md justify-center"},{default:u(()=>[r(Je,{onSubmit:i},{default:u(()=>[r(be,{modelValue:c(n),"onUpdate:modelValue":l[0]||(l[0]=a=>se(n)?n.value=a:null),class:"input",label:"Device key",dense:"","lazy-rules":"",rules:[a=>a&&a.length>0||"Please enter device key"]},null,8,["modelValue","rules"]),r(W,{type:"submit",class:"dialog-submit-btn",flat:"",square:""},{default:u(()=>[N(" add device ")]),_:1})]),_:1})]),_:1}),r(Ge,{showing:t.addLoading},null,8,["showing"])]),_:1})]),_:1}))}});const Sl=le(kl,[["__scopeId","data-v-fc061ba6"]]),An="data:image/png;base64,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",Cl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAY8AAACtCAMAAAB/VwNcAAAA51BMVEX///+ZmZlFWmTx8fHg4OCRkZH/AACirbJzg4uDg4Ojo6NSZW7z9fX/FxfR1tn/5+dcb3f/7+//ODj/CAj/9/f/yMj/iIj/SEj/ICD/39//19f/p6f/l5doeYH/aGj/V1e6wsX/n5//d3f/Dw/o6+zc4OL/t7eNmqD/YGD/KCjj5ujFzM+Woqj2BATL0dNxgYhPVV90Q0uiLTLgDxH7+/v19vf/v79/jpViTFTJGhytt7v/r6//f39/PkT8Pz+TNDr/MDC3Iye6wsbkxMTqmppcT1e/HyPwaWnyW1tuRk70TU2tKCzoCw0KeumnAAAFA0lEQVR42uzbaVfTQBTG8WuKaTRdUrXW3arFIrTQRVlUENy37/95LGnINKZoSEbz0Pv8j+f4bo5nfieEmxmF/b3KstZkSVeKJowely16YEUPrOiBFT2wogdW9MCKHljRAyt6YEUPrOiBFT2wogdW9MCKHljRAyt6YDUHuH4WPUqukgDh81F2lUUQBT+vWrt3BbnKAoiC90fr2HU79wW3igHR8D7fdU+rv20KaMp+v7p30533+LlApsxDdm+4UXduIz4k2jxE7j06e0ZubrQFLX0eIq0HL9yoFw9aApVGj1ntjfgheXRPgFLqIdK8fceNuvHklqCk1mPW88du1LNHKFOiZg+R5tu6GwYzJf5PjzXEPh65UfUvH9ZA0/J8hN19WnfBp0RVHiK3noBPico8winxWfyQ4E2Jy7pWNMHuFvCUuKyrRRP42hvIn1L0eZx+SoGcEtV6JKdErE8pSj3CTylgU6Juj1lvOvGU+BTlU4pmj8SU2IGcEpV5zLoPPSXq80hOibuClUaP8FMK6JSo0wN3Slzt71dZD9yPYaZExR6z2nBTom6P5IE7wpSo3SP8lAI0JdIjnBJhDtzpMe9+B2NKXNH7DDn68DWeEr9/XCsrPh/LD9wzT4lwz8dKVfq1bHr86Vp2himRHvZLf0rJPiXS47xW4lo2PbCmRHpgXcumR7YpsX7elEiPDF3ea9n0uNC17PSUqNvDyVfBpfZPhpHI8KRt719Fj9xLjd5NFw7c6VGah+nbydBMifQo3eP0Ifm5MCXSozQP0+Hn+MB9YUrcd5ZHD9se6ZZcy24NfzjnRI9/7fHbteymiNx23YMRPUrySE+Jx7O/pvv0KMUjfS17TjM8pEd5HuZatmlCj/I8zKcU08GIHuV5mLPEuOknepTkYaq7puGYHiV7vHETvaOHRQ+vGvV6eyfjUh032edReil65PIIemJ6+TDTUs2jo3oSZPopvRQ98nhsyWK1h9mXGo8PJ5ODg2n0Ekkvpc/D39z0C3rUpBE48xrhLuZYan88nkxG6aXUeXgiXkEPkaoTb2LF7KKVpehRbBMbXbOLVpaiR6FNXPe2RV7tWFyKHnk30byPX1pcih75N9GryTyLS9EjxybGebO6ItaWokfeTTRVi3v0+9FSWjx8b95AZODN83E8dkR2dHlsSqpNHA9PxKMHPc7tMv28qknfrkfgn3r4gSYPi+/zhwPfqkdQ6/VF+r1aQI+c5x9WPTyRV+Efjx65PLqy7lvzCNcL6/LnVV4PA2LBIwLpqnqf2/Tw1w2IFQ9nW2Rb1+9XljyCQXjWLQbEznz+/r2y+dySx5bEDSx5RCn1KHheO6hJlGH116VX+OjXLKXLw8p9n76I9J2qxG0VvhphlqLHRT32Qg6nIWf1gsJXh8xS9LioRyPkcIJq1F7+pXyvmmhP230GGx5eY+/vS/H/n0Pf36UH3ibSA2sT6YG1ifTA2kR6YG0iPbA2kR5Ym0gPrE2kB9Ym0gNrE+mBtYn0wNpEemBtol6PlY8eWNEDK3pgRQ+s6IEVPbCiB1b0wIoeWBX3uMKQogdW9MCKHljRAyt6YEUPrOiBFT2wogdW9MCKHljRAyt6YEUPrOiBFT2wogdW9MCKHljRAyt6YEWPX+3RsQAAAADAIH/raXQshSx/WP6w/GH5w/KH5Q/LH5Y/LH9Y/rD8YfnD8oflD8sflj8sf1j+sPxh+cMScngRsVFgMFsAAAAASUVORK5CYII=",Dl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXMAAACSCAMAAACAC9ozAAAA7VBMVEX///+ZmZlFWmTg4OD/AACRkZHx8fFzg4uirbKDg4P09vairLFSZW7R1tlcb3f/MzP/KCj/9/f/EBD/p6f/YGD/UFCiLTL/GBj/Bwf/5+f/19f/n59oeYH/f3//7+//39//z8+6wsX/cHDo6+zc4OKNmqD/l5f/j4//aGjj5ujFzM//x8f/r6+Woqj/WFj/eHj/SEjL0dP/v79xgYj/ICD/t7f/h4dXUlv/QEDJGRz7+/ujo6N/jpWLOD6tt7vzBga6wsaUMzniDhDi0tLkxMTlvb3poaHsjIzufn7vd3fxYmJoSVH0TU16QUizJSm4ULjOAAAEhUlEQVR42uzaaVPaUBTG8VO4JZZGEpAIiCJiQSiyyOLG2I52X7//x2kIyAEMWOQmucv5v8qrO/CbDOQZAGp1icdGo9HsOg4+vdokoNaYI3qCzMMpgZG5f8qYF3oHoGsRmactxuxKD7QsIvMe88pk90qgXRGZl/PssW7tGPQqInMoOwyzO2XQqLDNsfReNofsuex5GjQpCnOsWbGRPe/UCqBDQZnH/7fP3y2G2T++xDUt3E1U2mtnkH1QHwIVxg4dVgbInmkXNXyEjGL7H1xaDLs+03eoznqzSfCyCkUnj+x2pQl693qT4OWd13PI7g5VbR4hozDHykcWYxoP1VDNseOawzBLr6EagTkO1Qyy5+r6DNWIzP2HalGPoRqROXZwds0w61KnR8jQzbFSUdOhGok5NqxrOFT5mtNQlcNcv6Eqyn8t0gtDNaf0UBXFfFy5YzHMUXaoimTuDdUuw6wjJYeqYOZ+QxVUSzxz9YeqmOZqD9XNzOOh9unb7zyy535+jauRsPe5/1BV4k95opu7lZeGqvSPkBKYuxVqKg1VOcy9oZpVZahKYz4ZqrYKQ1Uqc0WGqmzmbiXZh6qE5uN6C0O1LddQldTcG6oWwyyJfuuQ13zyi2oe2QeVHmBZcW99Ac1jG/Xn74PfUO2xTBGP2rCtXxWmpLnbr/0HhnW9odoZXxVifpE5n3d3dX8zP1Q7Tdu77e9i/pE5n3eHQ3Wum6vYisic07trTocq9vGOzIM09zo+6y7f6mQenDkOVWfxVifzwMyx4vKtTuaBmztPPtXJPGDzdN7nAYbMAzUvHE3bx+7JfGWiDnYyJ3MyJ/O1Rxlvp3246HM8isxXHpU6Bez2kONRZL7qqPcwX/KQ41FqmpuNhrmleRJ2U9PLXZTic5SS5gaAsaU5wE5sBpVAKS5HkfnzULsnKMXlKDJ/FuqdceFK9TkeRebroPA78JbjUWS+HspIwiSOR5H5Cig8z+0EgNtRZL4OCtvZ3rxanR6lkrlpTGoBtKaXpjjmfYC+euYNeFJDHHMDwCBzMhfqsyUJVb7mKXNsbqZUM+f4HXrYMrmap5KnVYDqaTJF5v/YtWMVBmEojMK3WSJFfQdRF8HBPYPv/1SFSyMtaDN4h/RyDp3/4RusklxPRVPzKPLUX8T8cmqQqTUz1z1t4Nnyy1zRjcwz+uDuP9TSvJ0U3c48bCKbv/cWI/N+1bNLUXQbc23fHX6HGpkvcrSamWuOzW+eza1PycWPR814/2zumPJnbnLXYhaROTRytJicQWsL5mdTSclDJ7mxN7hrkacwP5vqlDz0zbt04xUoNl8lj2fQFuaxS9yd+5NLhphjjjnmlU9hjnm1UJhjjjnmlU9hjnm1UJhjjjnmlU9VaO4+zIth7iDMi2HuIMyLYe4gzIth7iDMbbM3f5BBmFfeqx06pgEAAGAY5N/1JOxvQALOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wEDZ33s0IEYIBgAAAAASUVORK5CYII=",xl="data:image/png;base64,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",Il=m("span",{class:"add-title q-pb-md q-pt-sm"}," The Backup Key can be used to restore admin rights in case you lose access to your channels ",-1),El=m("span",{class:"instructions-step q-pb-md"}," 1. Select Devices from the menu. ",-1),Bl=["src"],Tl=m("span",{class:"instructions-step"},"2. Click Export and safely store your Backup Key. ",-1),Nl=["src"],Pl=m("span",{class:"instructions-step"},"3. In order to restore your admin privileges, select Import from the menu.",-1),Kl=["src"],zl=m("span",{class:"instructions-step"},"4. In the pop-up window, click Choose File to select your backup key file, then click Import Device Key. ",-1),Ll=["src"],Wl=m("span",{class:"text-weight-medium"},"Done, your device key has been successfully replaced. ",-1),Rl=O({__name:"BackupDeviceTab",setup(t){return(e,n)=>(g(),k(sn,{class:"add-device-instructions"},{default:u(()=>[r(ke,null,{default:u(()=>[V((g(),k(F,{dense:"",class:"q-pa-none"},{default:u(()=>[r(U,null,{default:u(()=>[Il]),_:1})]),_:1})),[[ae]]),r(Te),V((g(),k(F,{dense:"",class:"q-py-md"},{default:u(()=>[r(U,{class:"q-pb-none"},{default:u(()=>[El,m("img",{src:c(An),alt:"step"},null,8,Bl)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-sm"},{default:u(()=>[r(U,null,{default:u(()=>[Tl,m("img",{src:c(Cl),alt:"step"},null,8,Nl)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-sm"},{default:u(()=>[r(U,null,{default:u(()=>[Pl,m("img",{src:c(Dl),alt:"step"},null,8,Kl)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-sm"},{default:u(()=>[r(U,null,{default:u(()=>[zl,m("img",{src:c(xl),alt:"step"},null,8,Ll)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-sm"},{default:u(()=>[r(U,null,{default:u(()=>[Wl]),_:1})]),_:1})),[[ae]])]),_:1})]),_:1}))}}),Fl="/assets/step_2.80ee96fc.png",Hl="/assets/step_3.ab364468.png",ql="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAboAAACZCAMAAABuZg+bAAAA1VBMVEX///+ZmZlFWmSPnKLg4ODx8fH/AACRkZFzg4vHztGirbKDg4P/v7//f3//QECjo6Ortbnj5uhSZW75+vqirLGXoqj/EhLc4OL09vbR1tn/Y2P/KCj/r6+dqa3/MDD/9/f/5+fW2t3/19fHzdC7w8f/UFD/SEiKOD7/7+//x8f/l5f/h4f/eHj/ODj/ICDoCw3/39//z8//t7f/p6f/n5//j49oeYH/WFjp7O2kr7OLmJ5cb3f/cHDYExX/CAjg4+XFzM96QEh/jpVcT1e3IyeiLTKvub33Iv49AAAEbElEQVR42uzbbVPaQBiF4ae0SYMNNEAjoCJisWptre+i+K7t//9JRTYGHCAgm8U9cO5xRvziB64h5DCLsFnnDOuTDOlDYsLGRDpGOvhIBxvpYCMdbKSDjXSwkQ420sFGOthIBxvpYCMdbKSDjXSwkQ420sGmrL6+RDqcnFd2fNUB5fTb8YKJlNNnx/c6qJyeHW9TsOIdJmykg410sJEONtLBRjrYSAfb5HRfEhOmkWG6z4nJJ2ZFU9AxeyMdbKSDjXSwkQ420sFGOthIBxvpYONnmLCRDjbSwUY62EgHG+lgIx1spIONdLCRDjbSwZZMx2NFFsdXHWykg410sJEONtLBlhLdri9sTFbS1ddd193P5453hY3MSrojN271R27tUNiQrKTbuXFft36eO9oU9ior6WRza90d7PdKzj8QFmUn3XO7x7kfq4N+N/mVPX9DZl9mugz/q4/TNYtx4J/k8suDgMv5q1O/LkmR7n3pVHX/56/hgL9++jIi0tlAp9rxT1fyNwN+o1YE6eyhU234eyv5mC1hRZDONjrVwVHu/Lc72PpWvCJIZyedanMtN3pFkM5musQV4XZXBOlspuutiP0RK2KHdDbTjV8RpLOZLl4RVyNWxMku6Wymm2BFkM5mOtWBn7AiSGcz3QQrgnQ206kONVaEcTrvW1SQ9TTpgu9R1dtgTug0VoRpunZLepXOdOhqjvR1MU90062IjTWjdHfSX+VMg64s/ZUu5o3uzStizb2+H6VTLBSKmnQVqbajh1VlNzVdSQq16GGhazeXdG9YEXuuOxLPE/E06USWMjGdo+ympBPJfozpKs9280s30Yo47/5xvT0LumozstOnKzSe7eacbsyKWHZVf7bN05W9bMfOS4OuFdx27IJFoEtaETGeWbo7UZX06coStTh0CStC4Zmk8yqi0qcLSgtKl7AiFF76dCqvU1ObTuF1aiwonWrnfBDPFJ1qSZ+u2VS/swtNJ1vugN3TY9FThSKhpyraQxeIBKQTWe2RXT/93b5/zHQqyEAF0llWvTPQI7Io0oFU3xj2fKd4wazIZbp0tfCZLqwtPF3/821kkp+FxVTpaiWnKdJ0SjXSGaRTeanSBSKl7k9AOtN0TSkX07xgNqRbgxfMGdApu7TolF2Dtynm6YplZZfeHeatyC3vMM3StcNvnQKJ7fTpujUa/DTFMN2dxIVp0alIl0inf8AhrMhLXt/1s6V9wEEVtsQhXULa4+BSpDPLlyTuTvdYUa8y6QzSPXTlMlV5qdXWPMzXy6mRziBdtSuXaS9FPUx/hDYMsq/6N+/Hit6Zzqs+8OB6FBgdv3PQi3SkIx3pSDdhpCMd6UhHugkjHelIRzrSTRjpSEc60pFuwkhHuoWJdLCRDjbSwUY62EgHG+lgIx1spIONdLCNofvAQCMdbKSDjXSwkQ420sFGOthIBxvp/rdHByQAAAAAgv6/boeQF2Rdx7qOdR3rOtZ1rOtY17GuY13Huo51Hes61nWs61jXsQIoIffa0tNzZgAAAABJRU5ErkJggg==",Ol="/assets/step_5.6d31bfa7.png",Ul="/assets/step_6.2834efd1.png",$l=m("span",{class:"add-title q-pb-none q-pt-sm"}," For security purposes, you can only access your channels from a single device. If you try to view them from another device, all messages will appear encrypted. ",-1),Gl=m("span",{class:"add-title q-pb-md q-pt-sm"}," In order to add a new device, follow these instructions: ",-1),jl=m("span",{class:"instructions-step"}," 1. Log in with your new device and select Devices from the menu ",-1),Vl=["src"],Ql=m("span",{class:"instructions-step"}," 2. Copy your new device key. ",-1),Yl=["src"],Xl=m("span",{class:"instructions-step"},"3. On your main device, select the channel to which you will add the device",-1),Jl=["src"],Zl=m("span",{class:"instructions-step"},"4. Pull up the Devices window and click Add Device.",-1),er=["src"],tr=m("span",{class:"instructions-step"},"5. Enter the previously copied key and click Add.",-1),nr=["src"],ar=m("span",{class:"instructions-step"},"6. Confirm the transaction",-1),sr=["src"],ir=m("span",{class:"text-weight-medium"},"Congratulations, you have added a new device. ",-1),or=O({__name:"AddDeviceTab",setup(t){return(e,n)=>(g(),k(sn,{class:"add-device-instructions"},{default:u(()=>[r(ke,null,{default:u(()=>[V((g(),k(F,{dense:"",class:"q-pa-none"},{default:u(()=>[r(U,null,{default:u(()=>[$l,Gl]),_:1})]),_:1})),[[ae]]),r(Te),V((g(),k(F,{dense:"",class:"q-py-md"},{default:u(()=>[r(U,null,{default:u(()=>[jl,m("img",{src:c(An),alt:"step"},null,8,Vl)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-md"},{default:u(()=>[r(U,null,{default:u(()=>[Ql,m("img",{src:c(Fl),alt:"step"},null,8,Yl)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-sm"},{default:u(()=>[r(U,null,{default:u(()=>[Xl,m("img",{src:c(Hl),alt:"step"},null,8,Jl)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"instructions-step"},{default:u(()=>[r(U,null,{default:u(()=>[Zl,m("img",{src:c(ql),alt:"step"},null,8,er)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-sm"},{default:u(()=>[r(U,null,{default:u(()=>[tr,m("img",{src:c(Ol),alt:"step"},null,8,nr)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-sm"},{default:u(()=>[r(U,null,{default:u(()=>[ar,m("img",{src:c(Ul),alt:"step"},null,8,sr)]),_:1})]),_:1})),[[ae]]),V((g(),k(F,{dense:"",class:"q-py-sm"},{default:u(()=>[r(U,null,{default:u(()=>[ir]),_:1})]),_:1})),[[ae]])]),_:1})]),_:1}))}}),lr=m("span",{class:"text-h6"},"Instructions",-1),rr=O({__name:"InstructionsDialog",setup(t){const e=L("add");return(n,i)=>{const s=or,l=Rl;return g(),k(ye,null,{default:u(()=>[r(ne,{square:"",flat:"",class:"instructions-card"},{default:u(()=>[r(G,{class:"row items-center justify-between q-pb-sm"},{default:u(()=>[lr,V(r(W,{size:"10px",flat:"",round:"",dense:"",icon:c(ct)},null,8,["icon"]),[[Pe]])]),_:1}),r(G,{class:"q-pt-none"},{default:u(()=>[r(ta,{modelValue:c(e),"onUpdate:modelValue":i[0]||(i[0]=a=>se(e)?e.value=a:null),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:u(()=>[r(Vt,{name:"add",label:"Add Device"}),r(Vt,{name:"backup",label:"backup"})]),_:1},8,["modelValue"]),r(na,{modelValue:c(e),"onUpdate:modelValue":i[1]||(i[1]=a=>se(e)?e.value=a:null),animated:"",class:"panels-height"},{default:u(()=>[r(s,{name:"add"}),r(l,{name:"backup"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}});const cr=O({props:{text:{type:String,default:""},padding:{type:String,default:"0"}}});const ur=["innerHTML"];function dr(t,e,n,i,s,l){return g(),k(aa,{class:"bg-white text-primary shadow-1 custom-tooltip",style:{"border-radius":"0"},anchor:"top middle",self:"bottom middle"},{default:u(()=>[m("div",{style:Ze({fontSize:"11px",padding:`${t.padding}`}),innerHTML:t.text},null,12,ur)]),_:1})}const Ee=le(cr,[["render",dr]]),mr="/assets/help-btn.06005d5c.svg",hr={class:"q-gutter-md row justify-between q-px-sm",style:{width:"100%"}},pr=["src"],gr=O({__name:"DevicesControl",props:{addLoading:Boolean,isAuthorityDevice:Boolean,devices:Object},emits:["handleExport","handleAddDevice","handleImport"],setup(t,{emit:e}){const n=t,i=L(!1),s=L(!1),l=L(!1),a=async p=>{await e("handleAddDevice",p)};te(()=>n.addLoading,p=>{p||(i.value=!1)});const o=p=>e("handleImport",p),d=()=>s.value=!1,h=()=>{e("handleExport")};return(p,b)=>{const v=Ee,w=rr,T=Sl,C=Ml;return g(),B(Z,null,[m("div",hr,[r(W,{class:"q-mr-auto q-ml-none device-btn instructions-btn",round:"",flat:"",size:"16px",color:"indigo-14",onClick:b[1]||(b[1]=H=>l.value=!0)},{default:u(()=>[m("img",{src:c(mr),alt:"help"},null,8,pr),r(v,{text:"Instructions"}),r(w,{modelValue:c(l),"onUpdate:modelValue":b[0]||(b[0]=H=>se(l)?l.value=H:null)},null,8,["modelValue"])]),_:1}),r(W,{class:"control-btn device-btn",square:"",flat:"",disabled:!t.devices.length,onClick:b[2]||(b[2]=H=>i.value=!0)},{default:u(()=>[r(v,{text:"Add new device"}),r(c(on))]),_:1},8,["disabled"]),r(W,{class:"control-btn device-btn",square:"",flat:"",onClick:b[3]||(b[3]=H=>s.value=!0)},{default:u(()=>[r(v,{text:"Import device key"}),r(c(sa))]),_:1}),r(W,{class:"control-btn device-btn",square:"",flat:"",disabled:!t.isAuthorityDevice&&t.devices.length,onClick:h},{default:u(()=>[r(v,{text:"Export device key"}),r(c(ia))]),_:1},8,["disabled"])]),r(T,{modelValue:c(i),"onUpdate:modelValue":b[4]||(b[4]=H=>se(i)?i.value=H:null),"add-loading":t.addLoading,onHandleAddDevice:a},null,8,["modelValue","add-loading"]),r(C,{modelValue:c(s),"onUpdate:modelValue":b[5]||(b[5]=H=>se(s)?s.value=H:null),"is-import-modal":c(s),onHandleImport:o,onCloseImportModal:d},null,8,["modelValue","is-import-modal"])],64)}}});const fr=le(gr,[["__scopeId","data-v-6796ea53"]]),yr=t=>(We("data-v-4f360cae"),t=t(),Re(),t),br=yr(()=>m("div",{class:"text-body1 text-blue-grey-8 text-left device"}," Devices ",-1)),vr={class:"devices-item__key"},_r=O({__name:"DevicesList",props:{selectDevicekey:Object,deleteLoading:Boolean,devices:Object,authorityDevice:String},emits:["handleSelect","handleDelete"],setup(t,{emit:e}){const n=t,i=a=>e("handleSelect",a),s=a=>e("handleDelete",a),l=a=>a.toBase58()===n.authorityDevice;return(a,o)=>{const d=Ee;return g(),B(Z,null,[br,r(ke,{bordered:"",separator:"",class:"devices-list"},{default:u(()=>[(g(!0),B(Z,null,ue(t.devices,h=>(g(),k(F,{key:h,"active-class":"bg-blue-grey-8 text-white active",class:Me(["devices-item",{"authority-device":l(h.data.key)}]),clickable:"",active:t.selectDevicekey===h.data.key,onClick:p=>i(h.data.key)},{default:u(()=>[m("span",vr,[l(h.data.key)?(g(),k(d,{key:0,text:"Authority device"})):ie("",!0),N(" "+q(h.data.key),1)]),r(ut),l(h.data.key)?ie("",!0):(g(),k(oa,{key:0,name:c(ct),size:"18px",class:"delete-device-btn",onClick:p=>s(h.data.key)},{default:u(()=>[r(d,{text:"Delete device"})]),_:2},1032,["name","onClick"]))]),_:2},1032,["class","active","onClick"]))),128))]),_:1}),r(Ge,{showing:t.deleteLoading},null,8,["showing"])],64)}}});const Ar=le(_r,[["__scopeId","data-v-4f360cae"]]),wr=t=>(We("data-v-3809cf5d"),t=t(),Re(),t),Mr=wr(()=>m("div",{class:"text-body1 text-blue-grey-8 text-left"}," Device Key ",-1)),kr={class:"text-left q-pb-xs"},Sr=["title"],Cr=O({__name:"DevicesDialog",props:{authorityDevice:String},emits:["regenerate","channelAuthorityDevice","loadChannel"],setup(t,{emit:e}){const n=t,i=Fe(),{state:s}=J();he();const l=Al(),a=wl(),o=L(),d=A(()=>{var S;return n.authorityDevice===((S=o.value)==null?void 0:S.toBase58())}),h=()=>{var S,x;return ua(String((x=(S=i.keypair)==null?void 0:S.publicKey)!=null?x:""))},p=A(()=>s.memberDevices),b=A(()=>{var S,x;return la.xs?et((S=i.keypair)==null?void 0:S.publicKey,12):(x=i.keypair)==null?void 0:x.publicKey}),v=S=>o.value=S,w=S=>{l.submit(S)},T=()=>{i.exportKey()},C=S=>{i.importKey(S),setTimeout(()=>e("loadChannel"),1e3)},H=S=>{a.submit(S)};return(S,x)=>{const K=Ee,E=Ar,_=fr;return g(),k(ye,{"transition-duration":"150","transition-show":"fade","transition-hide":"fade"},{default:u(()=>[r(ne,{square:"",flat:"",class:"dialog-wrapper"},{default:u(()=>[r(G,{class:"row items-center q-pb-none q-pr-sm q-pt-sm"},{default:u(()=>[r(ut),V(r(W,{size:"10px",flat:"",round:"",dense:"",icon:c(ct)},null,8,["icon"]),[[Pe]])]),_:1}),r(G,{class:"q-py-none"},{default:u(()=>{var M;return[Mr,m("div",kr,[r(W,{class:"copy-btn",size:"12px",flat:"",round:"",dense:"",icon:c(ra),onClick:h},{default:u(()=>[r(K,{text:"Copy to clipboard"})]),_:1},8,["icon"]),m("span",{class:"text-body2",title:(M=c(i).keypair)==null?void 0:M.publicKey},q(c(b)),9,Sr)])]}),_:1}),r(Te),r(G,null,{default:u(()=>[r(E,{devices:c(p),"authority-device":t.authorityDevice,"select-devicekey":c(o),"delete-loading":c(a).state.loading,onHandleSelect:v,onHandleDelete:H},null,8,["devices","authority-device","select-devicekey","delete-loading"])]),_:1}),r(Te),r(ca,{align:"right"},{default:u(()=>[r(_,{"add-loading":c(l).state.loading,"is-authority-device":c(d),devices:c(p),onHandleExport:T,onHandleAddDevice:w,onHandleImport:C},null,8,["add-loading","is-authority-device","devices"])]),_:1})]),_:1})]),_:1})}}});const Dr=le(Cr,[["__scopeId","data-v-3809cf5d"]]),Ne=Le("channel",()=>{const t=dt(),{state:e,client:n}=J(),i=A(()=>e.channelLoading),s=A(()=>e.sending),l=A(()=>{var _;return!!((_=t.value)!=null&&_.publicKey)}),a=A(()=>!!e.channel&&n.utils.channel.isPublic(e.channel)),o=A(()=>!!e.channel&&n.utils.channel.isPermissionless(e.channel)),d=A(()=>{var _;return((_=e.channelMembership)==null?void 0:_.status)===0}),h=A(()=>{var _;return((_=e.channelMembership)==null?void 0:_.status)===1}),p=A(()=>{var _,M,Q;return String((_=e.channel)==null?void 0:_.creator)===String((Q=(M=t.value)==null?void 0:M.publicKey)!=null?Q:"-")}),b=A(()=>!!e.channelMembership&&n.utils.member.canAddMember(e.channelMembership)),v=A(()=>!!e.channelMembership&&n.utils.member.canAuthorizeMember(e.channelMembership)),w=A(()=>!!e.channelMembership&&n.utils.member.canDeleteMember(e.channelMembership)),T=A(()=>!!e.channelMembership&&n.utils.member.isAdmin(e.channelMembership)),C=A(()=>!!e.channelMembership&&n.utils.member.isOwner(e.channelMembership)),H=A(()=>l.value&&!!e.channel&&!e.loading&&!d.value),S=A(()=>l.value),x=A(()=>C.value),K=A(()=>!e.sending&&(a.value||d.value));return{ownChannels:A(()=>e.allChannels.filter(_=>{var M;return!!e.ownChannels.find(Q=>Q.pubkey===_.pubkey.toBase58())||_.data.flags===1||_.data.creator.toBase58()===String((M=t.value)==null?void 0:M.publicKey)})),isChannelLoading:i,isSendMessage:s,isPublicChannel:a,isWalletConnected:l,isPermissionlessChannel:o,isAuthorizedMember:d,isPendingMember:h,isChannelCreator:p,isAdmin:T,isOwner:C,canJoinChannel:H,canAddMember:b,canAuthorizeMember:v,canDeleteMember:w,canCreateChannel:S,canDeleteChannel:x,canPostMessage:K}}),wn="/assets/star.073c274c.svg",xr={class:"text-weight-medium row wallet"},Ir={key:0,class:"channel-owner"},Er=m("img",{src:wn},null,-1),Br={class:"memberlist-info__details"},Tr=m("span",null,"Authority:",-1),Nr={class:"memberlist-btns"},Pr=O({__name:"MemberListDialog",props:{membersDialog:{type:Boolean,default:!1},authorizeMemberState:{type:Object},deleteMemberState:{type:Object},wallet:{type:Object}},emits:["submit","deleteMember"],setup(t,{emit:e}){const{state:n}=J(),i=Ne(),s=h=>h>0?"pending":"authorized",l=A(()=>i.canAuthorizeMember),a=A(()=>i.isAuthorizedMember),o=A(()=>i.isPermissionlessChannel),d=h=>{var p;return((p=n.channel)==null?void 0:p.creator.toBase58())===h};return(h,p)=>{const b=Ee;return g(),k(ye,{class:"memberlist"},{default:u(()=>[r(ne,{square:"",flat:"",horizontal:""},{default:u(()=>[r(G,{class:"q-px-lg"},{default:u(()=>[N(" MEMBERS ")]),_:1}),r(G,{class:"memberlist-card"},{default:u(()=>[r(ke,{separator:""},{default:u(()=>[(g(!0),B(Z,null,ue(c(n).channelMembers,v=>(g(),k(F,{key:v.pubkey.toString(),"active-class":"owner",active:`${v.pubkey}`==`${c(n).channelMembershipAddr}`,class:"memberlist-item"},{default:u(()=>[r(U,{class:"memberlist-info"},{default:u(()=>[r(Qe,{class:"row justify-between memberlist-info__header"},{default:u(()=>[m("span",xr,[N(q(c(dn)(v.data))+" ",1),d(v.data.authority.toBase58())?(g(),B("div",Ir,[r(b,{text:"Channel Owner"}),Er])):ie("",!0)]),r(da,{class:Me([s(v.data.status),"memberlist-status q-pa-xs q-ml-lg"])},{default:u(()=>[N(q(s(v.data.status)),1)]),_:2},1032,["class"])]),_:2},1024),r(Qe,{caption:"",lines:"2"},{default:u(()=>[m("div",Br,[Tr,m("span",null,q(v.data.authority),1)])]),_:2},1024)]),_:2},1024),m("div",Nr,[s(v.data.status)==="pending"&&(c(l)||c(a)&&c(o))?(g(),k(W,{key:0,color:"positive",size:"sm",unelevated:"",class:"full-width",loading:t.authorizeMemberState.loading,disabled:t.authorizeMemberState.loading,onClick:w=>h.$emit("submit",v.data.authority)},{default:u(()=>[N(" Authorize ")]),_:2},1032,["loading","disabled","onClick"])):ie("",!0),c(i).canDeleteMember?(g(),k(W,{key:1,color:"negative",size:"sm",unelevated:"",class:"full-width",loading:t.deleteMemberState.loading,disabled:t.deleteMemberState.loading||d(v.data.authority.toBase58()),onClick:w=>h.$emit("deleteMember",v.data.authority)},{default:u(()=>[N(" Delete ")]),_:2},1032,["loading","disabled","onClick"])):ie("",!0)])]),_:2},1032,["active"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}}),Kr=m("br",null,null,-1),zr=O({__name:"JoinChennalModal",emits:["join"],setup(t,{emit:e}){const n=L("");return(i,s)=>(g(),k(ye,null,{default:u(()=>[r(ne,{square:"",flat:""},{default:u(()=>[r(G,{class:"text-body1"},{default:u(()=>[N(" Join Channel ")]),_:1}),r(G,{class:"text-body1 text-blue-grey-8"},{default:u(()=>[r(Je,{class:"join-channel-form",onSubmit:s[1]||(s[1]=Ut(l=>i.$emit("join",c(n)),["prevent"]))},{default:u(()=>[r(be,{modelValue:c(n),"onUpdate:modelValue":s[0]||(s[0]=l=>se(n)?n.value=l:null),label:"Member name *","lazy-rules":"",rules:[l=>l&&l.length>2||"Please type something"]},null,8,["modelValue","rules"]),Kr,r(W,{type:"submit",class:"dialog-submit-btn","text-color":"black",ripple:!1,square:""},{default:u(()=>[N(" Join Channel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const Lr=t=>(We("data-v-ec1bb3cb"),t=t(),Re(),t),Wr=Lr(()=>m("span",{class:"text-blue-grey-8 q-pb-xs"},"Search by name or address",-1)),Rr={class:"search-block"},Fr={class:"channel-info text-weight-medium"},Hr={class:"channel-info mobile-text-short"},qr={key:0,class:"already-in-chat"},Or={class:"control-btns"},Ur=O({__name:"JoinChannelDialog",props:{loading:{type:Boolean},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const n=t;L(n.defaultState);const{state:i,selectChannel:s,refreshList:l}=J(),a=Ne(),o=L(!1),d=L(""),h=L([]),p=A(()=>i.allChannels.filter(S=>S.data.flags===0||S.data.flags===2)),b=A(()=>i.loading),v=S=>S.name.slice(0,2),w=()=>{if(d.value===""){h.value=[],d.value="";return}h.value=p.value.filter(S=>S.data.name.toLocaleLowerCase().includes(d.value.toLocaleLowerCase())||S.pubkey.toBase58().toLocaleLowerCase().includes(d.value.toLocaleLowerCase()))},T=A(()=>{var S;return((S=d.value)==null?void 0:S.length)>0?h.value:p.value}),C=S=>{e("submit",S)};te(d,()=>{w()}),te(()=>n.loading,S=>{S&&(o.value=!1)});const H=S=>a.ownChannels.find(x=>String(x.pubkey)===String(S.pubkey));return(S,x)=>{const K=Ee,E=zr;return g(),k(ye,{class:"join-channel-dialog",onHide:x[3]||(x[3]=_=>S.$emit("reset"))},{default:u(()=>[r(ne,{square:"",flat:""},{default:u(()=>[r(G,{class:"text-body1 text-blue-grey-8"},{default:u(()=>[N(" Join channel ")]),_:1}),r(G,{class:"q-py-none"},{default:u(()=>[Wr,m("div",Rr,[r(be,{modelValue:c(d),"onUpdate:modelValue":x[0]||(x[0]=_=>se(d)?d.value=_:null),class:"input no-margin q-pa-none",placeholder:"Search ...",borderless:"",dense:"",debounce:"300"},null,8,["modelValue"])])]),_:1}),r(G,null,{default:u(()=>[c(T).length?(g(),k(ke,{key:0,bordered:"",separator:"",class:"privat-channels"},{default:u(()=>[(g(!0),B(Z,null,ue(c(T),_=>V((g(),k(F,{key:_,"active-class":"bg-blue-grey-8 text-white",class:"privat-channels-item",active:`${c(i).channelAddr}`==`${_.pubkey}`,clickable:"",onClick:M=>c(s)(_.pubkey)},{default:u(()=>[m("div",{class:"chat-avatar",style:Ze(c(mn)(`${_.pubkey}`))},[m("span",null,q(v(_.data)),1)],4),r(U,{class:"channel-wrapper"},{default:u(()=>[m("span",Fr,q(_.data.name),1),m("span",Hr,q(_.pubkey),1)]),_:2},1024),H(_)?(g(),B("div",qr,[r(K,{text:"already in channel"}),r(c(tn),{size:"18"})])):ie("",!0)]),_:2},1032,["active","onClick"])),[[ae]])),128))]),_:1})):(g(),k(F,{key:1,class:"privat-channels justify-center items-center text-blue-grey-5"},{default:u(()=>[N(" Channels not found ")]),_:1}))]),_:1}),m("div",Or,[r(W,{class:Me(["control-button",{"refresh-btn":c(b)}]),square:"",flat:"",onClick:c(l)},{default:u(()=>[r(c(ln),{style:{color:"#fff"}}),r(K,{text:"Refresh channels"})]),_:1},8,["class","onClick"]),r(W,{class:"control-button",square:"",flat:"",disable:!c(i).channelAddr,onClick:x[1]||(x[1]=_=>o.value=!0)},{default:u(()=>[r(c(ma),{style:{color:"#fff"}}),r(K,{text:"Request to join"})]),_:1},8,["disable"]),r(E,{modelValue:c(o),"onUpdate:modelValue":x[2]||(x[2]=_=>se(o)?o.value=_:null),onJoin:C},null,8,["modelValue"])]),r(Ge,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})}}});const $r=le(Ur,[["__scopeId","data-v-ec1bb3cb"]]),Gr=t=>(We("data-v-e91edd23"),t=t(),Re(),t),jr=Gr(()=>m("br",null,null,-1)),Vr=O({__name:"AddMemberDialog",props:{loading:{type:Boolean,default:!1},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const i=L(t.defaultState),s=()=>e("submit",i.value);return(l,a)=>(g(),k(ye,{class:"add-member-dialog",onHide:a[3]||(a[3]=o=>l.$emit("reset"))},{default:u(()=>[r(ne,{square:"",flat:""},{default:u(()=>[r(G,null,{default:u(()=>[r(Je,{class:"add-member-form",onSubmit:Ut(s,["prevent"])},{default:u(()=>[r(be,{modelValue:c(i).name,"onUpdate:modelValue":a[0]||(a[0]=o=>c(i).name=o),label:"Member name *",hint:"Min length 3 chars","lazy-rules":"",rules:[o=>o&&o.length>2||"Please type something"]},null,8,["modelValue","rules"]),r(be,{modelValue:c(i).wallet,"onUpdate:modelValue":a[1]||(a[1]=o=>c(i).wallet=o),label:"Member Wallet *","lazy-rules":"",rules:[o=>o&&o.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),r(be,{modelValue:c(i).key,"onUpdate:modelValue":a[2]||(a[2]=o=>c(i).key=o),label:"Member Device Key",hint:"Default: The same as member wallet","lazy-rules":"",rules:[o=>!o||o.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),jr,r(W,{type:"submit",class:"dialog-submit-btn","text-color":"black",ripple:!1,square:"",flat:""},{default:u(()=>[N(" Add Member ")]),_:1})]),_:1},8,["onSubmit"]),r(Ge,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1}))}});const Qr=le(Vr,[["__scopeId","data-v-e91edd23"]]),Mt="/assets/info.bfade5eb.svg",Yr={class:"toggle-info max-messages-tooltip"},Xr=m("img",{src:Mt,alt:"info"},null,-1),Jr={class:"relative-position"},Zr={class:"messages-cost"},ec={class:"toggle-info max-messages-tooltip"},tc=m("img",{src:Mt,alt:"info"},null,-1),nc={class:"row q-mt-md relative-position",style:{height:"42px"}},ac={class:"toggle-info"},sc=m("img",{src:Mt,alt:"info"},null,-1),ic={key:0,class:"row text-primary toggle-approve"},oc={class:"toggle-info"},lc=m("img",{src:Mt,alt:"info"},null,-1),rc=O({__name:"NewChannelDialog",props:{loading:{type:Boolean,default:!1},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const n=t,{error:i,noSol:s}=he(),{channelMessagesCost:l}=J(),a=Fe();Se();const o=L(n.defaultState),d=L(0),h=async()=>{if(await d.value>a.balance){s();return}e("submit",o)},p=A(()=>d.value!=="extra"?`~${Number(d.value).toFixed(5)} SOL`:"Limit exceeded");te(()=>{var v;return(v=o.value)==null?void 0:v.maxMessages},async v=>{const w=await l(Number(v));d.value=w});const b=v=>v===""?!0:v!==""&&v.length<=25;return rn(async()=>{const v=bn;d.value=await l(Number(v))}),(v,w)=>{const T=Ee;return g(),k(ye,{class:"new-channel-dialog",onHide:w[5]||(w[5]=C=>v.$emit("reset"))},{default:u(()=>[r(ne,{square:"",flat:""},{default:u(()=>[r(G,null,{default:u(()=>[r(Je,{class:"messenger-new-channel-form",onSubmit:h},{default:u(()=>[r(be,{modelValue:c(o).name,"onUpdate:modelValue":w[0]||(w[0]=C=>c(o).name=C),label:"Channel name *","lazy-rules":"",maxlength:c(Yt),rules:[C=>C&&C.length>2||"Please type something",C=>C&&C.length<=25||"Please use maximum 25 characters"]},null,8,["modelValue","maxlength","rules"]),r(be,{modelValue:c(o).memberName,"onUpdate:modelValue":w[1]||(w[1]=C=>c(o).memberName=C),label:"Member name","lazy-rules":"",maxlength:c(Yt),rules:[C=>b(C)||"Please use maximum 25 characters"]},{default:u(()=>[m("div",Yr,[r(T,{text:c(at)[3],padding:"8px"},null,8,["text"]),Xr])]),_:1},8,["modelValue","maxlength","rules"]),m("div",Jr,[r(be,{modelValue:c(o).maxMessages,"onUpdate:modelValue":w[2]||(w[2]=C=>c(o).maxMessages=C),label:"Max messages","lazy-rules":"",type:"number",debounce:"200",rules:[C=>+C>0||"Invalid value",C=>+C<c(Kt)+1||`Max messages ${c(Kt)}`]},null,8,["modelValue","rules"]),m("div",Zr,q(c(p)),1),m("div",ec,[r(T,{text:c(at)[2],padding:"8px"},null,8,["text"]),tc])]),m("div",nc,[m("div",ac,[r(T,{text:c(at)[0],padding:"8px"},null,8,["text"]),sc]),m("div",{class:Me(["col text-primary",{"toggle-border":!c(o).public}])},[N(" Private"),r(Qt,{modelValue:c(o).public,"onUpdate:modelValue":w[3]||(w[3]=C=>c(o).public=C),label:"Public"},null,8,["modelValue"])],2),c(o).public?ie("",!0):(g(),B("div",ic,[r(Qt,{modelValue:c(o).permissionless,"onUpdate:modelValue":w[4]||(w[4]=C=>c(o).permissionless=C)},null,8,["modelValue"]),m("span",null,[m("div",oc,[r(T,{text:c(at)[1],padding:"8px"},null,8,["text"]),lc]),N(" Members can approve")])]))]),r(W,{type:"submit",class:"dialog-submit-btn q-mt-md","text-color":"black",ripple:!1,square:"",flat:""},{default:u(()=>[N(" Create the Channel ")]),_:1})]),_:1}),r(Ge,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1})}}});const cc=O({__name:"ChannelForm",props:{message:{type:Object},disabled:{type:Boolean,default:!1},sending:{type:Boolean,default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,{notify:i}=Se(),s=()=>{e("submit"),n.message.message=""};let l,a=59;const o=()=>{clearInterval(l)},d=()=>{const h=i({group:!1,timeout:0,classes:"expires-notofocation",message:"Transaction expires",type:"warning",caption:"9"}),p=setInterval(()=>{h({caption:`${a}`}),(a===0||a>10)&&(h({timeout:100,caption:"--"}),clearInterval(p))},1e3)};return te(()=>n.sending,h=>{h?l=setInterval(()=>{if(a===0){o(),i({timeout:3e3,message:"Transaction expires",type:"negative"}),a=59;return}a===10&&d(),a--},1e3):(o(),a=59)}),(h,p)=>(g(),k(Je,{class:"channel-form",onSubmit:Ut(s,["prevent"])},{default:u(()=>[r(ha,{class:"row message-control"},{default:u(()=>[r(be,{ref:"inputFocus",modelValue:t.message.message,"onUpdate:modelValue":p[0]||(p[0]=b=>t.message.message=b),class:"col-grow message-input",placeholder:"Type a message",maxlength:"201",dense:"",borderless:"",autofocus:"",disable:t.disabled,rules:[b=>b.length<=200||"Please use maximum 200 characters"]},null,8,["modelValue","disable","rules"]),r(W,{class:"send-btn",square:"",flat:"",type:"submit",disable:t.disabled||!t.message.message.length,loading:t.sending},{default:u(()=>[N(" Send ")]),_:1},8,["disable","loading"])]),_:1})]),_:1},8,["onSubmit"]))}});const uc=le(cc,[["__scopeId","data-v-e49e43ec"]]),dc={class:"message-wrapper"},mc={key:0,class:"message-actions"},hc=["innerHTML"],pc=O({__name:"ChannelMessage",props:{text:String,sender:Boolean},emits:["handleEdit","handleDelete"],setup(t,{emit:e}){const n=l=>e("handleEdit",l),i=l=>e("handleDelete",l),s=L(null);return(l,a)=>(g(),B("div",dc,[t.sender?ie("",!0):(g(),B("div",mc,[r(c(pa),{width:"12",height:"12",onClick:a[0]||(a[0]=o=>n({messageId:c(s).lastChild.dataset.id,text:c(s).lastChild.innerHTML}))}),r(c(ga),{width:"12",height:"12",onClick:a[1]||(a[1]=o=>i(c(s).lastChild.dataset.id))})])),m("div",{ref_key:"message",ref:s,innerHTML:t.text},null,8,hc)]))}}),gc="/assets/solana-logo.3caace62.svg",fc={class:"messenger-content"},yc={key:0,class:"preloader"},bc={key:1,class:"messenger-empty"},vc={key:2,class:"messenger-empty"},_c=m("img",{src:gc,alt:"logo"},null,-1),Ac=m("span",{name:"connect"},"Please connect a wallet",-1),wc=[_c,Ac],Mc={key:3,class:"messenger-empty"},kc=m("span",{name:"select"},"Please select a channel",-1),Sc=[kc],Cc=O({__name:"ChannelWrapper",props:{postMessageState:{type:Object}},emits:["sendMessage","deleteMessage"],setup(t,{emit:e}){const n=t,i=De(),{state:s}=J(),l=Ne();function a(x){const K=i.publicKey.value;return K?String(K)!==String(x):!0}const o=A(()=>[...new Map(s.channelMessages.map(x=>[x.id=Number(x.id.toString()),x])).values()]),d=A(()=>{const x=[];let K=0,E;for(const _ of o.value)if(E&&`${_.sender}`==`${E}`)x[K-1].text.push(`<div data-id='${_.id}'>${_.content}</div>`);else{E=_.sender;const M=s.channelMembers.find(Q=>Q.data.authority.toBase58()===E.toBase58());x.push({id:_.id,sender:_.sender,senderDisplayName:(M==null?void 0:M.data.name)!==""&&!l.isPublicChannel?M==null?void 0:M.data.name:_.senderDisplayName,text:[`<div data-id='${_.id}'>${_.content}</div>`],date:_.createdAt}),K++}return x}),h=A(()=>l.canPostMessage),p=x=>e("sendMessage",x),b=x=>{n.postMessageState.message=x.text,n.postMessageState.edit=!0,n.postMessageState.messageId=x.messageId},v=x=>{e("deleteMessage",x)},w=L(),T=L();te(T,x=>{x&&(w.value.scrollTop=x.scrollHeight)});const C=L(!1),H=ba(()=>{C.value=!1},2e3),S=(x,K,E)=>{if(K){C.value=!1;return}if(E){C.value=!0,H();return}C.value=!0,H()};return(x,K)=>{const E=pc,_=uc;return g(),k(ne,{class:Me(["messenger-card",{"show-scroll":c(C)}]),square:"",flat:""},{default:u(()=>[m("div",fc,[c(l).isChannelLoading?(g(),B("div",yc,[r(fa,{color:"primary",size:"2em"})])):c(s).channel?(g(),B("div",{key:1,ref_key:"chat",ref:w,class:"row justify-center channel-wrapper",onMouseenter:S,onMouseleave:K[0]||(K[0]=M=>S(M,!0)),onScroll:K[1]||(K[1]=M=>S(M,!1,!0))},[c(d).length>0?(g(),B("div",{key:0,ref_key:"mes",ref:T,class:"messenger-messages"},[(g(!0),B(Z,null,ue(c(d),M=>(g(),k(ya,{key:M.id,"text-html":"",name:M.senderDisplayName,sent:a(M.sender),class:Me(a(M.sender)?"others":"sender")},{default:u(()=>[(g(!0),B(Z,null,ue(M.text,(Q,pe)=>(g(),B("div",{key:pe,class:"message"},[r(E,{text:Q,sender:!!a(M.sender),onHandleEdit:b,onHandleDelete:v},null,8,["text","sender"])]))),128))]),_:2},1032,["name","sent","class"]))),128))],512)):(g(),B("div",bc," No messages "))],544)):c(l).isWalletConnected?(g(),B("div",Mc,Sc)):(g(),B("div",vc,wc))]),r(_,{message:t.postMessageState,sending:c(l).isSendMessage,disabled:!c(h),onSubmit:p},null,8,["message","sending","disabled"])]),_:1},8,["class"])}}});const Dc=O({__name:"ChannelControl",props:{isLoading:{type:Boolean}},emits:["createChannel","joinChannel","refreshList"],setup(t,{emit:e}){const n=Ne();he();const{notify:i}=Se();A(()=>n.isPendingMember),A(()=>n.canCreateChannel);const s=l=>{if(!n.isWalletConnected){i({message:"Please connect wallet",color:"negative",position:"bottom"});return}e(l)};return(l,a)=>{const o=Ee;return g(),k(F,{class:"channel-control-wrapper q-pa-none"},{default:u(()=>[r(U,{class:"button-wrapper"},{default:u(()=>[r(W,{class:Me(["control-button",{"refresh-btn":t.isLoading}]),square:"",flat:"",onClick:a[0]||(a[0]=d=>s("refreshList"))},{default:u(()=>[r(c(ln),{style:{color:"#fff"}}),r(o,{text:"Refresh channels"})]),_:1},8,["class"]),r(W,{class:"control-button",square:"",flat:"",onClick:a[1]||(a[1]=d=>s("createChannel"))},{default:u(()=>[r(c(on),{style:{color:"#fff"}}),r(o,{text:"Create a channel"})]),_:1}),r(W,{class:"control-button",square:"",flat:"",onClick:a[2]||(a[2]=d=>s("joinChannel"))},{default:u(()=>[r(c(va),{style:{color:"#fff"}}),r(o,{text:"Browse channels"})]),_:1})]),_:1})]),_:1})}}});const xc=le(Dc,[["__scopeId","data-v-4c1587e1"]]),Ic=t=>(We("data-v-1c977d3a"),t=t(),Re(),t),Ec={class:"chat-name"},Bc={key:0,class:"message-owner row"},Tc=Ic(()=>m("img",{src:wn},null,-1)),Nc={key:1,class:"message-public"},Pc={key:2,class:"pending-icon"},Kc=O({__name:"MessengerChannel",props:{pubkey:{type:Object,required:!0},channel:{type:Object,required:!0},isActive:Boolean},emits:["select"],setup(t){const e=t,{state:n}=J(),i=De(),s=A(()=>{var p;return(p=n.ownChannels.find(b=>b.pubkey===e.pubkey.toString()))==null?void 0:p.status}),l=A(()=>s.value===1),a=A(()=>e.channel.name.slice(0,2)),o=A(()=>e.channel.flags===1),d=A(()=>{var p,b;return(b=(p=i.publicKey.value)==null?void 0:p.toBase58())!=null?b:""}),h=A(()=>e.channel.creator.toBase58()===d.value);return(p,b)=>{const v=Ee;return g(),k(F,{"active-class":"bg-blue-grey-8 text-white",style:{"min-height":"60px"},active:t.isActive},{default:u(()=>[r(U,{class:"chat-item cursor-pointer",onClick:b[0]||(b[0]=w=>p.$emit("select"))},{default:u(()=>[m("div",{class:"chat-badge",style:Ze(c(mn)(`${t.pubkey}`))},[m("span",null,q(c(a)),1)],4),m("div",Ec,q(t.channel.name),1),c(h)?(g(),B("div",Bc,[r(v,{text:"Channel Owner"}),Tc])):ie("",!0),c(o)?(g(),B("div",Nc,[r(v,{text:"Public Channel"}),N(" P ")])):ie("",!0),c(l)?(g(),B("div",Pc,[r(v,{text:"Waiting for confirmation"}),r(_a,{color:"primary",size:"16px"})])):ie("",!0)]),_:1})]),_:1},8,["active"])}}});const zc=le(Kc,[["__scopeId","data-v-1c977d3a"]]),Lc=m("div",{class:"text-h5"}," Channels ",-1),Wc={class:"text-weight-medium"},Rc={class:"memberlist-info__details"},Fc=m("span",null,"Authority:",-1),Hc={class:"memberlist-info__details"},qc=m("span",null,"Key:",-1),Oc=O({__name:"PendingUsersDialog",props:{pendingChannels:Object},setup(t){L(!1);const{state:e}=J(),n=vn(),i=_n(),s=async(d,h)=>{e.channelAddr=h,await n.submit(d)},l=async(d,h)=>{e.channelAddr=h,await i.submit(d)},a=A(()=>n.state.loading),o=A(()=>i.state.loading);return(d,h)=>(g(),k(ye,null,{default:u(()=>[r(ne,{class:"pending-channels",square:"",flat:"",horizontal:""},{default:u(()=>[r(G,null,{default:u(()=>[Lc]),_:1}),r(G,null,{default:u(()=>[r(ke,{bordered:""},{default:u(()=>[(g(!0),B(Z,null,ue(t.pendingChannels,(p,b)=>(g(),k(Aa,{key:p.name,"expand-separator":"",label:p.channel.data.name,caption:"channel","default-opened":b===0,"header-class":"owner"},{default:u(()=>[r(ke,{separator:""},{default:u(()=>[(g(!0),B(Z,null,ue(p.pendingMembers,v=>(g(),k(F,{key:v,class:"row justify-between pending-item"},{default:u(()=>[r(U,{class:"memberlist-info"},{default:u(()=>[r(Qe,{class:"row justify-between"},{default:u(()=>[m("span",Wc,q(c(dn)(v.data)),1)]),_:2},1024),r(Qe,{caption:"",lines:"2"},{default:u(()=>[m("div",Rc,[Fc,m("span",null,q(v.data.authority),1)]),m("div",Hc,[qc,m("span",null,q(v.data.key),1)])]),_:2},1024)]),_:2},1024),r(U,{side:"",class:"memberlist-btns"},{default:u(()=>[r(W,{color:"teal",size:"xs",unelevated:"",class:"full-width",loading:c(a),disabled:c(a),onClick:w=>s(v.data.authority,p.channel.pubkey)},{default:u(()=>[N(" Authorize ")]),_:2},1032,["loading","disabled","onClick"]),r(W,{color:"negative",size:"xs",unelevated:"",class:"full-width",loading:c(o),disabled:c(o),onClick:w=>l(v.data.authority,p.channel.pubkey)},{default:u(()=>[N(" Delete ")]),_:2},1032,["loading","disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label","default-opened"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}});const Uc={class:"bell",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",fill:"none","xmlns:v":"https://vecta.io/nano"},$c=["fill"],Gc=O({__name:"iconBell",props:{color:{type:String,default:"AABEC8"}},setup(t){return(e,n)=>(g(),B("svg",Uc,[m("path",{d:"M5.352 14.359h3.294c0 .821-.59 1.641-1.647 1.641s-1.647-.82-1.647-1.641zm8.434-3.467l-.911-1.515a3.68 3.68 0 0 1-.527-1.897V5.325C12.348 2.389 9.949 0 7 0S1.651 2.389 1.651 5.325v2.155a3.68 3.68 0 0 1-.527 1.897l-.911 1.515c-.278.461-.285 1.018-.018 1.487s.749.749 1.29.749h11.03a1.47 1.47 0 0 0 1.291-.749 1.46 1.46 0 0 0-.021-1.487z",fill:`#${t.color}`},null,8,$c)]))}}),Mn=Le("notifications",()=>{const t=dt(),{loadMembers:e,state:n}=J(),i=Ne(),s=de({showInfo:!1,showDialog:!1,pendingChannels:[]});te([()=>i.ownChannels,()=>n.channelMembers],async(a,o)=>{o.length>0&&await l(o[0])});async function l(a){try{const o=await Promise.all(a.map(async d=>{var b;const{pubkey:h,data:p}=d;if(p.creator.toBase58()===((b=t.value)==null?void 0:b.publicKey.toBase58())){const v=await e(h);if(v.length===0)return;const w=v.filter(T=>T.data.status===1);return w.length?{channel:d,pendingMembers:w}:void 0}}));s.pendingChannels=o.filter(d=>d),s.pendingChannels.length>0?(setTimeout(()=>s.showInfo=!0,2e3),setTimeout(()=>s.showInfo=!1,7e3)):s.showDialog=!1}catch(o){console.log(o)}}return{state:s}});function jc(){const{state:t}=Mn();return{showDialog:A(()=>t.showDialog),showInfo:A(()=>t.showInfo),pendingChannels:A(()=>t.pendingChannels)}}const Vc={class:"panel-notifications__info"},Qc=O({__name:"MessengerNotification",setup(t){const{pendingChannels:e,showInfo:n,showDialog:i}=jc(),{state:s}=Mn(),l=A(()=>{var h,p;return(p=(h=e.value)==null?void 0:h.length)!=null?p:0}),a=A(()=>l.value>0),o=A(()=>n.value?"width: 100%; padding-right: 14px":"width: 0; padding-right: 0;"),d=()=>{!a.value||(s.showDialog=!s.showDialog)};return(h,p)=>{const b=Gc,v=Oc;return g(),B("div",{class:Me(["panel-notifications",{"has-notifications":c(a)}]),onClick:d},[m("div",Vc,[r(b,{class:"ring",color:c(a)?"FF5C5C":"AABEC8"},null,8,["color"]),m("span",null,q(l.value),1)]),m("div",{ref:"notificationsInfo",class:"panel-notifications__details",style:Ze(c(o))}," channels are awaiting user confirmation ",4),r(v,{modelValue:c(s).showDialog,"onUpdate:modelValue":p[0]||(p[0]=w=>c(s).showDialog=w),"pending-channels":c(e),onCloseDialog:p[1]||(p[1]=w=>h.isShow.value=!1)},null,8,["modelValue","pending-channels"])],2)}}});const kn=Le("mobile",()=>{const{screen:t}=Se(),e=de({searchOrInfo:"search"}),n=A(()=>t.xs);return te(n,i=>{i&&(e.searchOrInfo="search")}),{state:e,isMobile:n}}),Yc={class:"panel-search"},Xc={class:"search-wrapper"},Jc={class:"panel-info"},Zc={class:"chat-info"},eu={class:"chat-members"},tu={class:"chat-messages"},nu=["title"],au={key:0,class:"members-count bg-cyan-9"},su=O({__name:"MessengerToolbar",emits:["search","showMembers","deleteChannel","addMember","showDeviceKey","leaveChannel"],setup(t,{emit:e}){const n=De(),{state:i}=J(),s=Ne(),l=kn(),a=cn(),{screen:o,notify:d}=Se(),h=A(()=>!!n.publicKey.value),p=L(""),b=A(()=>i.channel),v=A(()=>{var _,M,Q;if(((_=b.value)==null?void 0:_.memberCount)===null||((M=b.value)==null?void 0:M.memberCount)===void 0)return"";if(s.isPublicChannel){const pe=i.channelMessages.map(Ce=>Ce.sender.toBase58());return`${[...new Set(pe)].length}\xA0members`}return`${(Q=b.value)==null?void 0:Q.memberCount}\xA0members`}),w=A(()=>{var _,M;return((_=b.value)==null?void 0:_.messageCount)===null||((M=b.value)==null?void 0:M.messageCount)===void 0?"":`${i.channelMessages.length}\xA0messages`}),T=_=>e("search",_),C=()=>e("showMembers"),H=()=>e("addMember"),S=A(()=>{if(!(!s.isOwner||!s.isAdmin))return i.channelMembers.filter(_=>_.data.status===1).length}),x=A(()=>a.state.mode==="FullScreen");te(p,_=>{T(String(_))});const K=A(()=>l.isMobile&&l.state.searchOrInfo==="info"),E=()=>{if(!s.isWalletConnected)return d({type:"negative",position:"bottom",message:"Please connect your wallet"});a.state.mode=lt[0]};return te(()=>i.channelAddr,_=>{_&&l.isMobile&&(l.state.searchOrInfo="info")}),(_,M)=>{var ge,Ce;const Q=Qc,pe=Ee;return g(),B("div",{class:Me(["panel-toolbar",c(l).state.searchOrInfo])},[r(Q),c(K)?(g(),k(c(wa),{key:0,class:"back-arrow",onClick:M[0]||(M[0]=ve=>c(l).state.searchOrInfo="search")})):ie("",!0),m("div",Yc,[m("div",Xc,[r(be,{modelValue:c(p),"onUpdate:modelValue":M[1]||(M[1]=ve=>se(p)?p.value=ve:null),class:"search-input no-margin q-pa-none",placeholder:"Search ...",clearable:"",debounce:"300",borderless:"",disable:!c(s).isWalletConnected,onClear:M[2]||(M[2]=ve=>p.value="")},null,8,["modelValue","disable"])]),c(x)?(g(),B("div",{key:1,class:"size-icon",onClick:M[3]||(M[3]=ve=>c(a).state.mode=c(lt)[1])},[r(pe,{text:"Compact"}),r(c(ka))])):(g(),B("div",{key:0,class:"size-icon",onClick:E},[r(pe,{text:"Full"}),r(c(Ma))]))]),m("div",Jc,[m("div",Zc,[m("div",eu,q(c(v)),1),m("div",tu,q(c(w)),1)]),r(ut,{class:""}),m("div",{class:"chat-name",title:(ge=c(b))==null?void 0:ge.name},q((Ce=c(b))==null?void 0:Ce.name),9,nu),m("div",null,[r(W,{class:"chat-menu",flat:"",square:"",disabled:!c(h)},{default:u(()=>[r(c(Sa),{size:"18"}),r(Ca,{anchor:"bottom middle",self:"top middle"},{default:u(()=>[r(ke,{style:{"min-width":"120px"},bordered:""},{default:u(()=>[V((g(),k(F,{class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",onClick:M[4]||(M[4]=ve=>_.$emit("showDeviceKey"))},{default:u(()=>[r(U,{class:"q-pa-none"},{default:u(()=>[r(W,{flat:"",square:"",size:"sm",class:"bg-blue-grey-7 text-white q-px-xs"},{default:u(()=>[N(" Devices ")]),_:1})]),_:1})]),_:1})),[[Pe]]),V((g(),k(F,{class:"q-my-sm q-mx-sm q-pa-none chat-menu__item relative-position",clickable:"",disable:!c(b),onClick:C},{default:u(()=>[r(U,null,{default:u(()=>[c(S)>0?(g(),B("div",au,q(c(S)),1)):ie("",!0),r(W,{flat:"",square:"",size:"sm",class:"bg-cyan-9 text-white q-px-xs"},{default:u(()=>[N(" Members ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Pe]]),c(s).isOwner&&!c(s).isPublicChannel?V((g(),k(F,{key:0,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!c(s).canAddMember,onClick:H},{default:u(()=>[r(U,null,{default:u(()=>[r(W,{flat:"",square:"",size:"sm",class:"bg-amber-7 text-white q-px-xs"},{default:u(()=>[N(" Add member ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Pe]]):ie("",!0),c(s).isOwner?V((g(),k(F,{key:1,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!c(s).isChannelCreator,onClick:M[5]||(M[5]=ve=>_.$emit("deleteChannel"))},{default:u(()=>[r(U,null,{default:u(()=>[r(W,{flat:"",square:"",size:"sm",class:"bg-negative text-white q-px-xs"},{default:u(()=>[N(" Delete ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Pe]]):V((g(),k(F,{key:2,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!c(b)||c(s).isPublicChannel,onClick:M[6]||(M[6]=ve=>_.$emit("leaveChannel"))},{default:u(()=>[r(U,null,{default:u(()=>[r(W,{flat:"",square:"",size:"sm",class:"bg-negative text-white q-px-xs"},{default:u(()=>[N(" Leave ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Pe]])]),_:1})]),_:1})]),_:1},8,["disabled"])])])],2)}}});const iu={class:"col col-4"},ou={class:"col"},lu={class:"no-margin"},ru=O({__name:"DebugBtn",props:{isDebugOpen:{type:Boolean,default:!1}},emits:["handleDebugBtn"],setup(t){const e=t,{state:n}=J(),{isAuthorizedMember:i,isPendingMember:s,isChannelCreator:l}=Ne(),a=L(!1);return te(()=>e.isDebugOpen,o=>{n.channel&&(a.value=o)}),(o,d)=>(g(),k(ye,{modelValue:c(a),"onUpdate:modelValue":d[0]||(d[0]=h=>se(a)?a.value=h:null),onHide:d[1]||(d[1]=h=>o.$emit("handleDebugBtn"))},{default:u(()=>[r(ne,{style:{width:"800px","max-width":"80vw"}},{default:u(()=>[r(G,null,{default:u(()=>[(g(!0),B(Z,null,ue([["Authorized",c(i)],["Pending Access",c(s)],["Channel Creator",c(l)],["Channel Address",c(n).channelAddr],["Channel",c(n).channel],["Membership",c(n).channelMembership],["Members",c(n).channelMembers]],h=>(g(),B("div",{key:h[0],class:"row q-mt-md"},[m("div",iu,q(h[0]),1),m("div",ou,[m("pre",lu,q(h[1]),1)])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),cu={class:"messenger-wrapper"},uu={class:"messenger-main"},du={key:1,class:"messenger-channels-empty"},mu=O({__name:"Messenger",setup(t){const e=De(),{state:n,postMessage:i,editMessage:s,deleteMessage:l,loadChannel:a,refreshList:o,channelAuthorityDevice:d}=J(),h=Ne(),p=kn(),b=fl(),v=vl(),w=bl(),T=vn(),C=_n(),H=yl(),S=_l(),x=de({message:"",edit:!1,messageId:0});A(()=>n.allChannels);const K=L([]),E=L("");async function _(){const{message:Y,edit:z,messageId:qe}=x;z?M(Y,qe):await i(x.message),x.message="",x.edit=!1,x.messageId=0}async function M(Y,z){await s(Y,z)}const Q=Y=>{if(Y===""){K.value=[],E.value="";return}K.value=h.ownChannels.filter(z=>z.data.name.toLocaleLowerCase().includes(Y.toLocaleLowerCase())||z.pubkey.toBase58().toLocaleLowerCase().includes(Y.toLocaleLowerCase())),E.value=Y},pe=A(()=>n.loading),ge=L(!1),Ce=A(()=>K.value.length>0||E.value.length>0?K.value:h.ownChannels),ve=Y=>w.submit(Y),kt=Y=>{v.state.name=Y,v.submit()},St=A(()=>p.isMobile?p.state.searchOrInfo==="search"?1:2:1),He=L("");te(()=>n.memberDevices,async Y=>{Y.length>0&&(He.value=await d())});const je=L(!1),nt=()=>je.value=!je.value;return rn(()=>{const Y=document.querySelector(".sol-icon");Y==null||Y.addEventListener("dblclick",()=>{nt()})}),(Y,z)=>{const qe=su,Ct=zc,Dt=xc,xt=Cc,f=rc,D=Qr,I=$r,R=Pr,ee=Dr,X=Gi;return g(),B(Z,null,[m("div",cu,[r(qe,{onSearch:Q,onShowMembers:z[0]||(z[0]=$=>c(T).state.dialog=!0),onDeleteChannel:z[1]||(z[1]=$=>c(H).submit(c(n).channelAddr)),onLeaveChannel:z[2]||(z[2]=$=>c(S).submit(c(n).channelAddr)),onAddMember:z[3]||(z[3]=$=>c(w).state.dialog=!0),onShowDeviceKey:z[4]||(z[4]=$=>ge.value=!0)}),m("div",uu,[r(ne,{class:"messenger-channels",square:"",flat:""},{default:u(()=>[c(Ce).length>0?(g(),k(ke,{key:0,separator:"",class:"channels-list"},{default:u(()=>[(g(!0),B(Z,null,ue(c(Ce),$=>(g(),k(Ct,{key:$.name,pubkey:$.pubkey,channel:$.data,"active-class":"select-channel","is-active":`${c(n).channelAddr}`==`${$.pubkey}`,onSelect:zu=>c(a)($.pubkey)},null,8,["pubkey","channel","is-active","onSelect"]))),128))]),_:1})):(g(),B("div",du," No channels ")),r(Dt,{"is-joining":c(v).state.loading,"is-loading":c(pe),onCreateChannel:z[5]||(z[5]=$=>c(b).state.dialog=!0),onJoinChannel:z[6]||(z[6]=$=>c(v).state.dialog=!0),onRefreshList:c(o)},null,8,["is-joining","is-loading","onRefreshList"])]),_:1}),r(xt,{style:Ze({"z-index":c(St)}),"post-message-state":c(x),onEditMemberMessage:c(s),onSendMessage:_,onDeleteMessage:c(l)},null,8,["style","post-message-state","onEditMemberMessage","onDeleteMessage"]),r(Ge,{showing:c(n).loading,color:"primary"},null,8,["showing"])])]),r(f,{modelValue:c(b).state.dialog,"onUpdate:modelValue":z[7]||(z[7]=$=>c(b).state.dialog=$),loading:c(b).state.loading,"default-state":c(b).state,onSubmit:c(b).submit,onReset:c(b).reset},null,8,["modelValue","loading","default-state","onSubmit","onReset"]),r(D,{modelValue:c(w).state.dialog,"onUpdate:modelValue":z[8]||(z[8]=$=>c(w).state.dialog=$),loading:c(w).state.loading,"default-state":c(w).state,onSubmit:ve,onReset:c(w).reset},null,8,["modelValue","loading","default-state","onReset"]),r(I,{modelValue:c(v).state.dialog,"onUpdate:modelValue":z[9]||(z[9]=$=>c(v).state.dialog=$),loading:c(v).state.loading,"default-state":c(v).state,onSubmit:kt,onReset:c(v).reset},null,8,["modelValue","loading","default-state","onReset"]),r(R,{modelValue:c(T).state.dialog,"onUpdate:modelValue":z[10]||(z[10]=$=>c(T).state.dialog=$),wallet:c(e),"authorize-member-state":c(T).state,"delete-member-state":c(C).state,onSubmit:c(T).submit,onDeleteMember:c(C).submit},null,8,["modelValue","wallet","authorize-member-state","delete-member-state","onSubmit","onDeleteMember"]),r(ee,{modelValue:c(ge),"onUpdate:modelValue":z[11]||(z[11]=$=>se(ge)?ge.value=$:null),"authority-device":c(He),onLoadChannel:z[12]||(z[12]=$=>c(a)(c(n).channelAddr))},null,8,["modelValue","authority-device"]),r(X,{"channel-event":c(n).channelEvent},null,8,["channel-event"]),r(ru,{"is-debug-open":c(je),onHandleDebugBtn:nt},null,8,["is-debug-open"])],64)}}});const hu={},pu={class:"page-wrapper"},gu={class:"messenger-container"},fu={class:"container"};function yu(t,e){const n=mu,i=Li;return g(),B("div",pu,[m("div",gu,[r(n)]),m("div",fu,[r(i)])])}const bu=le(hu,[["render",yu],["__scopeId","data-v-f2734b3a"]]),vu=()=>en(()=>import("./_...all_.0fd3d00b.js"),["assets/_...all_.0fd3d00b.js","assets/vendor.a1ecef17.js","assets/_...all_.73169310.css"]),_u=[{name:"index",path:"/",component:bu,props:!0},{name:"all",path:"/:all(.*)*",component:vu,props:!0,meta:{layout:"empty"}}],Au=ki(_u),wu="/",Mu=Da({history:xa(wu),scrollBehavior:()=>({left:0,top:0}),strict:!0,routes:Au}),ku=({app:t})=>{t.use(Mu)},Su=Object.freeze(Object.defineProperty({__proto__:null,install:ku},Symbol.toStringTag,{value:"Module"})),Cu=({app:t})=>{t.use(Ia,{wallets:[new Ea,new Ba,new Ta,new Na,new Pa,new Ka,new za,new La,new Wa,new Ra,new Fa,new Ha,new qa,new Oa,new Ua,new $a,new Ga,new ja,new Va,new Qa,new Ya,new Xa,new Ja,new Za,new es,new ts,new ns,new as,new ss,new is],autoConnect:!1})},Du=Object.freeze(Object.defineProperty({__proto__:null,install:Cu},Symbol.toStringTag,{value:"Module"})),xu=os();function Iu(){return xu}const Eu=Symbol("WALLET_CONNECT_EVENT"),Bu=Symbol("WALLET_DISCONNECT_EVENT"),Tu=Symbol("ACCOUNT_CHANGE_EVENT"),Nt=5e3;function Nu(){const{connection:t}=pt(),{emit:e}=Iu(),{notify:n}=Se(),{wallet:i}=De();te(i,s=>{if(!s)return;const l=()=>{const d=s.adapter.publicKey;t.onAccountChange(d,h=>{e(Tu,h)}),t.onLogs(d,h=>{console.log(h)}),n({message:"Wallet update",caption:`Connected to wallet ${et(d.toBase58(),7)}`,timeout:Nt}),e(Eu,s)},a=()=>{n({message:"Wallet update",caption:"Disconnected from wallet",timeout:Nt}),e(Bu,s)},o=d=>{!(d!=null&&d.message)||n({type:"negative",message:"Wallet update",caption:d.message,timeout:Nt})};s.adapter.once("connect",l),s.adapter.once("disconnect",a),s.adapter.removeAllListeners("error"),s.adapter.on("error",o)},{immediate:!0})}const Pu=O({__name:"App",setup(t){return ls(()=>{Nu()}),rs({title:"Cgram",meta:[{name:"description",content:""},{name:"keywords",content:""}],link:[{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"}]}),(e,n)=>{const i=Ht("router-view");return g(),k(i)}}});async function Ku(){const t=cs(Pu);Object.values(Object.assign({"./plugins/app.ts":ds,"./plugins/pinia.ts":hs,"./plugins/quasar.ts":gs,"./plugins/router.ts":Su,"./plugins/wallet.ts":Du})).forEach(e=>{var n;return(n=e.install)==null?void 0:n.call(e,{app:t})}),t.mount("#app")}Ku().then();export{le as _};
