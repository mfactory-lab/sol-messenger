var kt=Object.defineProperty;var vt=(n,e,t)=>e in n?kt(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var B=(n,e,t)=>(vt(n,typeof e!="symbol"?e+"":e,t),t);import{c as Ct,Q as St,P as Mt,N as xt,a as Et,i as Pt,b as S,d as _e,u as Fe,e as we,f as F,r as tt,g as Ae,o as p,h as P,j as b,k as C,w as i,l as v,t as I,m as Ge,n as W,p as o,q as $,s as pe,v as _,x as q,y as Dt,z as ee,A as R,B as It,C as ye,F as V,D as Wt,W as je,E as nt,G as at,H as Bt,I as st,J as Kt,K as Tt,L as le,M as j,O as Y,R as fe,S as rt,T as qe,U as ot,V as zt,X as Nt,Y as Rt,_ as it,Z as c,$ as N,a0 as lt,a1 as X,a2 as J,a3 as ce,a4 as ct,a5 as ne,a6 as Ft,a7 as ke,a8 as ut,a9 as Ke,aa as Lt,ab as $t,ac as te,ad as He,ae as Q,af as Vt,ag as Ot,ah as Xe,ai as ge,aj as Je,ak as dt,al as Ze,am as Ye,an as de,ao as Ut,ap as Qt,aq as De,ar as Ie,as as ie,at as Gt,au as jt,av as qt,aw as Ht,ax as Xt,ay as Jt,az as Zt,aA as Yt,aB as en,aC as tn,aD as nn,aE as an,aF as sn,aG as rn,aH as on,aI as ln,aJ as cn,aK as un,aL as dn,aM as mn,aN as hn,aO as pn,aP as yn,aQ as fn,aR as gn,aS as bn,aT as _n,aU as wn,aV as An,aW as kn,aX as vn,aY as Cn,aZ as Sn,a_ as Mn,a$ as xn,b0 as En,b1 as Pn,b2 as Dn}from"./vendor.292104ca.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerpolicy&&(r.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?r.credentials="include":a.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();const In=({app:n})=>{const e=Ct();n.use(e)},Wn=Object.freeze(Object.defineProperty({__proto__:null,install:In},Symbol.toStringTag,{value:"Module"})),Bn=({app:n})=>{n.use(St,{plugins:{Dark:Mt,Notify:xt,LocalStorage:Et},iconSet:Pt})},Kn=Object.freeze(Object.defineProperty({__proto__:null,install:Bn},Symbol.toStringTag,{value:"Module"}));function Le(n,e=4){return n instanceof S&&(n=n.toBase58()),`${n.slice(0,e)}...${n.slice(-e)}`}const Tn="/sol-messenger/assets/ledger.40cf6861.svg",zn="/sol-messenger/assets/mathwallet.1d763e81.svg",mt=n=>(nt("data-v-0bdf22f0"),n=n(),at(),n),Nn=mt(()=>_("div",{class:"text-h6 text-center"}," Your wallet ",-1)),Rn={class:"q-gutter-md row justify-between"},Fn=mt(()=>_("div",{class:"text-h6"}," Connect to a wallet ",-1)),Ln={class:"text-light-gray text-caption full-width text-no-wrap",style:{"text-overflow":"ellipsis",overflow:"hidden"}},$n=["src"],Vn=_e({__name:"ConnectWallet",setup(n){const e={solflare:10,phantom:20,sollet:5,nufi:5,blocto:1},t={ledger:Tn,mathwallet:zn},s={close:Wt},a=d=>[je.Installed,je.Loadable].includes(d.readyState);Fe();const r=we(),{connected:l,connecting:m}=r,f=F(()=>{var d,h;return(h=(d=r.publicKey.value)==null?void 0:d.toBase58())!=null?h:""}),y=F(()=>Le(f.value)),M=F(()=>[...r.wallets.value].map(d=>(d.darkIcon=t[d.name.toLowerCase()],d)).sort((d,h)=>{var D,L;const w=(D=e[d.name.toLowerCase()])!=null?D:1;return((L=e[h.name.toLowerCase()])!=null?L:1)-w+((a(h)?1:0)-(a(d)?1:0))})),g=tt(!1);async function A(d){await r.select(d.name),g.value=!1,await r.connect()}function E(){g.value=!1,r.disconnect()}function O(){g.value=!0}function U(){g.value=!1}return(d,h)=>{const w=Ae("copy-to-clipboard");return p(),P(V,null,[b(l)?(p(),C(W,Ge({key:0},d.$attrs,{class:d.$style.btn,ripple:!1,color:"primary-gray","text-color":"white",rounded:"",unelevated:"",onClick:O}),{default:i(()=>[v(I(b(y)),1)]),_:1},16,["class"])):(p(),C(W,Ge({key:1},d.$attrs,{color:"primary-gray","text-color":"white",rounded:"",unelevated:"",ripple:!1,loading:b(m),onClick:O}),{default:i(()=>[v(" CONNECT WALLET ")]),_:1},16,["loading"])),o(ye,{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=x=>g.value=x),"transition-duration":"100","transition-show":"fade","transition-hide":"fade"},{default:i(()=>[b(l)?(p(),C(q,{key:0},{default:i(()=>[o($,{class:"relative-position"},{default:i(()=>[Nn,o(W,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:s.close,size:"md",onClick:U},null,8,["icon"])]),_:1}),o(pe),o($,null,{default:i(()=>[o(w,{text:b(f)},null,8,["text"]),v(" "+I(b(f)),1)]),_:1}),o(pe),o($,null,{default:i(()=>[_("div",Rn,[o(W,{outline:"",rounded:"",onClick:E},{default:i(()=>[v(" Disconnect ")]),_:1}),o(W,{outline:"",rounded:"",onClick:U},{default:i(()=>[v(" Ok ")]),_:1})])]),_:1})]),_:1})):(p(),C(q,{key:1,class:"wallet-connect-card"},{default:i(()=>[o($,null,{default:i(()=>[Fn,o(W,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:s.close,size:"md",onClick:U},null,8,["icon"])]),_:1}),o(pe),o($,{style:{"max-height":"80vh"},class:"scroll"},{default:i(()=>[o(Dt,{grid:"",rows:b(M),"row-key":"name","hide-pagination":"","hide-header":"","rows-per-page-options":[100]},{item:i(({row:x})=>[(p(),P("div",{key:`wallet-${x.name}`,class:"col-12 col-md-6"},[o(ee,{clickable:"",disable:!a(x),onClick:D=>A(x)},{default:i(()=>[o(R,null,{default:i(()=>[_("b",null,I(x.name),1),_("div",Ln,I(x.url),1)]),_:2},1024),o(R,{avatar:""},{default:i(()=>[o(It,{square:""},{default:i(()=>{var D;return[_("img",{src:d.$q.dark.isActive?x.icon:(D=x.darkIcon)!=null?D:x.icon,alt:""},null,8,$n)]}),_:2},1024)]),_:2},1024)]),_:2},1032,["disable","onClick"])]))]),_:1},8,["rows"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])],64)}}});const On="_btn_6n1iw_1",Un={btn:On},ue=(n,e)=>{const t=n.__vccOpts||n;for(const[s,a]of e)t[s]=a;return t},Qn={$style:Un},Gn=ue(Vn,[["__cssModules",Qn],["__scopeId","data-v-0bdf22f0"]]),ae=[{id:"jpool-mainnet",name:"Jpool RPC",cluster:"mainnet-beta",url:"https://jpoolone.genesysgo.net/"},{id:"serum-mainnet",name:"Serum RPC",cluster:"mainnet-beta",url:"https://solana-api.projectserum.com/"},{id:"rpcpool-mainnet",name:"RPCPool RPC",cluster:"mainnet-beta",url:"https://mainnet.rpcpool.com/"},{id:"mainnet",name:"Solana RPC",cluster:"mainnet-beta",url:Bt("mainnet-beta")}],ht={id:"devnet",name:"DevNet",cluster:"devnet",url:"https://devnet.rpcpool.com/"};ae.push(ht);const jn={id:"testnet",name:"TestNet",cluster:"testnet",url:"https://testnet.rpcpool.com/"};ae.push(jn);var et;const qn=(et=ae.find(n=>n.id==={VITE_BASE_PATH:"/sol-messenger/",BASE_URL:"/sol-messenger/",MODE:"staging",DEV:!1,PROD:!0}.VITE_CONNECTION_ENDPOINT))!=null?et:ht,Hn="confirmed",Xn=12e4,$e=st({id:"connection",state:()=>({commitment:Hn,confirmTransactionInitialTimeout:Xn,rpc:Kt("rpc","")}),getters:{endpoint(n){var e;return(e=ae.find(t=>t.id===n.rpc))!=null?e:qn},connection(n){return console.log("[connection]",this.endpoint.url),new Tt(this.endpoint.url,{confirmTransactionInitialTimeout:n.confirmTransactionInitialTimeout,commitment:n.commitment})},cluster(){return this.endpoint.cluster}},actions:{setRpc(n){this.rpc=n},setCommitment(n){this.commitment=n}}}),Jn=_e({__name:"ClusterSelector",setup(n){const e=$e(),{connected:t,connect:s,disconnect:a,autoConnect:r}=we(),l=[ae.filter(y=>y.cluster==="mainnet-beta"),ae.filter(y=>y.cluster!=="mainnet-beta")],m=F(()=>e.endpoint),f=y=>{t&&e.cluster!==y.cluster&&(a(),r.value&&s()),e.setRpc(y.id)};return(y,M)=>(p(),C(rt,{label:b(m).name,"model-value":!1,"auto-close":"",color:"secondary","text-color":"grey-8",rounded:"",unelevated:"",ripple:!1},{default:i(()=>[o(fe,null,{default:i(()=>[(p(),P(V,null,le(l,(g,A)=>(p(),P(V,{key:`${A}-cluster-group`},[(p(!0),P(V,null,le(g,E=>(p(),C(ee,{key:E.id,clickable:"",onClick:O=>f(E)},{default:i(()=>[(p(),C(R,{key:`${E.id}-item`},{default:i(()=>[o(j,null,{default:i(()=>[_("b",null,I(E.name),1)]),_:2},1024),v(" "+I(E.url),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128)),A!==l.length-1?(p(),C(pe,{key:0})):Y("",!0)],64))),64))]),_:1})]),_:1},8,["label"]))}}),Zn={},Yn={class:"container"},ea={class:"app-header__logo"},ta=_("div",{class:"app-header__nav"},[_("a",{href:"https://jpool.one",target:"_blank"},"JPOOL"),_("a",{href:"https://dev.svt.one",target:"_blank"},"Validator toolkit")],-1),na={class:"app-header__right"},aa={class:"app-header__buttons"};function sa(n,e){const t=Ae("router-link"),s=Jn,a=Gn;return p(),C(zt,{class:"app-header"},{default:i(()=>[_("div",Yn,[o(ot,null,{default:i(()=>[_("div",ea,[o(t,{to:"/"},{default:i(()=>[v(" SOM ")]),_:1})]),o(qe),ta,o(qe),_("div",na,[_("div",aa,[o(s,{class:"app-header__cluster-btn"}),o(a,{class:"app-header__wallet-btn"})])])]),_:1})])]),_:1})}const ra=ue(Zn,[["render",sa]]),oa={};function ia(n,e){const t=ra,s=Ae("router-view");return p(),C(Nt,{view:"lfh Lpr lff"},{default:i(()=>[o(t),o(Rt,null,{default:i(()=>[o(s)]),_:1})]),_:1})}const la=ue(oa,[["render",ia]]),ca={default:la,empty:()=>it(()=>import("./empty.4a8474fa.js"),["assets/empty.4a8474fa.js","assets/vendor.292104ca.js"])};function ua(n){return n.map(e=>{var t;return{path:e.path,component:ca[((t=e.meta)==null?void 0:t.layout)||"default"],children:[{...e,path:""}]}})}const da=new c.FixableBeetArgsStruct([["id",c.u32],["sender",N],["createdAt",c.i64],["content",c.utf8String]],"Message"),Te=[49,159,99,106,220,87,219,88];class z{constructor(e,t,s,a,r,l,m){this.name=e,this.creator=t,this.createdAt=s,this.memberCount=a,this.messageCount=r,this.maxMessages=l,this.messages=m}static fromArgs(e){return new z(e.name,e.creator,e.createdAt,e.memberCount,e.messageCount,e.maxMessages,e.messages)}static fromAccountInfo(e,t=0){return z.deserialize(e.data,t)}static async fromAccountAddress(e,t,s){const a=await e.getAccountInfo(t,s);if(a==null)throw new Error(`Unable to find Channel account at ${t}`);return z.fromAccountInfo(a,0)[0]}static gpaBuilder(e=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){return lt.fromStruct(e,me)}static deserialize(e,t=0){return me.deserialize(e,t)}serialize(){return me.serialize({accountDiscriminator:Te,...this})}static byteSize(e){const t=z.fromArgs(e);return me.toFixedFromValue({accountDiscriminator:Te,...t}).byteSize}static async getMinimumBalanceForRentExemption(e,t,s){return t.getMinimumBalanceForRentExemption(z.byteSize(e),s)}pretty(){return{name:this.name,creator:this.creator.toBase58(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),memberCount:this.memberCount,messageCount:this.messageCount,maxMessages:this.maxMessages,messages:this.messages}}}const me=new c.FixableBeetStruct([["accountDiscriminator",c.uniformFixedSizeArray(c.u8,8)],["name",c.utf8String],["creator",N],["createdAt",c.i64],["memberCount",c.u16],["messageCount",c.u32],["maxMessages",c.u16],["messages",c.array(da)]],z.fromArgs,"Channel"),ve=new c.FixableBeetArgsStruct([["header",c.utf8String],["encryptedKey",c.utf8String]],"CEKData"),ma=c.dataEnum([["Authorized",new c.FixableBeetArgsStruct([["by",c.coption(N)]],'ChannelMembershipStatusRecord["Authorized"]')],["Pending",new c.FixableBeetArgsStruct([["authority",c.coption(N)]],'ChannelMembershipStatusRecord["Pending"]')]]),be=[238,149,255,251,116,131,86,170];class K{constructor(e,t,s,a,r,l,m,f,y){this.channel=e,this.authority=t,this.key=s,this.cek=a,this.status=r,this.name=l,this.invitedBy=m,this.createdAt=f,this.bump=y}static fromArgs(e){return new K(e.channel,e.authority,e.key,e.cek,e.status,e.name,e.invitedBy,e.createdAt,e.bump)}static fromAccountInfo(e,t=0){return K.deserialize(e.data,t)}static async fromAccountAddress(e,t,s){const a=await e.getAccountInfo(t,s);if(a==null)throw new Error(`Unable to find ChannelMembership account at ${t}`);return K.fromAccountInfo(a,0)[0]}static gpaBuilder(e=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){return lt.fromStruct(e,he)}static deserialize(e,t=0){return he.deserialize(e,t)}serialize(){return he.serialize({accountDiscriminator:be,...this})}static byteSize(e){const t=K.fromArgs(e);return he.toFixedFromValue({accountDiscriminator:be,...t}).byteSize}static async getMinimumBalanceForRentExemption(e,t,s){return t.getMinimumBalanceForRentExemption(K.byteSize(e),s)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),key:this.key.toBase58(),cek:this.cek,status:this.status.__kind,name:this.name,invitedBy:this.invitedBy,createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),bump:this.bump}}}const he=new c.FixableBeetStruct([["accountDiscriminator",c.uniformFixedSizeArray(c.u8,8)],["channel",N],["authority",N],["key",N],["cek",ve],["status",ma],["name",c.utf8String],["invitedBy",c.coption(N)],["createdAt",c.i64],["bump",c.u8]],K.fromArgs,"ChannelMembership"),re=new Map,oe=new Map;class Ce extends Error{constructor(){super("Unauthorized");B(this,"code",6e3);B(this,"name","Unauthorized");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ce)}}re.set(6e3,()=>new Ce);oe.set("Unauthorized",()=>new Ce);class Se extends Error{constructor(){super("Name too long");B(this,"code",6001);B(this,"name","NameTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Se)}}re.set(6001,()=>new Se);oe.set("NameTooLong",()=>new Se);class Me extends Error{constructor(){super("Message too long");B(this,"code",6002);B(this,"name","MessageTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Me)}}re.set(6002,()=>new Me);oe.set("MessageTooLong",()=>new Me);class xe extends Error{constructor(){super("Already in use");B(this,"code",6003);B(this,"name","AlreadyInUse");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,xe)}}re.set(6003,()=>new xe);oe.set("AlreadyInUse",()=>new xe);class Ee extends Error{constructor(){super("Uninitialized account");B(this,"code",6004);B(this,"name","UninitializedAccount");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Ee)}}re.set(6004,()=>new Ee);oe.set("UninitializedAccount",()=>new Ee);function G(n){const e=re.get(n);return e!=null?e():null}function Z(n){const e=oe.get(n);return e!=null?e():null}const ha=new c.FixableBeetArgsStruct([["name",c.utf8String],["cek",ve],["key",c.coption(N)]],"AddMemberData"),pa=new c.FixableBeetArgsStruct([["instructionDiscriminator",c.uniformFixedSizeArray(c.u8,8)],["data",ha]],"AddMemberInstructionArgs"),ya=[13,116,123,130,126,198,57,34];function fa(n,e,t=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){var l;const[s]=pa.serialize({instructionDiscriminator:ya,...e}),a=[{pubkey:n.channel,isWritable:!0,isSigner:!1},{pubkey:n.invitee,isWritable:!1,isSigner:!1},{pubkey:n.inviteeMembership,isWritable:!0,isSigner:!1},{pubkey:n.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:n.authority,isWritable:!0,isSigner:!0},{pubkey:(l=n.systemProgram)!=null?l:X.programId,isWritable:!1,isSigner:!1}];if(n.anchorRemainingAccounts!=null)for(const m of n.anchorRemainingAccounts)a.push(m);return new J({programId:t,keys:a,data:s})}const ga=new c.FixableBeetArgsStruct([["cek",ve]],"AuthorizeMemberData"),ba=new c.FixableBeetArgsStruct([["instructionDiscriminator",c.uniformFixedSizeArray(c.u8,8)],["data",ga]],"AuthorizeMemberInstructionArgs"),_a=[194,123,189,175,86,225,93,128];function wa(n,e,t=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){var l;const[s]=ba.serialize({instructionDiscriminator:_a,...e}),a=[{pubkey:n.channel,isWritable:!1,isSigner:!1},{pubkey:n.membership,isWritable:!0,isSigner:!1},{pubkey:n.authority,isWritable:!1,isSigner:!0},{pubkey:n.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:(l=n.systemProgram)!=null?l:X.programId,isWritable:!1,isSigner:!1}];if(n.anchorRemainingAccounts!=null)for(const m of n.anchorRemainingAccounts)a.push(m);return new J({programId:t,keys:a,data:s})}const Aa=new c.BeetArgsStruct([["instructionDiscriminator",c.uniformFixedSizeArray(c.u8,8)]],"DeleteChannelInstructionArgs"),ka=[145,225,187,221,157,142,114,133];function va(n,e=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){var r;const[t]=Aa.serialize({instructionDiscriminator:ka}),s=[{pubkey:n.channel,isWritable:!0,isSigner:!1},{pubkey:n.authority,isWritable:!0,isSigner:!0},{pubkey:n.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:(r=n.systemProgram)!=null?r:X.programId,isWritable:!1,isSigner:!1}];if(n.anchorRemainingAccounts!=null)for(const l of n.anchorRemainingAccounts)s.push(l);return new J({programId:e,keys:s,data:t})}const Ca=new c.BeetArgsStruct([["instructionDiscriminator",c.uniformFixedSizeArray(c.u8,8)]],"DeleteMemberInstructionArgs"),Sa=[95,14,98,112,252,218,205,173];function Ma(n,e=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){var r;const[t]=Ca.serialize({instructionDiscriminator:Sa}),s=[{pubkey:n.channel,isWritable:!0,isSigner:!1},{pubkey:n.membership,isWritable:!0,isSigner:!1},{pubkey:n.authority,isWritable:!0,isSigner:!0},{pubkey:n.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:(r=n.systemProgram)!=null?r:X.programId,isWritable:!1,isSigner:!1}];if(n.anchorRemainingAccounts!=null)for(const l of n.anchorRemainingAccounts)s.push(l);return new J({programId:e,keys:s,data:t})}const xa=new c.FixableBeetArgsStruct([["name",c.utf8String],["maxMessages",c.u16],["memberName",c.utf8String],["cek",ve]],"InitChannelData"),Ea=new c.FixableBeetArgsStruct([["instructionDiscriminator",c.uniformFixedSizeArray(c.u8,8)],["data",xa]],"InitChannelInstructionArgs"),Pa=[21,200,152,39,19,178,76,47];function Da(n,e,t=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){var l;const[s]=Ea.serialize({instructionDiscriminator:Pa,...e}),a=[{pubkey:n.channel,isWritable:!0,isSigner:!0},{pubkey:n.membership,isWritable:!0,isSigner:!1},{pubkey:n.authority,isWritable:!0,isSigner:!0},{pubkey:n.key,isWritable:!1,isSigner:!0},{pubkey:(l=n.systemProgram)!=null?l:X.programId,isWritable:!1,isSigner:!1}];if(n.anchorRemainingAccounts!=null)for(const m of n.anchorRemainingAccounts)a.push(m);return new J({programId:t,keys:a,data:s})}const Ia=new c.FixableBeetArgsStruct([["name",c.utf8String],["authority",c.coption(N)]],"JoinChannelData"),Wa=new c.FixableBeetArgsStruct([["instructionDiscriminator",c.uniformFixedSizeArray(c.u8,8)],["data",Ia]],"JoinChannelInstructionArgs"),Ba=[124,39,115,89,217,26,38,29];function Ka(n,e,t=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){var l;const[s]=Wa.serialize({instructionDiscriminator:Ba,...e}),a=[{pubkey:n.channel,isWritable:!0,isSigner:!1},{pubkey:n.membership,isWritable:!0,isSigner:!1},{pubkey:n.authority,isWritable:!0,isSigner:!0},{pubkey:n.key,isWritable:!1,isSigner:!0},{pubkey:(l=n.systemProgram)!=null?l:X.programId,isWritable:!1,isSigner:!1}];if(n.anchorRemainingAccounts!=null)for(const m of n.anchorRemainingAccounts)a.push(m);return new J({programId:t,keys:a,data:s})}const Ta=new c.FixableBeetArgsStruct([["instructionDiscriminator",c.uniformFixedSizeArray(c.u8,8)],["message",c.utf8String]],"PostMessageInstructionArgs"),za=[214,50,100,209,38,34,7,76];function Na(n,e,t=new S("6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm")){var l;const[s]=Ta.serialize({instructionDiscriminator:za,...e}),a=[{pubkey:n.channel,isWritable:!0,isSigner:!1},{pubkey:n.membership,isWritable:!1,isSigner:!1},{pubkey:n.authority,isWritable:!1,isSigner:!0},{pubkey:(l=n.systemProgram)!=null?l:X.programId,isWritable:!1,isSigner:!1}];if(n.anchorRemainingAccounts!=null)for(const m of n.anchorRemainingAccounts)a.push(m);return new J({programId:t,keys:a,data:s})}const Ra="6RSutwAoRcQPAMwyxZdNeG76fdAxzhgxkCJXpqKCBPdm",Fa=new S(Ra);function ze(n,e=new Uint8Array(4)){const t=ce(n.toString(),"base10");return e.set(t,4-t.length),e}const We=n=>ne([ze(n.length),n]);function pt(n,e,t){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const s=ne([We(ce(t)),We(new Uint8Array(0)),We(new Uint8Array(0)),ze(e)]),a=1;return Ft.hash(ne([ze(a),n,s]))}const Ne=n=>ce(n,"base64pad"),Re=n=>ct(n,"base64pad"),La=n=>ce(n),$a=n=>ct(n),Va=n=>ce(n,"base58btc"),H=ke.NONCE_LENGTH,se=ke.TAG_LENGTH,yt=n=>{const e=new ke.XChaCha20Poly1305(n);return(t,s)=>{const a=ut.randomBytes(H),r=e.seal(a,t,s);return{ciphertext:r.subarray(0,r.length-se),tag:r.subarray(r.length-se),iv:a}}},ft=n=>{const e=new ke.XChaCha20Poly1305(n);return(t,s,a,r)=>e.open(a,ne([t,s]),r)},gt="ECDH-ES+XC20PKW",bt=256,Oa=n=>e=>{const t=Ke.generateKeyPair(),s=Ke.sharedKey(t.secretKey,n),a=pt(s,bt,gt),r=yt(a)(e);return{encryptedKey:r.ciphertext,tag:r.tag,iv:r.iv,epPubKey:t.publicKey}},Ua=n=>(e,t,s,a)=>{const r=Ke.sharedKey(n,a),l=pt(r,bt,gt);return ft(l)(e,t,s)},Qa=n=>{if(Array.isArray(n))return te.fromSecretKey(He.Buffer.from(n));if(typeof n=="string")return te.fromSecretKey(Va(n));if(n instanceof He.Buffer||n instanceof Uint8Array)return te.fromSecretKey(n);throw new Error("Incompatible private key format")},Ga=async(n=32)=>{const e=ut.randomBytes(n);return Promise.resolve(e)},ja=async(n,e)=>{const t=await Oa(Lt(e.toBytes()))(n);return{header:Re(ne([t.iv,t.tag,t.epPubKey])),encryptedKey:Re(t.encryptedKey)}},qa=async(n,e)=>{const t=Ne(n.header),s=t.subarray(0,H),a=t.subarray(H,H+se),r=t.subarray(H+se),l=Ne(n.encryptedKey),m=Qa(e).secretKey,f=$t(m),y=await Ua(f)(l,a,s,r);if(y===null)throw new Error("There was a problem decrypting the CEK");return y},Ha=async(n,e)=>{const t=await yt(e)(La(n));return Re(ne([t.iv,t.ciphertext,t.tag]))},Xa=async(n,e)=>{const t=Ne(n),s=t.subarray(0,H),a=t.subarray(H,-se),r=t.subarray(-se),l=await ft(e)(a,r,s);if(l===null)throw new Error("There was an error decoding the message!");return $a(l)};class Ja{constructor(e,t){B(this,"programId",Fa);this.provider=e,this.keypair=t}get connection(){return this.provider.connection}setKeypair(e){this.keypair=e}async loadAllChannels(){return(await z.gpaBuilder().addFilter("accountDiscriminator",Te).run(this.provider.connection)).map(t=>({pubkey:t.pubkey,data:z.fromAccountInfo(t.account)[0]}))}async loadChannel(e,t){return z.fromAccountAddress(this.provider.connection,e,t)}async loadMyChannels(){const e=await this.loadMemberships();return console.log(e),[]}async loadChannelMembers(e){return(await K.gpaBuilder().addFilter("accountDiscriminator",be).addFilter("channel",e).run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:K.fromAccountInfo(s.account)[0]}))}async loadMemberships(e){return(await K.gpaBuilder().addFilter("accountDiscriminator",be).addFilter("authority",this.provider.publicKey).addFilter("key",e).run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:K.fromAccountInfo(s.account)}))}async loadMembership(e,t){return K.fromAccountAddress(this.provider.connection,e,t)}async getMembershipPDA(e,t){return t=t!=null?t:this.keypair.publicKey,await S.findProgramAddress([e.toBuffer(),t.toBuffer()],this.programId)}async encryptCEK(e,t){return ja(e,t!=null?t:this.keypair.publicKey)}async decryptCEK(e,t){return qa(e,t!=null?t:this.keypair.secretKey)}async encryptMessage(e,t){return Ha(e,t)}async decryptMessage(e,t){return Xa(e,t)}async initChannel(e){var f,y,M;const t=(f=e.channel)!=null?f:te.generate(),s=await Ga(),a=await this.encryptCEK(s),[r]=await this.getMembershipPDA(t.publicKey),l=new Q;l.add(Da({channel:t.publicKey,membership:r,authority:this.provider.publicKey,key:this.keypair.publicKey},{data:{name:e.name,memberName:(y=e.memberName)!=null?y:"",maxMessages:e.maxMessages,cek:a}}));let m;try{m=await this.provider.sendAndConfirm(l,[t,this.keypair])}catch(g){throw(M=G(g.code))!=null?M:g}return{signature:m,channel:t,cek:s,cekEncrypted:a}}async deleteChannel(e,t){var l;const[s]=await this.getMembershipPDA(e),a=new Q;a.add(va({channel:e,authority:this.provider.publicKey,authorityMembership:t!=null?t:s}));let r;try{r=await this.provider.sendAndConfirm(a)}catch(m){throw(l=G(m.code))!=null?l:Z("Unauthorized")}return{signature:r}}async joinChannel(e){var r;const[t]=await this.getMembershipPDA(e.channel),s=new Q;s.add(Ka({channel:e.channel,authority:this.provider.publicKey,key:this.keypair.publicKey,membership:t},{data:{name:e.name,authority:e.authority}}));let a;try{a=await this.provider.sendAndConfirm(s,[this.keypair])}catch(l){throw(r=G(l.code))!=null?r:l}return{signature:a}}async addMember(e){var M,g,A;const t=(M=e.key)!=null?M:e.invitee,[s]=await this.getMembershipPDA(e.channel),[a]=await this.getMembershipPDA(e.channel,t),r=await this.loadMembership(s);if(!r.cek.encryptedKey)throw Z("Unauthorized");const l=await this.decryptCEK(r.cek),m=await this.encryptCEK(l,t),f=new Q;f.add(fa({channel:e.channel,authority:this.provider.publicKey,invitee:e.invitee,authorityMembership:s,inviteeMembership:a},{data:{name:(g=e.name)!=null?g:"",cek:m,key:t}}));let y;try{y=await this.provider.sendAndConfirm(f)}catch(E){throw(A=G(E.code))!=null?A:Z("Unauthorized")}return{signature:y}}async deleteMember(e){var l;const[t]=await this.getMembershipPDA(e.channel),[s]=await this.getMembershipPDA(e.channel,e.key),a=new Q;a.add(Ma({channel:e.channel,authority:this.provider.publicKey,authorityMembership:t,membership:s}));let r;try{r=await this.provider.sendAndConfirm(a)}catch(m){throw(l=G(m.code))!=null?l:m}return{signature:r}}async authorizeMember(e){var y;const[t]=await this.getMembershipPDA(e.channel),[s]=await this.getMembershipPDA(e.channel,e.key),a=await this.loadMembership(t);if(!a.cek.encryptedKey)throw Z("Unauthorized");const r=await this.decryptCEK(a.cek),l=await this.encryptCEK(r,e.key),m=new Q;m.add(wa({channel:e.channel,membership:s,authority:this.provider.publicKey,authorityMembership:t},{data:{cek:l}}));let f;try{f=await this.provider.sendAndConfirm(m)}catch(M){throw(y=G(M.code))!=null?y:Z("Unauthorized")}return{signature:f}}async postMessage(e){var f;const[t]=await this.getMembershipPDA(e.channel),s=await this.loadMembership(t);if(!s.cek.header)throw Z("Unauthorized");const a=await this.decryptCEK(s.cek),r=await this.encryptMessage(e.message,a),l=new Q;l.add(Na({channel:e.channel,membership:t,authority:this.provider.publicKey},{message:r}));let m;try{m=await this.provider.sendAndConfirm(l)}catch(y){throw(f=G(y.code))!=null?f:y}return{signature:m}}}const Za=st("messenger",()=>{const n=$e(),e=Vt(),t=Ot("key",()=>Xe.encode(te.generate().secretKey)),s=te.fromSecretKey(Xe.decode(t.value)),a=ge({allChannels:[],channel:void 0,channelAddr:void 0,channelMembership:void 0,channelMembers:[],channelMessages:[],channelLoading:!1,loading:!1,creating:!1,sending:!1}),r=F(()=>{var d;return new Ja(new Je(n.connection,(d=e.value)!=null?d:{publicKey:S.default},Je.defaultOptions()),s)});l().then();async function l(){a.loading=!0;const d=await r.value.loadAllChannels();for(const h of d){console.log(`Channel: ${h.pubkey}`),console.log(h.data.pretty());const w=await r.value.loadChannelMembers(h.pubkey);console.log("|-- members:");for(const x of w)console.log(x.data.pretty())}dt(e,h=>{(h==null?void 0:h.publicKey)&&a.channelAddr&&M(a.channelAddr)}),a.allChannels=d,a.loading=!1}async function m(d,h=15){try{a.creating=!0;const{channel:w}=await r.value.initChannel({name:d,maxMessages:h});await M(w.publicKey),a.channel&&a.allChannels.push({pubkey:w.publicKey,data:a.channel})}finally{a.creating=!1}}async function f(d){const h=new S(d);await r.value.deleteChannel(h)}async function y(d,h){const w=new S(d);await r.value.joinChannel({channel:w,name:h})}async function M(d){var h;a.channelLoading=!0,a.channelAddr=new S(d);try{if((h=e.value)!=null&&h.publicKey)try{const[w]=await r.value.getMembershipPDA(a.channelAddr);a.channelMembership=await r.value.loadMembership(w)}catch(w){console.log(w)}await Promise.all([A(),g()])}catch(w){console.log("Error",w)}finally{a.channelLoading=!1}}async function g(){if(!a.channelAddr){console.log("Invalid channel");return}a.channel=await r.value.loadChannel(a.channelAddr);const d=a.channelMembership?await r.value.decryptCEK(a.channelMembership.cek):null;a.channelMessages=await Promise.all(a.channel.messages.map(async h=>{let w="***** *** *** *** *******",x=Le(h.sender);const D=a.channelMembers.find(({data:L})=>String(L.authority)===String(h.sender)||String(L.key)===String(h.sender));if(D&&D.data.name!==""&&(x=D.data.name),d)try{w=await r.value.decryptMessage(h.content,d)}catch{console.log(`Failed to decrypt message #${h.id}`)}return{...h,sender:x,content:w}}))}async function A(){if(!a.channelAddr){console.error("Invalid channel");return}a.channelMembers=await r.value.loadChannelMembers(a.channelAddr)}async function E(d){if(!a.channelAddr){console.log("Please select a channel");return}try{a.sending=!0,await r.value.postMessage({channel:a.channelAddr,message:d}),await g()}finally{a.sending=!1}}async function O(d,h,w){if(!a.channelAddr){console.log("Invalid channel");return}await r.value.addMember({channel:a.channelAddr,invitee:new S(d),key:h?new S(h):void 0,name:w})}async function U(d){if(!a.channelAddr){console.log("Invalid channel");return}await r.value.authorizeMember({channel:a.channelAddr,key:new S(d)})}return{state:a,client:r.value,keypair:s,loadChannel:M,joinChannel:y,createChannel:m,deleteChannel:f,postMessage:E,addMember:O,authorizeMember:U}}),Ya=n=>(nt("data-v-e98cfe9a"),n=n(),at(),n),es={class:"messenger"},ts={class:"row q-gutter-md"},ns={class:"col col-3"},as={class:"messenger-add-channel"},ss={key:1,class:"messenger-channels-empty"},rs={class:"col"},os={key:0},is={class:"row"},ls={key:0,class:"col"},cs={class:"col"},us={class:"channel-name"},ds={key:0,class:"row justify-center"},ms={key:0,class:"messenger-messages"},hs={key:1,class:"messenger-empty"},ps={key:1,class:"messenger-empty"},ys=Ya(()=>_("br",null,null,-1)),fs=_e({__name:"Messenger",setup(n){const{notify:e}=Fe(),t=we(),{state:s,postMessage:a,addMember:r,authorizeMember:l,createChannel:m,loadChannel:f,deleteChannel:y}=Za(),M=tt(!1),g=ge({dialog:!1,loading:!1,name:"",key:""}),A=ge({dialog:!1,name:"",maxMessages:15}),E=ge({message:""});async function O(){D()&&(await a(E.message),E.message="")}function U(){D()&&(A.dialog=!0)}async function d(){D()&&(await m(A.name,A.maxMessages),A.dialog=!1,A.name="",e({type:"positive",message:"Channel was created!",timeout:2e3}))}async function h(){g.loading=!1,g.name="",g.key=""}async function w(T){try{await l(T),e({type:"info",message:"Member was authorized",timeout:2e3})}catch{e({type:"negative",message:"Something went wrong",timeout:2e3})}}async function x(){if(g.loading=!0,!s.channelAddr){e({type:"info",message:"Please select a channel",timeout:2e3});return}await r(s.channelAddr,g.key,g.name),g.loading=!1}function D(){return t.publicKey.value?!0:(e({type:"negative",message:"Please connect wallet",timeout:2e3}),!1)}async function L(T){}async function _t(T){await y(T),e({type:"positive",message:"Channel was deleted!",timeout:2e3})}async function wt(T){await f(T)}function At(T){if((T==null?void 0:T.__kind)==="Authorized")return"positive"}const Ve=F(()=>!!t.publicKey.value),Oe=F(()=>s.allChannels),Ue=F(()=>s.channelMessages),Qe=F(()=>t.publicKey.value&&s.channel&&!s.sending);return(T,k)=>(p(),P(V,null,[_("div",es,[_("div",ts,[_("div",ns,[_("div",as,[o(W,{color:"primary",rounded:"",onClick:U},{default:i(()=>[v(" Add New Channel ")]),_:1})]),o(q,{class:"messenger-channels"},{default:i(()=>[b(Oe).length>0?(p(),C(fe,{key:0,separator:""},{default:i(()=>[(p(!0),P(V,null,le(b(Oe),u=>(p(),C(ee,{key:u.name,"active-class":"bg-blue-grey-1 text-grey-8",active:String(b(s).channelAddr)===String(u.pubkey)},{default:i(()=>[o(R,{class:"cursor-pointer",onClick:Pe=>wt(u.pubkey)},{default:i(()=>[o(j,null,{default:i(()=>[v(I(u.data.name),1)]),_:2},1024),o(j,{caption:"",lines:"2"},{default:i(()=>[_("div",null,"members: "+I(u.data.memberCount),1),_("div",null,"messages: "+I(u.data.messageCount),1)]),_:2},1024)]),_:2},1032,["onClick"]),o(R,{side:""},{default:i(()=>[b(Ve)?(p(),C(rt,{key:0,unelevated:"",rounded:""},{default:i(()=>[o(fe,null,{default:i(()=>[Ze((p(),C(ee,{clickable:"",onClick:Pe=>L(u.pubkey)},{default:i(()=>[o(R,null,{default:i(()=>[o(j,null,{default:i(()=>[v("Join channel")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[Ye]]),String(u.data.creator)===String(b(t).publicKey.value)?Ze((p(),C(ee,{key:0,clickable:"",onClick:Pe=>_t(u.pubkey)},{default:i(()=>[o(R,{class:"text-negative"},{default:i(()=>[o(j,null,{default:i(()=>[v("Delete channel")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[Ye]]):Y("",!0)]),_:2},1024)]),_:2},1024)):Y("",!0)]),_:2},1024)]),_:2},1032,["active"]))),128))]),_:1})):(p(),P("div",ss," No channels ")),o(de,{showing:b(s).loading,color:"primary"},null,8,["showing"])]),_:1})]),_("div",rs,[b(s).channel?(p(),P("div",os,[_("div",is,[b(Ve)?(p(),P("div",ls,[o(Ut,{rounded:"",unelevated:""},{default:i(()=>[o(W,{color:"secondary","text-color":"dark",loading:g.loading,onClick:k[0]||(k[0]=u=>g.dialog=!0)},{default:i(()=>[v(" add member ")]),_:1},8,["loading"]),o(W,{color:"primary",onClick:k[1]||(k[1]=u=>M.value=!0)},{default:i(()=>[v(" show members ")]),_:1})]),_:1})])):Y("",!0),_("div",cs,[_("div",us,I(b(s).channel.name),1)])])])):Y("",!0),o(q,{class:"messenger-card overflow-hidden"},{default:i(()=>[b(s).channel?(p(),P("div",ds,[b(Ue).length>0?(p(),P("div",ms,[(p(!0),P(V,null,le(b(Ue),u=>(p(),C(Qt,{key:u.id,name:u.sender,text:[u.content],sent:u.sender===b(t).publicKey.value},null,8,["name","text","sent"]))),128))])):(p(),P("div",hs," No messages "))])):(p(),P("div",ps," Please select a channel ")),o(De,{class:"channel-form",onSubmit:Ie(O,["prevent"])},{default:i(()=>[o(ot,{class:"bg-primary text-white row"},{default:i(()=>[o(ie,{ref:"inputFocus",modelValue:E.message,"onUpdate:modelValue":k[2]||(k[2]=u=>E.message=u),class:"col-grow q-mr-sm","bg-color":"white",placeholder:"Type a message",dense:"",outlined:"",rounded:"",autofocus:"",disable:!b(Qe)},null,8,["modelValue","disable"]),o(W,{rounded:"",flat:"",type:"submit",disable:!b(Qe),loading:b(s).sending},{default:i(()=>[v(" Send ")]),_:1},8,["disable","loading"])]),_:1})]),_:1},8,["onSubmit"]),o(de,{showing:b(s).channelLoading},null,8,["showing"])]),_:1})])])]),o(ye,{modelValue:A.dialog,"onUpdate:modelValue":k[5]||(k[5]=u=>A.dialog=u),class:"new-channel-dialog"},{default:i(()=>[o(q,null,{default:i(()=>[o($,null,{default:i(()=>[o(De,{class:"messenger-new-channel-form",onSubmit:Ie(d,["prevent"])},{default:i(()=>[o(ie,{modelValue:A.name,"onUpdate:modelValue":k[3]||(k[3]=u=>A.name=u),label:"Channel name *","lazy-rules":"",rules:[u=>u&&u.length>2||"Please type something"]},null,8,["modelValue","rules"]),o(ie,{modelValue:A.maxMessages,"onUpdate:modelValue":k[4]||(k[4]=u=>A.maxMessages=u),label:"Max messages","lazy-rules":"",rules:[u=>+u>0||"Invalid value"]},null,8,["modelValue","rules"]),o(W,{type:"submit",color:"info",ripple:!1,rounded:""},{default:i(()=>[v(" Create Channel ")]),_:1})]),_:1},8,["onSubmit"]),o(de,{showing:b(s).creating},null,8,["showing"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(ye,{modelValue:g.dialog,"onUpdate:modelValue":k[8]||(k[8]=u=>g.dialog=u),class:"add-member-dialog",onHide:h},{default:i(()=>[o(q,null,{default:i(()=>[o($,null,{default:i(()=>[o(De,{class:"add-member-form",onSubmit:Ie(x,["prevent"])},{default:i(()=>[o(ie,{modelValue:g.name,"onUpdate:modelValue":k[6]||(k[6]=u=>g.name=u),label:"Member name *","lazy-rules":"",rules:[u=>u&&u.length>2||"Please type something"]},null,8,["modelValue","rules"]),o(ie,{modelValue:g.key,"onUpdate:modelValue":k[7]||(k[7]=u=>g.key=u),label:"Member Key *","lazy-rules":"",rules:[u=>u&&u.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),ys,o(W,{type:"submit",color:"info",ripple:!1,rounded:""},{default:i(()=>[v(" Add Member ")]),_:1})]),_:1},8,["onSubmit"]),o(de,{showing:g.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(ye,{modelValue:M.value,"onUpdate:modelValue":k[9]||(k[9]=u=>M.value=u)},{default:i(()=>[o(q,null,{default:i(()=>[o($,null,{default:i(()=>[o(fe,{separator:""},{default:i(()=>[(p(!0),P(V,null,le(b(s).channelMembers,u=>(p(),C(ee,{key:u.pubkey.toString()},{default:i(()=>[o(R,null,{default:i(()=>[o(j,null,{default:i(()=>[v(I(u.data.name&&u.data.name!==""?u.data.name:u.data.authority),1)]),_:2},1024),o(j,{caption:"",lines:"2"},{default:i(()=>[v(I(u.data.key),1)]),_:2},1024)]),_:2},1024),o(R,{side:"",top:""},{default:i(()=>[o(Gt,{color:At(u.data.status)},{default:i(()=>[v(I(u.data.status.__kind),1)]),_:2},1032,["color"]),u.data.status.__kind==="Pending"&&(!u.data.status.authority||String(u.data.status.authority)===String(b(t).publicKey.value))?(p(),C(W,{key:0,color:"primary",rounded:"",size:"sm",unelevated:"",class:"q-mt-sm",onClick:Pe=>w(u.data.key)},{default:i(()=>[v(" Authorize ")]),_:2},1032,["onClick"])):Y("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const gs=ue(fs,[["__scopeId","data-v-e98cfe9a"]]);const bs={},_s={class:"container"},ws={class:"messenger-container"};function As(n,e){const t=gs;return p(),C(jt,null,{default:i(()=>[_("div",_s,[_("div",ws,[o(t)])])]),_:1})}const ks=ue(bs,[["render",As],["__scopeId","data-v-8856bd2a"]]),vs=()=>it(()=>import("./_...all_.f75de9af.js"),["assets/_...all_.f75de9af.js","assets/_...all_.73169310.css","assets/vendor.292104ca.js"]),Cs=[{name:"index",path:"/",component:ks,props:!0},{name:"all",path:"/:all(.*)*",component:vs,props:!0,meta:{layout:"empty"}}],Ss=ua(Cs),Ms="/sol-messenger/",xs=qt({history:Ht(Ms),scrollBehavior:()=>({left:0,top:0}),strict:!0,routes:Ss}),Es=({app:n})=>{n.use(xs)},Ps=Object.freeze(Object.defineProperty({__proto__:null,install:Es},Symbol.toStringTag,{value:"Module"})),Ds=({app:n})=>{n.use(Xt,{wallets:[new Jt,new Zt,new Yt,new en,new tn,new nn,new an,new sn,new rn,new on,new ln,new cn,new un,new dn,new mn,new hn,new pn,new yn,new fn,new gn,new bn,new _n,new wn,new An,new kn,new vn,new Cn,new Sn,new Mn,new xn],autoConnect:!1})},Is=Object.freeze(Object.defineProperty({__proto__:null,install:Ds},Symbol.toStringTag,{value:"Module"})),Ws=En();function Bs(){return Ws}const Ks=Symbol("WALLET_CONNECT_EVENT"),Ts=Symbol("WALLET_DISCONNECT_EVENT"),zs=Symbol("ACCOUNT_CHANGE_EVENT"),Be=5e3;function Ns(){const{connection:n}=$e(),{emit:e}=Bs(),{notify:t}=Fe(),{wallet:s}=we();dt(s,a=>{if(!a)return;const r=()=>{const f=a.publicKey;n.onAccountChange(f,y=>{console.log("ACCOUNT_CHANGE_EVENT",y),e(zs,y)}),n.onLogs(f,y=>{console.log(y)}),t({message:"Wallet update",caption:`Connected to wallet ${Le(f.toBase58(),7)}`,timeout:Be}),e(Ks,a)},l=()=>{t({message:"Wallet update",caption:"Disconnected from wallet",timeout:Be}),e(Ts,a)},m=f=>{!(f!=null&&f.message)||t({type:"negative",message:"Wallet update",caption:f.message,timeout:Be})};a.once("connect",r),a.once("disconnect",l),a.removeAllListeners("error"),a.on("error",m)},{immediate:!0})}const Rs=_e({__name:"App",setup(n){return Pn(()=>{Ns()}),(e,t)=>{const s=Ae("router-view");return p(),C(s)}}});async function Fs(){const n=Dn(Rs);Object.values(Object.assign({"./plugins/pinia.ts":Wn,"./plugins/quasar.ts":Kn,"./plugins/router.ts":Ps,"./plugins/wallet.ts":Is})).forEach(e=>{var t;return(t=e.install)==null?void 0:t.call(e,{app:n})}),n.mount("#app")}Fs().then();export{ue as _};
