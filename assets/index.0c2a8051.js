var An=Object.defineProperty;var wn=(t,e,n)=>e in t?An(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>(wn(t,typeof e!="symbol"?e+"":e,n),n);import{c as kn,a as Cn,Q as Mn,P as Sn,D as Dn,N as xn,b as In,i as En,u as Me,d as je,e as Re,r as le,w as te,f as F,g as z,o as f,h as E,j as d,k as P,l as V,v as Bn,m as r,F as Z,n as ue,t as q,p as we,q as _,s as K,x as Se,y as Nn,z as Tn,S as Pn,A as k,B as u,C as Ht,E as L,G as l,H as ne,I as j,J as Be,K as Kn,L as R,M as O,O as zn,R as ee,T as de,U as rt,W as Ot,V as We,X as qe,Y as Ln,Z as Qt,_ as Ce,$ as $e,a0 as oe,a1 as Rn,a2 as Lt,a3 as ct,a4 as Wn,a5 as qn,a6 as Yt,a7 as Fn,a8 as Xt,a9 as Hn,aa as ut,ab as On,ac as Le,ad as St,ae as Un,af as Rt,ag as v,ah as Ae,ai as Wt,aj as me,ak as ye,al as Qe,am as Jt,an as He,ao as Gn,ap as dt,aq as Zt,ar as Bt,as as jn,at as $n,au as Vn,av as Qn,aw as Yn,ax as pe,ay as Ut,az as ge,aA as Ye,aB as Ue,aC as se,aD as en,aE as Ke,aF as Xn,aG as Gt,aH as Jn,aI as Xe,aJ as Zn,aK as tn,aL as ea,aM as ta,aN as na,aO as aa,aP as sa,aQ as ia,aR as oa,aS as la,aT as qt,aU as nn,aV as ra,aW as an,aX as jt,aY as ca,aZ as ua,a_ as da,a$ as ma,b0 as ha,b1 as pa,b2 as fa,b3 as ga,b4 as ya,b5 as ba,b6 as va,b7 as _a,b8 as Aa,b9 as wa,ba as ka,bb as Ca,bc as Ma,bd as Sa,be as Da,bf as xa,bg as Ia,bh as Ea,bi as Ba,bj as Na,bk as Ta,bl as Pa,bm as Ka,bn as za,bo as La,bp as Ra,bq as Wa,br as qa,bs as Fa,bt as Ha,bu as Oa,bv as Ua,bw as Ga,bx as ja,by as $a,bz as Va,bA as Qa,bB as Ya,bC as Xa,bD as Ja,bE as Za,bF as es,bG as ts,bH as ns,bI as as}from"./vendor.3d51a490.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerpolicy&&(c.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?c.credentials="include":i.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(i){if(i.ep)return;i.ep=!0;const c=n(i);fetch(i.href,c)}})();const ss=({app:t})=>{t.use(kn())},is=Object.freeze(Object.defineProperty({__proto__:null,install:ss},Symbol.toStringTag,{value:"Module"})),os=({app:t})=>{const e=Cn();t.use(e)},ls=Object.freeze(Object.defineProperty({__proto__:null,install:os},Symbol.toStringTag,{value:"Module"})),rs=({app:t})=>{t.use(Mn,{plugins:{Dark:Sn,Dialog:Dn,Notify:xn,LocalStorage:In},iconSet:En})},cs=Object.freeze(Object.defineProperty({__proto__:null,install:rs},Symbol.toStringTag,{value:"Module"}));function us(){const{dark:t}=Me(),e=je("theme-mode",t.isActive);return t.set(e.value),{isActive:e,set(n){t.set(n),e.value=t.isActive},toggle(){t.toggle(),e.value=t.isActive}}}var ot=(t=>(t[t.FullScreen=0]="FullScreen",t[t.Compact=1]="Compact",t))(ot||{});const sn=Re("app-size",()=>{const t=le({mode:ot[1],isFooter:!1}),e=document.getElementById("app");return te(()=>t.mode,()=>{e.className="",e==null||e.classList.add(t.mode)}),{state:t}}),Ve=[],on={id:"devnet",name:"DevNet",cluster:"devnet",url:"https://devnet.rpcpool.com/"};Ve.push(on);var Vt;const ds=(Vt=Ve.find(t=>t.id==={}.VITE_CONNECTION_ENDPOINT))!=null?Vt:on,ms="confirmed",hs=12e4,nt=[`<span>Public channels</span> are non-encrypted and available to anyone, both for reading and writing.</br></br>
    <span>Public channels</span> are encrypted, and new users need to request approval to join them.</br>
    Depending on the \u2018Members can approve\u2019 setting, such requests can be approved either by channel\u2019s 
    owner/admin only, or by any authorized member of the channel.
    `,"Any authorized channel member can approve new requests to join","This setting determines how many messages will be available in chat until they are updated with new messages","Leave empty to use your wallet address instead of a nickname"],ps="https://twitter.com/JPoolSolana",fs="https://t.me/jpool_solana",gs="https://t.me/jpoolsolana",ys="https://discord.gg/qR4BA9QXVR",bs="https://jfactory.ch",vs="https://jpool.one",_s="https://svt.one",As="https://staking.kiwi/",ws=2e4,$t=25,ks={class:"container"},Cs={class:"footer-section"},Ms={class:"footer-info"},Ss={class:"theme"},Ds={class:"switch"},xs=d("span",{class:"slider round"},null,-1),Is=d("div",{class:"copyright"},[P(" \xA9 Copyright 2022 cgram.one. All rights reserved."),d("br"),P("Powered by jFactory ")],-1),Es={class:"footer-links"},Bs={class:"social"},Ns=["href"],Ts=d("span",null,[P("official"),d("br"),P("channel")],-1),Ps=[Ts],Ks=["href"],zs=["href"],Ls=["href"],Rs=["href"],Ws=F({__name:"AppFooter",setup(t){const e=us(),{state:n}=sn(),s=[{name:"JFACTORY",link:bs},{name:"JPOOL",link:vs},{name:"STAKING KIWI",link:As},{name:"SOLANA VALIDATOR TOOLKIT",link:_s}];return z(!0),(i,c)=>(f(),E("footer",{class:we({"show-footer":r(n).isFooter})},[d("div",ks,[d("div",Cs,[d("div",Ms,[d("div",Ss,[P(" Dark mode "),d("label",Ds,[V(d("input",{"onUpdate:modelValue":c[0]||(c[0]=a=>r(e).isActive.value=a),type:"checkbox",onClick:c[1]||(c[1]=(...a)=>r(e).toggle&&r(e).toggle(...a))},null,512),[[Bn,r(e).isActive.value]]),xs])]),Is]),d("div",Es,[d("div",Bs,[d("a",{href:r(fs),target:"_blank",class:"social-link social-link-text"},Ps,8,Ns),d("a",{href:r(gs),target:"_blank",class:"social-link telegram"},null,8,Ks),d("a",{href:r(ps),target:"_blank",class:"social-link twitter"},null,8,zs),d("a",{href:r(ys),target:"_blank",class:"social-link discord"},null,8,Ls)]),d("nav",null,[d("ul",null,[(f(),E(Z,null,ue(s,({name:a,link:o})=>d("li",{key:a},[d("a",{target:"_blank",href:o},q(a),9,Rs)])),64))])])])])])],2))}});function qs(){const t=z(Fs());return{userAgent:t,isMobileOs:_(()=>Hs(t.value)),isWebView:_(()=>Os(t.value))}}let Dt;function Fs(){var t,e;return Dt===void 0&&(Dt=(e=(t=globalThis.navigator)==null?void 0:t.userAgent)!=null?e:null),Dt}function Hs(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)}function Os(t){return/(WebView|(Phantom|Solflare)|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function Je(t,e=4){return t instanceof K&&(t=t.toBase58()),`${t.slice(0,e)}...${t.slice(-e)}`}function ln(t){return(t==null?void 0:t.name)&&t.name!==""?t.name:Je(t.authority)}const rn=t=>{if(!t)return{background:"#000"};let e=0;for(let s=0;s<t.length;s++)e=t.charCodeAt(s)+((e<<5)-e),e=e&e;let n="#";for(let s=0;s<3;s++)n+=`00${(e>>s*8&255).toString(16)}`.substr(-2);return{background:n}},Us="/assets/clover.968404b0.svg",Gs="/assets/ledger.40cf6861.svg",js="/assets/mathwallet.1d763e81.svg",mt=t=>(We("data-v-cba98226"),t=t(),qe(),t),$s=mt(()=>d("div",{class:"text-h6 text-center"}," Your wallet ",-1)),Vs={class:"q-gutter-md row justify-between"},Qs=mt(()=>d("span",{name:"wallet"},"Disconnect",-1)),Ys=mt(()=>d("span",{name:"wallet"},"Ok",-1)),Xs=mt(()=>d("div",{class:"text-h6"}," Connect to a wallet ",-1)),Js={class:"text-light-gray text-caption full-width text-no-wrap",style:{"text-overflow":"ellipsis",overflow:"hidden"}},Zs=["src","alt"],ei=F({__name:"ConnectWallet",setup(t){const e={priority:{solflare:10,phantom:20,sollet:5,nufi:5,blocto:1},icons:{clover:Us},darkIcons:{ledger:Gs,mathwallet:js},deepLinks:{phantom:"https://phantom.app/ul/browse/{uri}?ref={ref}",solflare:"https://solflare.com/ul/browse/{uri}?ref={ref}"}},{userAgent:n,isWebView:s,isMobileOs:i}=qs(),c={close:rt},a=T=>[Ot.Installed,Ot.Loadable].includes(T.readyState);Me();const o=Se(),{connected:m,connecting:h}=o;Nn();const p=_(()=>i.value&&!s.value);if(s.value){const T=String(n.value).toLowerCase();T.includes("phantom")?(o.select(Tn),o.connect()):T.includes("solflare")&&(o.select(Pn),o.connect())}const g=_(()=>{var T,w;return(w=(T=o.publicKey.value)==null?void 0:T.toBase58())!=null?w:""}),y=_(()=>Je(g.value)),C=_(()=>[...o.wallets.value].map(T=>{var S,Q;const w=T.adapter.name.toLowerCase();return T.adapter.icon=(Q=(S=e.darkIcons[w])!=null?S:e.icons[w])!=null?Q:T.adapter.icon,p.value&&e.deepLinks[w]&&(T.deepLink=e.deepLinks[w].replace("{uri}",location.href).replace("{ref}",location.origin)),T}).sort((T,w)=>{var be,ke;const S=(be=e.priority[T.adapter.name.toLowerCase()])!=null?be:1;return((ke=e.priority[w.adapter.name.toLowerCase()])!=null?ke:1)-S+((a(w)?1:0)-(a(T)?1:0))})),D=_(()=>p.value?C.value.filter(T=>!!T.deepLink):C.value),I=z(!1);async function B(T){await o.select(T.adapter.name),I.value=!1,await o.connect()}function A(){I.value=!1,o.disconnect()}function M(){I.value=!0}function G(){I.value=!1}return(T,w)=>(f(),E(Z,null,[r(m)?(f(),k(L,Ht({key:0},T.$attrs,{ripple:!1,color:"primary-gray","text-color":"white",square:"",unelevated:"",onClick:M}),{default:u(()=>[P(q(r(y)),1)]),_:1},16)):(f(),k(L,Ht({key:1},T.$attrs,{color:"primary-gray",class:"q-pa-none btn","text-color":"white",square:"",flat:"",ripple:!1,loading:r(h),onClick:M}),{default:u(()=>[P(" CONNECT WALLET ")]),_:1},16,["loading"])),l(de,{modelValue:r(I),"onUpdate:modelValue":w[0]||(w[0]=S=>ee(I)?I.value=S:null),"transition-duration":"150","transition-show":"fade","transition-hide":"fade"},{default:u(()=>[r(m)?(f(),k(ne,{key:0,flat:"",square:""},{default:u(()=>[l(j,{class:"relative-position"},{default:u(()=>[$s,l(L,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:c.close,size:"md",onClick:G},null,8,["icon"])]),_:1}),l(Be),l(j,null,{default:u(()=>[P(q(r(g)),1)]),_:1}),l(Be),l(j,null,{default:u(()=>[d("div",Vs,[l(L,{class:"disconnect-btn","text-color":"black",square:"",flat:"",onClick:A},{default:u(()=>[Qs]),_:1}),l(L,{class:"disconnect-btn","text-color":"black",square:"",flat:"",onClick:G},{default:u(()=>[Ys]),_:1})])]),_:1})]),_:1})):(f(),k(ne,{key:1,class:"wallet-connect-card"},{default:u(()=>[l(j,null,{default:u(()=>[Xs,l(L,{padding:"md",color:"transparent","text-color":"primary-gray",unelevated:"",class:"absolute-right",icon:c.close,size:"md",onClick:G},null,8,["icon"])]),_:1}),l(Be),l(j,{style:{"max-height":"80vh"},class:"scroll"},{default:u(()=>[l(Kn,{grid:"",rows:r(D),"row-key":"name","hide-pagination":"","hide-header":"","rows-per-page-options":[100]},{item:u(({row:S})=>[(f(),E("div",{key:`wallet-${S.adapter.name}`,class:"col-12 col-md-6"},[l(R,{clickable:"",href:S.deepLink,onClick:Q=>S.deepLink?!0:B(S)},{default:u(()=>[l(O,null,{default:u(()=>[d("b",null,q(S.adapter.name),1),d("div",Js,q(S.adapter.url),1)]),_:2},1024),l(O,{avatar:""},{default:u(()=>[l(zn,{square:""},{default:u(()=>[d("img",{src:S.adapter.icon,alt:S.adapter.name},null,8,Zs)]),_:2},1024)]),_:2},1024)]),_:2},1032,["href","onClick"])]))]),_:1},8,["rows"])]),_:1})]),_:1}))]),_:1},8,["modelValue"])],64))}});const ie=(t,e)=>{const n=t.__vccOpts||t;for(const[s,i]of e)n[s]=i;return n},ti=ie(ei,[["__scopeId","data-v-cba98226"]]),ht=Re({id:"connection",state:()=>({commitment:ms,confirmTransactionInitialTimeout:hs,rpc:Ln("rpc","")}),getters:{endpoint(t){var e;return(e=Ve.find(n=>n.id===t.rpc))!=null?e:ds},connection(t){return console.log("[connection]",this.endpoint.url),new Qt(this.endpoint.url,{confirmTransactionInitialTimeout:t.confirmTransactionInitialTimeout,commitment:t.commitment})},cluster(){return this.endpoint.cluster}},actions:{setRpc(t){this.rpc=t},setCommitment(t){this.commitment=t}}}),ni=F({__name:"ClusterSelector",setup(t){const e=ht(),{connected:n,connect:s,disconnect:i,autoConnect:c}=Se(),a=[Ve.filter(h=>h.cluster==="mainnet-beta"),Ve.filter(h=>h.cluster!=="mainnet-beta")],o=_(()=>e.endpoint),m=h=>{n&&e.cluster!==h.cluster&&(i(),c.value&&s()),e.setRpc(h.id)};return(h,p)=>(f(),k(Rn,{label:r(o).name,"model-value":!1,"auto-close":"",color:"secondary","text-color":"#000",square:"",unelevated:"",ripple:!1},{default:u(()=>[l(Ce,null,{default:u(()=>[(f(),E(Z,null,ue(a,(g,y)=>(f(),E(Z,{key:`${y}-cluster-group`},[(f(!0),E(Z,null,ue(g,C=>(f(),k(R,{key:C.id,clickable:"",onClick:D=>m(C)},{default:u(()=>[(f(),k(O,{key:`${C.id}-item`},{default:u(()=>[l($e,null,{default:u(()=>[d("b",null,q(C.name),1)]),_:2},1024),P(" "+q(C.url),1)]),_:2},1024))]),_:2},1032,["onClick"]))),128)),y!==a.length-1?(f(),k(Be,{key:0})):oe("",!0)],64))),64))]),_:1})]),_:1},8,["label"]))}});const ai={},si={class:"app-header"},ii={class:"container"},oi={class:"app-header__info"},li={class:"app-header__logo"},ri={class:"logo-wrapper"},ci=d("div",{class:"sol-icon"},null,-1),ui=d("div",{class:"app-header__title"},[d("h1",null,[P(" BLOCKCHAIN "),d("br"),P(" messenger "),d("span",{class:"marked"},"SOLANA")])],-1),di={class:"app-header__right"},mi={class:"app-header__buttons"};function hi(t,e){const n=Lt("router-link"),s=ni,i=ti;return f(),E("header",si,[d("div",ii,[d("div",oi,[d("div",li,[d("div",ri,[ci,l(n,{to:"/"})])]),ui]),l(ct),d("div",di,[d("div",mi,[l(s,{class:"app-header__cluster-btn header-btn"}),l(i,{class:"app-header__wallet-btn header-btn"})])])])])}const pi=ie(ai,[["render",hi]]),fi={};function gi(t,e){const n=pi,s=Lt("router-view"),i=Ws;return f(),k(Wn,{view:"lfh Lpr lff"},{default:u(()=>[l(n),l(qn,null,{default:u(()=>[l(s)]),_:1}),l(i)]),_:1})}const yi=ie(fi,[["render",gi]]),bi={default:yi,empty:()=>Yt(()=>import("./empty.399edcc1.js"),["assets/empty.399edcc1.js","assets/vendor.3d51a490.js"])};function vi(t){return t.map(e=>{var n;return{path:e.path,component:bi[((n=e.meta)==null?void 0:n.layout)||"default"],children:[{...e,path:""}]}})}const _i="/assets/search.b4fadb1c.svg",Ai="/assets/transfer.796e9da5.svg",wi="/assets/plus.ee413328.svg",ki={class:"how-it-works"},Ci={class:"app-info"},Mi=d("div",{class:"app-info__title"}," JOIN A CHANNEL ",-1),Si={class:"app-info__list"},Di=["innerHTML"],xi={class:"app-info"},Ii=d("div",{class:"app-info__title"}," CREATE YOUR OWN CHANNEL ",-1),Ei={class:"app-info__list"},Bi=["innerHTML"],Ni=F({__name:"HowItWorks",setup(t){const e=["For <span>public channels</span>, you can read or send messages without limitations.",`In order to join one of the existing private channels, click
        <img src="${_i}" class="icon" alt="search">
        (BROWSE CHANNELS) at the bottom of the left-side panel.`,`Find a channel you are interested in and click
        <img src="${Ai}" class="icon" alt="transfer">
        (REQUEST TO JOIN). Your status for that channel will be set to Pending
        Approval until your request has been accepted. While awaiting approval,
        all messages in the channel will appear scrambled.`,`After the private channel's owner or admin approves your membership,your
        status will change to Authorized. You will be able to read the channel
        and send messages.`],n=["You can create a channel of your own as well.",`Click <img src="${wi}" class="icon" alt="search"> (CREATE A CHANNEL) 
  at the bottom of the left-side panel, then choose between Private and Public options.`,"A public channel is open to anyone for reading and writing, and no encryption is used.",`If you create a private channel, joining it will require your approval. You will see a red 
  notification badge above the channel list if there are approval requests pending.`];return(s,i)=>(f(),E("div",ki,[d("div",Ci,[Mi,d("ul",Si,[(f(),E(Z,null,ue(e,c=>d("li",{key:c},[d("p",{innerHTML:c},null,8,Di)])),64))])]),d("div",xi,[Ii,d("ul",Ei,[(f(),E(Z,null,ue(n,c=>d("li",{key:c},[d("p",{innerHTML:c},null,8,Bi)])),64))])])]))}});const Ft=t=>(We("data-v-316fa5a7"),t=t(),qe(),t),Ti={class:"q-pb-sm"},Pi={class:"text-blue-grey-10 text-h6 text-weight-regular alert-title"},Ki=Ft(()=>d("span",{class:"text-weight-medium text-h6 text-grey-10"},null,-1)),zi=Ft(()=>d("span",{class:"text-blue-grey-10 text-body2 text-weight-regular",name:"name"},"Channel Name: ",-1)),Li={class:"text-weight-medium text-body2 text-grey-10"},Ri=Ft(()=>d("span",{class:"text-blue-grey-10 text-body2 text-weight-regular",name:"name"},"Channel Address: ",-1)),Wi={class:"text-weight-medium text-body2 text-grey-10 alert-address"},qi=F({__name:"EventChannelDialog",props:{channelEvent:Object},setup(t){const e=t,n=z(!1),s=z(""),i=_(()=>s.value==="delete"),c=_(()=>i.value?"You have been removed from the channel":"You have been authorized"),a=_(()=>i.value?Fn:Xt),o=_(()=>i.value?"#d32f2f":"#00c853");return te(()=>e.channelEvent,m=>{m&&(n.value=!0,s.value=m.event)}),(m,h)=>(f(),k(de,{modelValue:r(n),"onUpdate:modelValue":h[0]||(h[0]=p=>ee(n)?n.value=p:null)},{default:u(()=>[l(ne,{square:"",flat:"",class:"row no-wrap items-center alert-card"},{default:u(()=>[l(j,{class:"q-pr-none event-icon"},{default:u(()=>[(f(),k(Hn(r(a)),{size:"80",color:r(o),class:"alert-icon"},null,8,["color"]))]),_:1}),l(j,{class:we(["alert-info",r(s)])},{default:u(()=>[d("div",Ti,[d("span",Pi,[P(q(r(c))+" ",1),Ki])]),d("div",null,[zi,d("span",Li,q(e.channelEvent.channel),1)]),d("div",null,[Ri,d("span",Wi,q(e.channelEvent.address),1)])]),_:1},8,["class"])]),_:1})]),_:1},8,["modelValue"]))}});const Fi=ie(qi,[["__scopeId","data-v-316fa5a7"]]),Ge=Re("user",()=>{const t=ut(),e=z(),n=z();On(async()=>{var p;const h=(p=t.value)==null?void 0:p.publicKey;if(h){const g=je(h.toString(),()=>St.encode(Le.generate().secretKey));s(g.value),await o()}else e.value=void 0});function s(h){e.value=Le.fromSecretKey(St.decode(h))}function i(){var g;const h=(g=t.value)==null?void 0:g.publicKey;if(!h)return;const p=je(h.toString(),"");s(p.value=St.encode(Le.generate().secretKey))}function c(h){var y;const p=(y=t.value)==null?void 0:y.publicKey;if(!p)return;const g=je(p.toString(),"");s(g.value=h)}function a(){var D;const h=(D=t.value)==null?void 0:D.publicKey;if(!h)return;const g={backupKey:je(h.toString(),"").value},y=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(g))}`,C=document.createElement("a");C.setAttribute("href",y),C.setAttribute("download","backup_key.json"),C.click()}async function o(){var y;const h=(y=t.value)==null?void 0:y.publicKey,g=await new Qt(Un("devnet"),"confirmed").getBalance(h);n.value=await g/Rt}const m=_(()=>n.value>.1);return{keypair:e,balance:n,generateKey:i,importKey:c,exportKey:a,isUserHaveSol:m}}),Hi="0.0.12",Oi="messenger",Ui=[{name:"initChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"key",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"InitChannelData"}}]},{name:"deleteChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"joinChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"key",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"JoinChannelData"}}]},{name:"leaveChannel",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"grantAccessMember",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!1,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"GrantAccessMemberData"}}]},{name:"addMember",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"invitee",isMut:!1,isSigner:!1},{name:"inviteeMembership",isMut:!0,isSigner:!1},{name:"inviteeDevice",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddMemberData"}}]},{name:"authorizeMember",accounts:[{name:"channel",isMut:!1,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"authorityMembership",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AuthorizeMemberData"}}]},{name:"deleteMember",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"membershipAuthority",isMut:!0,isSigner:!1},{name:"authorityMembership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"addDevice",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"authority",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"data",type:{defined:"AddDeviceData"}}]},{name:"deleteDevice",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"device",isMut:!0,isSigner:!1},{name:"deviceAuthority",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"postMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"message",type:"string"}]},{name:"readMessage",accounts:[{name:"channel",isMut:!0,isSigner:!1},{name:"membership",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"messageId",type:"u64"}]}],Gi=[{name:"Channel",type:{kind:"struct",fields:[{name:"workspace",docs:["Workspace used to group channels"],type:"string"},{name:"name",docs:["Name of the channel"],type:"string"},{name:"creator",docs:["Channel creator"],type:"publicKey"},{name:"createdAt",docs:["Creation date"],type:"i64"},{name:"lastMessageAt",docs:["Last message date"],type:"i64"},{name:"flags",docs:["Channel flags"],type:"u8"},{name:"memberCount",docs:["Number of members"],type:"u16"},{name:"messageCount",docs:["Message counter"],type:"u64"},{name:"maxMessages",docs:["The maximum number of messages that are stored in [messages]"],type:"u16"},{name:"messages",docs:["List of latest messages"],type:{vec:{defined:"Message"}}}]}},{name:"ChannelDevice",type:{kind:"struct",fields:[{name:"channel",docs:["Associated [Channel] address"],type:"publicKey"},{name:"authority",docs:["Authority of the [ChannelKey]"],type:"publicKey"},{name:"key",docs:["The device key used to encrypt the `cek`"],type:"publicKey"},{name:"cek",docs:["The content encryption key (CEK)"],type:{defined:"CEKData"}},{name:"bump",docs:["Bump seed for deriving PDA seeds"],type:"u8"}]}},{name:"ChannelMembership",type:{kind:"struct",fields:[{name:"channel",docs:["Associated [Channel] address"],type:"publicKey"},{name:"authority",docs:["Authority of membership"],type:"publicKey"},{name:"status",docs:["Status of membership"],type:{defined:"ChannelMembershipStatus"}},{name:"statusTarget",docs:["Status target key"],type:{option:"publicKey"}},{name:"name",docs:["Name of the channel member"],type:"string"},{name:"lastReadMessageId",docs:["The last read message id"],type:"u64"},{name:"createdAt",docs:["Creation date"],type:"i64"},{name:"flags",docs:["Membership flags"],type:"u8"},{name:"bump",docs:["Bump seed for deriving PDA seeds"],type:"u8"}]}}],ji=[{name:"AddDeviceData",type:{kind:"struct",fields:[{name:"key",type:"publicKey"},{name:"cek",type:{defined:"CEKData"}}]}},{name:"AddMemberData",type:{kind:"struct",fields:[{name:"name",docs:["Member name"],type:"string"},{name:"flags",docs:["Membership flags, only `admin` and `owner` can set membership flags"],type:"u8"},{name:"cek",docs:["Content Encryption Key"],type:{defined:"CEKData"}},{name:"key",docs:["Device key"],type:"publicKey"}]}},{name:"AuthorizeMemberData",type:{kind:"struct",fields:[{name:"cek",type:{defined:"CEKData"}}]}},{name:"GrantAccessMemberData",type:{kind:"struct",fields:[{name:"flags",type:"u8"}]}},{name:"InitChannelData",type:{kind:"struct",fields:[{name:"workspace",type:"string"},{name:"name",type:"string"},{name:"maxMessages",type:"u16"},{name:"memberName",type:"string"},{name:"cek",type:{defined:"CEKData"}},{name:"public",type:"bool"},{name:"permissionless",type:"bool"}]}},{name:"JoinChannelData",type:{kind:"struct",fields:[{name:"name",type:"string"},{name:"authority",type:{option:"publicKey"}}]}},{name:"CEKData",type:{kind:"struct",fields:[{name:"header",docs:["The header information for the CEK"],type:"string"},{name:"encryptedKey",docs:["The CEK itself"],type:"string"}]}},{name:"Message",type:{kind:"struct",fields:[{name:"id",docs:["Uniq message id"],type:"u64"},{name:"sender",docs:["The message sender id"],type:"publicKey"},{name:"createdAt",docs:["The unix timestamp at which the message was received"],type:"i64"},{name:"flags",docs:["Message flags"],type:"u8"},{name:"content",docs:["The (typically encrypted) message content"],type:"string"}]}},{name:"ChannelMembershipStatus",type:{kind:"enum",variants:[{name:"Authorized"},{name:"Pending"}]}}],$i=[{name:"NewChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"creator",type:"publicKey",index:!1},{name:"name",type:"string",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"creator",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"NewMessageEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"message",type:{defined:"Message"},index:!1}]},{name:"JoinChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"LeaveChannelEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!0},{name:"timestamp",type:"i64",index:!1}]},{name:"AddMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"AuthorizeMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteMemberEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"membership",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"by",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"AddDeviceEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]},{name:"DeleteDeviceEvent",fields:[{name:"channel",type:"publicKey",index:!0},{name:"device",type:"publicKey",index:!0},{name:"authority",type:"publicKey",index:!1},{name:"timestamp",type:"i64",index:!1}]}],Vi=[{code:6e3,name:"Unauthorized",msg:"Unauthorized"},{code:6001,name:"InvalidChannel",msg:"Invalid channel"},{code:6002,name:"InvalidMembership",msg:"Invalid membership"},{code:6003,name:"InvalidDevice",msg:"Invalid device"},{code:6004,name:"InvalidMessage",msg:"Invalid message"},{code:6005,name:"NameTooLong",msg:"Name too long"},{code:6006,name:"WorkspaceTooLong",msg:"Workspace too long"},{code:6007,name:"MessageTooLong",msg:"Message too long"}],Qi={address:"4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw",origin:"anchor",binaryVersion:"0.25.0",libVersion:"0.25.0"},Yi={version:Hi,name:Oi,instructions:Ui,accounts:Gi,types:ji,events:$i,errors:Vi,metadata:Qi},Xi=new v.FixableBeetArgsStruct([["id",v.u64],["sender",Ae],["createdAt",v.i64],["flags",v.u8],["content",v.utf8String]],"Message"),Nt=[49,159,99,106,220,87,219,88];class ve{constructor(e,n,s,i,c,a,o,m,h,p){this.workspace=e,this.name=n,this.creator=s,this.createdAt=i,this.lastMessageAt=c,this.flags=a,this.memberCount=o,this.messageCount=m,this.maxMessages=h,this.messages=p}static fromArgs(e){return new ve(e.workspace,e.name,e.creator,e.createdAt,e.lastMessageAt,e.flags,e.memberCount,e.messageCount,e.maxMessages,e.messages)}static fromAccountInfo(e,n=0){return ve.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find Channel account at ${n}`);return ve.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Wt.fromStruct(e,at)}static deserialize(e,n=0){return at.deserialize(e,n)}serialize(){return at.serialize({accountDiscriminator:Nt,...this})}static byteSize(e){const n=ve.fromArgs(e);return at.toFixedFromValue({accountDiscriminator:Nt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(ve.byteSize(e),s)}pretty(){return{workspace:this.workspace,name:this.name,creator:this.creator.toBase58(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),lastMessageAt:(()=>{const e=this.lastMessageAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),flags:this.flags,memberCount:this.memberCount,messageCount:(()=>{const e=this.messageCount;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),maxMessages:this.maxMessages,messages:this.messages}}}const at=new v.FixableBeetStruct([["accountDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["workspace",v.utf8String],["name",v.utf8String],["creator",Ae],["createdAt",v.i64],["lastMessageAt",v.i64],["flags",v.u8],["memberCount",v.u16],["messageCount",v.u64],["maxMessages",v.u16],["messages",v.array(Xi)]],ve.fromArgs,"Channel"),Ze=new v.FixableBeetArgsStruct([["header",v.utf8String],["encryptedKey",v.utf8String]],"CEKData"),Tt=[163,153,9,169,176,51,204,146];class _e{constructor(e,n,s,i,c){this.channel=e,this.authority=n,this.key=s,this.cek=i,this.bump=c}static fromArgs(e){return new _e(e.channel,e.authority,e.key,e.cek,e.bump)}static fromAccountInfo(e,n=0){return _e.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find ChannelDevice account at ${n}`);return _e.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Wt.fromStruct(e,st)}static deserialize(e,n=0){return st.deserialize(e,n)}serialize(){return st.serialize({accountDiscriminator:Tt,...this})}static byteSize(e){const n=_e.fromArgs(e);return st.toFixedFromValue({accountDiscriminator:Tt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(_e.byteSize(e),s)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),key:this.key.toBase58(),cek:this.cek,bump:this.bump}}}const st=new v.FixableBeetStruct([["accountDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["channel",Ae],["authority",Ae],["key",Ae],["cek",Ze],["bump",v.u8]],_e.fromArgs,"ChannelDevice");var Fe=(t=>(t[t.Authorized=0]="Authorized",t[t.Pending=1]="Pending",t))(Fe||{});const Ji=v.fixedScalarEnum(Fe),lt=[238,149,255,251,116,131,86,170];class ce{constructor(e,n,s,i,c,a,o,m,h){this.channel=e,this.authority=n,this.status=s,this.statusTarget=i,this.name=c,this.lastReadMessageId=a,this.createdAt=o,this.flags=m,this.bump=h}static fromArgs(e){return new ce(e.channel,e.authority,e.status,e.statusTarget,e.name,e.lastReadMessageId,e.createdAt,e.flags,e.bump)}static fromAccountInfo(e,n=0){return ce.deserialize(e.data,n)}static async fromAccountAddress(e,n,s){const i=await e.getAccountInfo(n,s);if(i==null)throw new Error(`Unable to find ChannelMembership account at ${n}`);return ce.fromAccountInfo(i,0)[0]}static gpaBuilder(e=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){return Wt.fromStruct(e,it)}static deserialize(e,n=0){return it.deserialize(e,n)}serialize(){return it.serialize({accountDiscriminator:lt,...this})}static byteSize(e){const n=ce.fromArgs(e);return it.toFixedFromValue({accountDiscriminator:lt,...n}).byteSize}static async getMinimumBalanceForRentExemption(e,n,s){return n.getMinimumBalanceForRentExemption(ce.byteSize(e),s)}pretty(){return{channel:this.channel.toBase58(),authority:this.authority.toBase58(),status:`ChannelMembershipStatus.${Fe[this.status]}`,statusTarget:this.statusTarget,name:this.name,lastReadMessageId:(()=>{const e=this.lastReadMessageId;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),createdAt:(()=>{const e=this.createdAt;if(typeof e.toNumber=="function")try{return e.toNumber()}catch{return e}return e})(),flags:this.flags,bump:this.bump}}}const it=new v.FixableBeetStruct([["accountDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["channel",Ae],["authority",Ae],["status",Ji],["statusTarget",v.coption(Ae)],["name",v.utf8String],["lastReadMessageId",v.u64],["createdAt",v.i64],["flags",v.u8],["bump",v.u8]],ce.fromArgs,"ChannelMembership"),De=new Map,xe=new Map;class pt extends Error{constructor(){super("Unauthorized");$(this,"code",6e3);$(this,"name","Unauthorized");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,pt)}}De.set(6e3,()=>new pt);xe.set("Unauthorized",()=>new pt);class ft extends Error{constructor(){super("Invalid channel");$(this,"code",6001);$(this,"name","InvalidChannel");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ft)}}De.set(6001,()=>new ft);xe.set("InvalidChannel",()=>new ft);class gt extends Error{constructor(){super("Invalid membership");$(this,"code",6002);$(this,"name","InvalidMembership");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,gt)}}De.set(6002,()=>new gt);xe.set("InvalidMembership",()=>new gt);class yt extends Error{constructor(){super("Invalid device");$(this,"code",6003);$(this,"name","InvalidDevice");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,yt)}}De.set(6003,()=>new yt);xe.set("InvalidDevice",()=>new yt);class bt extends Error{constructor(){super("Invalid message");$(this,"code",6004);$(this,"name","InvalidMessage");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,bt)}}De.set(6004,()=>new bt);xe.set("InvalidMessage",()=>new bt);class vt extends Error{constructor(){super("Name too long");$(this,"code",6005);$(this,"name","NameTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,vt)}}De.set(6005,()=>new vt);xe.set("NameTooLong",()=>new vt);class _t extends Error{constructor(){super("Workspace too long");$(this,"code",6006);$(this,"name","WorkspaceTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_t)}}De.set(6006,()=>new _t);xe.set("WorkspaceTooLong",()=>new _t);class At extends Error{constructor(){super("Message too long");$(this,"code",6007);$(this,"name","MessageTooLong");typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,At)}}De.set(6007,()=>new At);xe.set("MessageTooLong",()=>new At);function fe(t){const e=De.get(t);return e!=null?e():null}function Pe(t){const e=xe.get(t);return e!=null?e():null}const Zi=new v.FixableBeetArgsStruct([["key",Ae],["cek",Ze]],"AddDeviceData"),eo=new v.FixableBeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["data",Zi]],"AddDeviceInstructionArgs"),to=[21,27,66,42,18,30,14,18];function no(t,e,n=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[s]=eo.serialize({instructionDiscriminator:to,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ye({programId:n,keys:i,data:s})}const ao=new v.FixableBeetArgsStruct([["name",v.utf8String],["flags",v.u8],["cek",Ze],["key",Ae]],"AddMemberData"),so=new v.FixableBeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["data",ao]],"AddMemberInstructionArgs"),io=[13,116,123,130,126,198,57,34];function oo(t,e,n=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[s]=so.serialize({instructionDiscriminator:io,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.invitee,isWritable:!1,isSigner:!1},{pubkey:t.inviteeMembership,isWritable:!0,isSigner:!1},{pubkey:t.inviteeDevice,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ye({programId:n,keys:i,data:s})}const lo=new v.FixableBeetArgsStruct([["cek",Ze]],"AuthorizeMemberData"),ro=new v.FixableBeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["data",lo]],"AuthorizeMemberInstructionArgs"),co=[194,123,189,175,86,225,93,128];function uo(t,e,n=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[s]=ro.serialize({instructionDiscriminator:co,...e}),i=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:(a=t.systemProgram)!=null?a:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ye({programId:n,keys:i,data:s})}const mo=new v.BeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)]],"DeleteChannelInstructionArgs"),ho=[145,225,187,221,157,142,114,133];function po(t,e=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var c;const[n]=mo.serialize({instructionDiscriminator:ho}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(c=t.systemProgram)!=null?c:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ye({programId:e,keys:s,data:n})}const fo=new v.BeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)]],"DeleteDeviceInstructionArgs"),go=[168,96,86,82,105,2,215,144];function yo(t,e=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var c;const[n]=fo.serialize({instructionDiscriminator:go}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.deviceAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(c=t.systemProgram)!=null?c:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ye({programId:e,keys:s,data:n})}const bo=new v.BeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)]],"DeleteMemberInstructionArgs"),vo=[95,14,98,112,252,218,205,173];function _o(t,e=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var c;const[n]=bo.serialize({instructionDiscriminator:vo}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.membershipAuthority,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(c=t.systemProgram)!=null?c:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ye({programId:e,keys:s,data:n})}const Ao=new v.BeetArgsStruct([["flags",v.u8]],"GrantAccessMemberData"),wo=new v.BeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["data",Ao]],"GrantAccessMemberInstructionArgs"),ko=[236,46,184,64,57,158,80,142];function Co(t,e,n=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[s]=wo.serialize({instructionDiscriminator:ko,...e}),i=[{pubkey:t.channel,isWritable:!1,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authorityMembership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ye({programId:n,keys:i,data:s})}const Mo=new v.FixableBeetArgsStruct([["workspace",v.utf8String],["name",v.utf8String],["maxMessages",v.u16],["memberName",v.utf8String],["cek",Ze],["public",v.bool],["permissionless",v.bool]],"InitChannelData"),So=new v.FixableBeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["data",Mo]],"InitChannelInstructionArgs"),Do=[21,200,152,39,19,178,76,47];function xo(t,e,n=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[s]=So.serialize({instructionDiscriminator:Do,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.key,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ye({programId:n,keys:i,data:s})}const Io=new v.FixableBeetArgsStruct([["name",v.utf8String],["authority",v.coption(Ae)]],"JoinChannelData"),Eo=new v.FixableBeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["data",Io]],"JoinChannelInstructionArgs"),Bo=[124,39,115,89,217,26,38,29];function No(t,e,n=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[s]=Eo.serialize({instructionDiscriminator:Bo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.device,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:t.key,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ye({programId:n,keys:i,data:s})}const To=new v.BeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)]],"LeaveChannelInstructionArgs"),Po=[104,0,75,134,95,80,68,186];function Ko(t,e=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var c;const[n]=To.serialize({instructionDiscriminator:Po}),s=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!0,isSigner:!0},{pubkey:(c=t.systemProgram)!=null?c:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const a of t.anchorRemainingAccounts)s.push(a);return new ye({programId:e,keys:s,data:n})}const zo=new v.FixableBeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["message",v.utf8String]],"PostMessageInstructionArgs"),Lo=[214,50,100,209,38,34,7,76];function Ro(t,e,n=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[s]=zo.serialize({instructionDiscriminator:Lo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!1,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ye({programId:n,keys:i,data:s})}const Wo=new v.BeetArgsStruct([["instructionDiscriminator",v.uniformFixedSizeArray(v.u8,8)],["messageId",v.u64]],"ReadMessageInstructionArgs"),qo=[54,166,48,51,234,46,110,163];function Fo(t,e,n=new K("4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw")){var a;const[s]=Wo.serialize({instructionDiscriminator:qo,...e}),i=[{pubkey:t.channel,isWritable:!0,isSigner:!1},{pubkey:t.membership,isWritable:!0,isSigner:!1},{pubkey:t.authority,isWritable:!1,isSigner:!0},{pubkey:(a=t.systemProgram)!=null?a:me.programId,isWritable:!1,isSigner:!1}];if(t.anchorRemainingAccounts!=null)for(const o of t.anchorRemainingAccounts)i.push(o);return new ye({programId:n,keys:i,data:s})}const Ho="4AnSBTc21f4wTBHmnFyarbosr28Qk4CgGFBHcRh4kYPw",Oo=new K(Ho);function Pt(t,e=new Uint8Array(4)){const n=Qe(t.toString(),"base10");return e.set(n,4-n.length),e}const xt=t=>He([Pt(t.length),t]);function cn(t,e,n){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const s=He([xt(Qe(n)),xt(new Uint8Array(0)),xt(new Uint8Array(0)),Pt(e)]),i=1;return Gn.hash(He([Pt(i),t,s]))}const Kt=t=>Qe(t,"base64pad"),zt=t=>Jt(t,"base64pad"),Uo=t=>Qe(t),Go=t=>Jt(t),jo=t=>Qe(t,"base58btc"),ze=dt.NONCE_LENGTH,Oe=dt.TAG_LENGTH,un=t=>{const e=new dt.XChaCha20Poly1305(t);return(n,s)=>{const i=Zt.randomBytes(ze),c=e.seal(i,n,s);return{ciphertext:c.subarray(0,c.length-Oe),tag:c.subarray(c.length-Oe),iv:i}}},dn=t=>{const e=new dt.XChaCha20Poly1305(t);return(n,s,i,c)=>e.open(i,He([n,s]),c)},mn="ECDH-ES+XC20PKW",hn=256,$o=t=>e=>{const n=Bt.generateKeyPair(),s=Bt.sharedKey(n.secretKey,t),i=cn(s,hn,mn),c=un(i)(e);return{encryptedKey:c.ciphertext,tag:c.tag,iv:c.iv,epPubKey:n.publicKey}},Vo=t=>(e,n,s,i)=>{const c=Bt.sharedKey(t,i),a=cn(c,hn,mn);return dn(a)(e,n,s)},Qo=t=>Array.isArray(t)?Le.fromSecretKey(Vn.Buffer.from(t)):typeof t=="string"?Le.fromSecretKey(jo(t)):Le.fromSecretKey(t),Yo=async(t=32)=>{const e=Zt.randomBytes(t);return Promise.resolve(e)},Xo=async(t,e)=>{const n=await $o(jn(e.toBytes()))(t);return{header:zt(He([n.iv,n.tag,n.epPubKey])),encryptedKey:zt(n.encryptedKey)}},Jo=async(t,e)=>{const n=Kt(t.header),s=n.subarray(0,ze),i=n.subarray(ze,ze+Oe),c=n.subarray(ze+Oe),a=Kt(t.encryptedKey),o=Qo(e).secretKey,m=$n(o),h=await Vo(m)(a,i,s,c);if(h===null)throw new Error("There was a problem decrypting the CEK");return h},Zo=async(t,e)=>{const n=await un(e)(Uo(t));return zt(He([n.iv,n.ciphertext,n.tag]))},el=async(t,e)=>{const n=Kt(t),s=n.subarray(0,ze),i=n.subarray(ze,-Oe),c=n.subarray(-Oe),a=await dn(e)(i,c,s);if(a===null)throw new Error("There was an error decoding the message!");return Go(a)},tl={maxWorkspaceLength:32,maxChannelNameLength:32,maxMemberNameLength:32,maxMessageLength:400,maxCEKLength:100};class nl{constructor(e,n){$(this,"programId",Oo);$(this,"constants",tl);$(this,"workspace");$(this,"_coder");$(this,"_events");$(this,"utils",{channel:{isPublic:e=>(e.flags&1)>0,isPermissionless:e=>(e.flags&2)>0},member:{isAuthorized:e=>e.status===Fe.Authorized,isPending:e=>e.status===Fe.Pending,isOwner:e=>e.flags>=255,isAdmin:e=>(e.flags&7)===7,canAddMember:e=>(e.flags&1)>0,canDeleteMember:e=>(e.flags&2)>0,canAuthorizeMember:e=>(e.flags&4)>0},message:{isEncrypted:e=>(e.flags&1)>0}});this.provider=e,this.keypair=n,this._coder=new Qn(Yi),this._events=new Yn(this.programId,e,this._coder)}get connection(){return this.provider.connection}addEventListener(e,n){return this._events.addEventListener(e,(s,i,c)=>{c!=="1111111111111111111111111111111111111111111111111111111111111111"&&n(s,i,c)})}async removeEventListener(e){return await this._events.removeEventListener(e)}setKeypair(e){this.keypair=e}async loadAllChannels(e={}){const n=ve.gpaBuilder().addFilter("accountDiscriminator",Nt);return this.workspace!==void 0&&n.addFilter("workspace",this.workspace),e.name&&n.addFilter("name",e.name),e.creator&&n.addFilter("creator",e.creator),(await n.run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:ve.fromAccountInfo(s.account)[0]}))}async loadChannel(e,n){return ve.fromAccountAddress(this.provider.connection,e,n)}async loadChannelMembers(e){return(await ce.gpaBuilder().addFilter("accountDiscriminator",lt).addFilter("channel",e).run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:ce.fromAccountInfo(s.account)[0]}))}async loadMemberships(){return(await ce.gpaBuilder().addFilter("accountDiscriminator",lt).addFilter("authority",this.provider.publicKey).run(this.provider.connection)).map(s=>({pubkey:s.pubkey,data:ce.fromAccountInfo(s.account)[0]}))}async loadMembership(e,n){return ce.fromAccountAddress(this.provider.connection,e,n)}async getMembershipPDA(e,n){return n=n!=null?n:this.provider.publicKey,await K.findProgramAddress([e.toBuffer(),n.toBuffer()],this.programId)}async loadDevices(e,n){return(await _e.gpaBuilder().addFilter("accountDiscriminator",Tt).addFilter("authority",n!=null?n:this.provider.publicKey).addFilter("channel",e).run(this.provider.connection)).map(c=>({pubkey:c.pubkey,data:_e.fromAccountInfo(c.account)[0]}))}async loadDevice(e,n){return _e.fromAccountAddress(this.provider.connection,e,n)}async getDevicePDA(e,n){return n=n!=null?n:this.keypair.publicKey,await K.findProgramAddress([e.toBuffer(),n.toBuffer()],this.programId)}async encryptCEK(e,n){return Xo(e,n!=null?n:this.keypair.publicKey)}async decryptCEK(e,n){return Jo(e,n!=null?n:this.keypair.secretKey)}async encryptMessage(e,n){return Zo(e,n)}async decryptMessage(e,n){return el(e,n)}async initChannel(e,n){var y,C,D,I,B,A;const s=(y=e.channel)!=null?y:Le.generate(),i=await Yo(),c=await this.encryptCEK(i),[a]=await this.getMembershipPDA(s.publicKey),[o]=await this.getDevicePDA(a),m=this.provider.publicKey,h=new pe,p=this.channelSpace(e.maxMessages);h.add(me.createAccount({fromPubkey:m,newAccountPubkey:s.publicKey,lamports:await this.connection.getMinimumBalanceForRentExemption(p,n==null?void 0:n.commitment),space:p,programId:this.programId})),h.add(xo({key:this.keypair.publicKey,channel:s.publicKey,membership:a,device:o,authority:m},{data:{workspace:(C=e.workspace)!=null?C:"",name:e.name,public:(D=e.public)!=null?D:!1,permissionless:(I=e.permissionless)!=null?I:!1,memberName:(B=e.memberName)!=null?B:"",maxMessages:e.maxMessages,cek:c}}));let g;try{g=await this.provider.sendAndConfirm(h,[s,this.keypair],n)}catch(M){throw(A=fe(M.code))!=null?A:M}return{signature:g,channel:s,cek:i,cekEncrypted:c}}async deleteChannel({channel:e},n){var o;const s=this.provider.publicKey,[i]=await this.getMembershipPDA(e),c=new pe;c.add(po({channel:e,authority:s,authorityMembership:i}));let a;try{a=await this.provider.sendAndConfirm(c,void 0,n)}catch(m){throw(o=fe(m.code))!=null?o:Pe("Unauthorized")}return{signature:a}}async joinChannel(e,n){var h,p;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getDevicePDA(s),c=this.provider.publicKey,a=this.keypair.publicKey,o=new pe;o.add(No({channel:e.channel,membership:s,device:i,authority:c,key:a},{data:{name:e.name,authority:(h=e.authority)!=null?h:null}}));let m;try{m=await this.provider.sendAndConfirm(o,[this.keypair],n)}catch(g){throw(p=fe(g.code))!=null?p:g}return{signature:m}}async leaveChannel(e,n){var m;const[s]=await this.getMembershipPDA(e.channel),i=this.provider.publicKey,c=new pe,a=await this.loadDevices(e.channel);c.add(Ko({channel:e.channel,membership:s,authority:i,anchorRemainingAccounts:a.map(h=>({pubkey:h.pubkey,isSigner:!1,isWritable:!0}))}));let o;try{o=await this.provider.sendAndConfirm(c,void 0,n)}catch(h){throw(m=fe(h.code))!=null?m:h}return{signature:o}}async addMember(e,n){var C,D,I,B;const s=(C=e.key)!=null?C:e.invitee,[i]=await this.getMembershipPDA(e.channel),[c]=await this.getDevicePDA(i),[a]=await this.getMembershipPDA(e.channel,e.invitee),[o]=await this.getDevicePDA(a,s),m=await this.loadDevice(c);if(!m.cek.encryptedKey)throw Pe("Unauthorized");const h=await this.decryptCEK(m.cek),p=await this.encryptCEK(h,s),g=new pe;g.add(oo({channel:e.channel,authority:this.provider.publicKey,invitee:e.invitee,authorityMembership:i,inviteeMembership:a,inviteeDevice:o},{data:{name:(D=e.name)!=null?D:"",flags:(I=e.flags)!=null?I:0,cek:p,key:s}}));let y;try{y=await this.provider.sendAndConfirm(g,void 0,n)}catch(A){throw(B=fe(A.code))!=null?B:A}return{signature:y}}async deleteMember(e,n){var h;const[s]=await this.getMembershipPDA(e.channel,e.authority),[i]=await this.getMembershipPDA(e.channel),c=this.provider.publicKey,a=await this.loadDevices(e.channel,e.authority),o=new pe;o.add(_o({channel:e.channel,membership:s,membershipAuthority:e.authority,authority:c,authorityMembership:i,anchorRemainingAccounts:a.map(p=>({pubkey:p.pubkey,isSigner:!1,isWritable:!0}))}));let m;try{m=await this.provider.sendAndConfirm(o,void 0,n)}catch(p){throw console.log(p),(h=fe(p.code))!=null?h:p}return{signature:m}}async authorizeMember(e,n){var C,D;const s=(C=e.key)!=null?C:e.authority,[i]=await this.getMembershipPDA(e.channel),[c]=await this.getDevicePDA(i),[a]=await this.getMembershipPDA(e.channel,e.authority),[o]=await this.getDevicePDA(a,s),m=await this.loadDevice(c);if(!m.cek.encryptedKey)throw Pe("Unauthorized");const h=await this.decryptCEK(m.cek),p=await this.encryptCEK(h,s),g=new pe;g.add(uo({channel:e.channel,membership:a,device:o,authority:this.provider.publicKey,authorityMembership:i},{data:{cek:p}}));let y;try{y=await this.provider.sendAndConfirm(g,void 0,n)}catch(I){throw(D=fe(I.code))!=null?D:Pe("Unauthorized")}return{signature:y}}async grantAccessMember(e,n){var o;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getMembershipPDA(e.channel,e.authority),c=new pe;c.add(Co({channel:e.channel,membership:i,authority:this.provider.publicKey,authorityMembership:s},{data:{flags:e.flags}}));let a;try{a=await this.provider.sendAndConfirm(c,void 0,n)}catch(m){throw(o=fe(m.code))!=null?o:Pe("Unauthorized")}return{signature:a}}async addDevice(e,n){var g;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getDevicePDA(s),[c]=await this.getDevicePDA(s,e.key),a=await this.loadDevice(i);if(!(a!=null&&a.cek.encryptedKey))throw Pe("Unauthorized");const o=await this.decryptCEK(a.cek),m=await this.encryptCEK(o,e.key),h=new pe;h.add(no({channel:e.channel,authority:this.provider.publicKey,membership:s,device:c},{data:{cek:m,key:e.key}}));let p;try{p=await this.provider.sendAndConfirm(h,void 0,n)}catch(y){throw(g=fe(y.code))!=null?g:y}return{signature:p}}async deleteDevice(e,n){var m,h;const s=(m=e.authority)!=null?m:this.provider.publicKey,[i]=await this.getMembershipPDA(e.channel,s),[c]=await this.getDevicePDA(i,e.key),a=new pe;a.add(yo({channel:e.channel,authority:this.provider.publicKey,device:c,deviceAuthority:s}));let o;try{o=await this.provider.sendAndConfirm(a,void 0,n)}catch(p){throw(h=fe(p.code))!=null?h:p}return{signature:o}}async postMessage(e,n){var h;const[s]=await this.getMembershipPDA(e.channel),[i]=await this.getDevicePDA(s);let c,a=0;if(e.encrypt){const p=await this.loadDevice(i);if(!p.cek.header)throw Pe("Unauthorized");const g=await this.decryptCEK(p.cek);c=await this.encryptMessage(e.message,g),a|=1}else c=e.message;const o=new pe;o.add(Ro({channel:e.channel,membership:s,authority:this.provider.publicKey},{message:String.fromCharCode(a)+c}));let m;try{m=await this.provider.sendAndConfirm(o,void 0,n)}catch(p){throw(h=fe(p.code))!=null?h:p}return{signature:m}}async readMessage(e,n){var a;const[s]=await this.getMembershipPDA(e.channel),i=new pe;i.add(Fo({channel:e.channel,membership:s,authority:this.provider.publicKey},{messageId:e.messageId}));let c;try{c=await this.provider.sendAndConfirm(i,void 0,n)}catch(o){throw(a=fe(o.code))!=null?a:o}return{signature:c}}channelSpace(e=1){return ve.byteSize({workspace:"x".repeat(this.constants.maxWorkspaceLength),name:"x".repeat(this.constants.maxChannelNameLength),creator:K.default,createdAt:0,lastMessageAt:0,flags:0,memberCount:0,messageCount:0,maxMessages:e,messages:Array(e).fill({id:0,sender:K.default,createdAt:0,flags:0,content:"x".repeat(this.constants.maxMessageLength)})})}channelMembershipSpace(){return ce.byteSize({authority:K.default,channel:K.default,name:"x".repeat(this.constants.maxMemberNameLength),status:Fe.Authorized,statusTarget:K.default,lastReadMessageId:0,createdAt:0,flags:0,bump:0})}channelDeviceSpace(){return _e.byteSize({authority:K.default,channel:K.default,key:K.default,cek:{encryptedKey:"x".repeat(this.constants.maxCEKLength),header:"x".repeat(72)},bump:0})}}const It=t=>"***** *** *** *** *******",Y=Re("messenger",()=>{const t=ht(),e=Ge(),n=ut(),{noSol:s}=re(),i=_(()=>e.keypair),c={allChannels:[],ownChannels:[],channel:void 0,channelAddr:void 0,channelMembershipAddr:void 0,channelMembership:void 0,channelMembers:[],channelMessages:[],channelLoading:!1,memberDevices:[],channelEvent:void 0,loading:!1,creating:!1,sending:!1},a=le({...c}),o=_(()=>{var b;return new nl(new Ut(t.connection,(b=n.value)!=null?b:{publicKey:K.default},Ut.defaultOptions()),e.keypair)});let m=[];te(n,b=>{b?g().then():y()},{immediate:!0}),te([i,()=>a.allChannels],()=>{h().then()},{immediate:!0});async function h(){const x=(await o.value.loadMemberships()).map(N=>({pubkey:N.data.channel.toBase58(),status:N.data.status}));a.ownChannels=x}async function p(){console.log("Register events...");for(const b of m)await o.value.removeEventListener(b);m.push(o.value.addEventListener("DeleteMemberEvent",async b=>{var H;if(`${b.authority}`!=`${(H=n.value)==null?void 0:H.publicKey}`)return;const{channel:x}=b,N=a.allChannels.find(ae=>ae.pubkey.toBase58()===x.toBase58());a.channelEvent={channel:N.data.name,address:x.toBase58(),event:"delete"},await h(),`${a.channelAddr}`==`${x}`&&(a.channelMessages=[],a.channel=void 0)})),m.push(o.value.addEventListener("DeleteChannelEvent",async b=>{const{channel:x}=b,N=a.ownChannels.findIndex(H=>H.pubkey===x.toBase58());N!==-1&&(a.ownChannels.splice(N,1),`${b.channel}`==`${a.channelAddr}`&&(a.channelMessages=[],a.channel=void 0))})),m.push(o.value.addEventListener("AddDeviceEvent",async b=>{var x;`${(x=n.value)==null?void 0:x.publicKey}`==`${b.authority}`&&(console.log("[Event] AddDeviceEvent"),`${b.channel}`==`${a.channelAddr}`&&(A(a.channelAddr),Te()))})),m.push(o.value.addEventListener("DeleteDeviceEvent",async b=>{var x;`${(x=n.value)==null?void 0:x.publicKey}`==`${b.authority}`&&(console.log("[Event] DeleteDeviceEvent"),`${b.channel}`==`${a.channelAddr}`&&(A(a.channelAddr),Te()))})),m.push(o.value.addEventListener("NewMessageEvent",async(b,x,N)=>{if(console.log("[Event] NewMessageEvent",b),`${b.channel}`!=`${a.channelAddr}`)return;let H=b.message.content;if(o.value.utils.message.isEncrypted(b.message))try{const J=await M();H=J?await o.value.decryptMessage(b.message.content,J):It(b.message.content)}catch(J){console.log("Error:",J),H=It(b.message.content)}a.channelMessages.push({...b.message,content:H})})),m.push(o.value.addEventListener("AuthorizeMemberEvent",async b=>{var x,N,H;if(console.log("[Event] AuthorizeMemberEvent",b),`${b.authority}`==`${(x=n.value)==null?void 0:x.publicKey}`){h();const ae=b.channel.toBase58(),J=(H=(N=a.allChannels.find(U=>U.pubkey.toBase58()===ae))==null?void 0:N.data.name)!=null?H:"";a.channelEvent={channel:J,address:ae,event:"authorize"}}a.channelAddr&&`${b.channel}`!=`${a.channelAddr}`||(`${b.membership}`==`${a.channelMembershipAddr}`?A(a.channelAddr).then():T().then())})),m.push(o.value.addEventListener("JoinChannelEvent",async b=>{console.log("[Event] JoinChannelEvent",b),`${b.channel}`==`${a.channelAddr}`&&T().then()})),m.push(o.value.addEventListener("LeaveChannelEvent",async b=>{console.log("[Event] LeaveChannelEvent",b),`${b.channel}`==`${a.channelAddr}`&&T().then()}))}async function g(){y(),m=[],a.loading=!0;const b=await o.value.loadAllChannels();await p(),a.allChannels=b,a.loading=!1,console.log(a)}function y(){Object.assign(a,c)}async function C(b,x,N){try{a.creating=!0;const{channel:H}=await o.value.initChannel({name:b,memberName:x,maxMessages:Number(N.maxMessages),public:N.public,permissionless:N.permissionless});await A(H.publicKey),a.channel&&a.allChannels.push({pubkey:H.publicKey,data:a.channel})}finally{a.creating=!1}}async function D(b){const x=new K(b);await o.value.deleteChannel({channel:x}),tt(b)}async function I(b){console.log("leaveChannel channel === ",b.toBase58()),await o.value.leaveChannel({channel:b}),tt(b)}async function B(b,x){const N=new K(b);try{await o.value.joinChannel({channel:N,name:x}),await A(b);const H={pubkey:b.toString(),status:1};a.ownChannels.push(H)}catch(H){console.log(H)}}async function A(b){var x,N,H,ae;a.channelLoading=!0,a.channelMessages=(x=a.channelMessages)!=null?x:[],a.channelMembers=(N=a.channelMembers)!=null?N:[],a.channelMembershipAddr=void 0,a.channelMembership=(H=a.channelMembership)!=null?H:void 0,a.channelAddr=new K(b),a.memberDevices=[];try{if((ae=n.value)!=null&&ae.publicKey)try{const[J]=await o.value.getMembershipPDA(a.channelAddr);a.channelMembershipAddr=J,a.channelMembership=await o.value.loadMembership(J)}catch(J){console.log(J),a.channelMembershipAddr=void 0,a.channelMembership=void 0}await Te(),await T(),await G()}catch(J){console.log("Error",J)}finally{a.channelLoading=!1}}async function M(){if(!(!a.channelMembership||!i.value))try{const[b]=await o.value.getMembershipPDA(a.channelAddr),[x]=await o.value.getDevicePDA(b,i.value.publicKey),N=await o.value.loadDevice(x);return await o.value.decryptCEK(N.cek,i.value.secretKey)}catch(b){console.log(b)}}async function G(){if(!a.channelAddr){console.log("Invalid channel");return}a.channel=await o.value.loadChannel(a.channelAddr);const x=o.value.utils.channel.isPublic(a.channel)?null:await M();a.channelMessages=await Promise.all(a.channel.messages.map(async N=>{let ae=o.value.utils.message.isEncrypted(N)?It(N.content):N.content;const J=Je(N.sender);if(x)try{ae=await o.value.decryptMessage(N.content,x)}catch{console.log(`Failed to decrypt message #${N.id}`)}return{...N,senderDisplayName:J,content:ae}}))}async function T(){if(!a.channelAddr){console.error("Invalid channel");return}a.channelMembers=await w()}async function w(b=a.channelAddr){return await o.value.loadChannelMembers(b)}async function S(b){if(!a.channelAddr){console.log("Please select a channel");return}try{if(!e.isUserHaveSol){s();return}a.sending=!0;let x;a.channel&&(x=o.value.utils.channel.isPublic(a.channel)),await o.value.postMessage({channel:a.channelAddr,message:b,encrypt:!x}),await G()}finally{a.sending=!1}}async function Q(b,x,N,H){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.addMember({channel:a.channelAddr,invitee:new K(b),key:x?new K(x):void 0,name:N,flags:H})}async function be(b){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.deleteMember({channel:a.channelAddr,authority:new K(b)})}async function ke(b){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.addDevice({channel:a.channelAddr,key:new K(b)})}async function Ee(b){if(!a.channelAddr){console.log("Invalid channel");return}await o.value.deleteDevice({channel:a.channelAddr,key:b})}async function he(b){return(await o.value.loadDevices(a.channelAddr,b)).filter(x=>{var N;return((N=x.data.cek)==null?void 0:N.encryptedKey)===""})[0]}async function Te(){a.channelAddr&&a.channelMembership&&(a.memberDevices=await o.value.loadDevices(a.channelAddr,a.channelMembership.authority))}async function et(b){if(!a.channelAddr){console.log("Invalid channel");return}const x=await he(b);await o.value.authorizeMember({channel:a.channelAddr,authority:b,key:x.data.key}),await W()}async function X(){await g()}async function W(){a.channelMembers=await w()}async function kt(b){a.channelAddr=b}function tt(b){const x=a.allChannels.findIndex(N=>N.pubkey.toBase58()===b.toString());a.allChannels.splice(x,1),a.channelMessages=[],a.channel=void 0}async function Ct(b){if(b>ws)return"extra";const x=o.value.channelSpace(b),N=o.value.channelMembershipSpace(),H=o.value.channelDeviceSpace(),ae=await t.connection.getMinimumBalanceForRentExemption(x+N+H),J=890880*2;return(ae+J)/Rt}async function Mt(){if(!a.channelAddr)return;const[b]=await o.value.getMembershipPDA(a.channelAddr),[x]=await o.value.getDevicePDA(b);return(await o.value.loadDevice(x)).key.toBase58()}return{channelMessagesCost:Ct,addDevice:ke,deleteDevice:Ee,channelAuthorityDevice:Mt,state:a,client:o.value,leaveChannel:I,loadChannel:A,joinChannel:B,createChannel:C,deleteChannel:D,postMessage:S,addMember:Q,deleteMember:be,authorizeMember:et,refreshList:X,loadMembers:w,selectChannel:kt}});function al(){const{connection:t}=ht(),e=Se(),{notify:n}=Me(),s=z(!1);return{isAirdrop:s,airdropSol:async()=>{try{const c=await t.requestAirdrop(e.publicKey.value,1*Rt);await t.confirmTransaction(c),n({type:"positive",message:"you got 1 sol",timeout:2e3,position:"top"}),s.value=!0}catch(c){console.log(c),n({type:"negative",message:String(c),position:"top",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})}}}}const pn=15;function sl(){const{createChannel:t}=Y(),{isWalletConnected:e,ok:n,error:s}=re(),i=le({dialog:!1,name:"",memberName:"",maxMessages:pn,public:!1,permissionless:!1,loading:!1});async function c(){if(e())try{i.loading=!0,await t(i.name,i.memberName,{maxMessages:i.maxMessages,public:i.public,permissionless:i.permissionless}),a(),n("Channel was created!")}catch(o){s(`${o}`),console.log(o)}finally{i.loading=!1}}function a(){i.dialog=!1,i.public=!1,i.loading=!1,i.name="",i.maxMessages=15}return{state:i,submit:c,reset:a}}function il(){const t=Y(),{info:e,ok:n,error:s}=re(),i=le({loading:!1});async function c(){if(!t.state.channelAddr){e("Please select a channel");return}try{i.loading=!0,await t.deleteChannel(t.state.channelAddr),n("Channel was deleted!")}catch(a){console.log("Error",a),s(`Error: ${a}`)}finally{i.loading=!1}}return{state:i,submit:c}}function fn(){const{authorizeMember:t,loadChannel:e,state:n}=Y(),{ok:s,error:i}=re(),c=le({loading:!1,dialog:!1});async function a(o){var m;try{c.loading=!0,await t(o),await e((m=n.channelAddr)!=null?m:""),s("Member was authorized")}catch(h){i(`Error: ${h}`),console.log(h)}finally{c.loading=!1}}return{state:c,submit:a}}function ol(){const{state:t,addMember:e,loadChannel:n}=Y(),{ok:s,info:i,error:c,noSol:a}=re(),{isUserHaveSol:o}=Ge(),m=le({dialog:!1,loading:!1});async function h(g){var y;if(m.loading=!0,!t.channelAddr){i("Please select a channel");return}try{if(!o){a();return}return await e(g.wallet,g.key,g.name),await n((y=t.channelAddr)!=null?y:""),s("Member was added"),!0}catch(C){c(`Error: ${C}`),console.log(C)}finally{m.loading=!1,m.dialog=!1}return!1}function p(){m.loading=!1,m.dialog=!1}return{state:m,submit:h,reset:p}}function gn(){const{deleteMember:t,loadChannel:e,state:n}=Y(),{ok:s,error:i}=re(),c=le({loading:!1});async function a(o){var m;try{c.loading=!0,await t(o),await e((m=n.channelAddr)!=null?m:""),s("Member was deleted")}catch(h){i(`Error: ${h}`),console.log(h)}finally{c.loading=!1}}return{state:c,submit:a}}function ll(){const{state:t,joinChannel:e}=Y(),{ok:n,info:s,error:i,noSol:c}=re(),{isUserHaveSol:a}=Ge(),o=le({dialog:!1,loading:!1,name:""});async function m(){if(!t.channelAddr){s("Please select a channel");return}o.loading=!0;try{if(!a){c();return}await e(t.channelAddr,o.name),h(),n("Request was sent")}catch(p){console.log("Error",p),i(`Error: ${p}`)}finally{o.loading=!1}}function h(){o.loading=!1,o.dialog=!1,o.name=""}return{state:o,submit:m,reset:h}}function rl(){const t=Y(),{info:e,ok:n,error:s}=re(),i=le({loading:!1});async function c(){if(!t.state.channelAddr){e("Please select a channel");return}try{i.loading=!0,await t.leaveChannel(t.state.channelAddr),n("Channel was abandoned!")}catch(a){console.log("Error",a),s(`Error: ${a}`)}finally{i.loading=!1}}return{state:i,submit:c}}function cl(){const t=Y(),{ok:e,error:n,noSol:s}=re(),{isUserHaveSol:i}=Ge(),c=le({loading:!1});async function a(o){try{if(c.loading=!0,!i){s();return}await t.addDevice(o),e("device added")}catch{n("Invalid Device Key")}finally{c.loading=!1}}return{state:c,submit:a}}function ul(){const t=Y(),{ok:e}=re(),n=le({loading:!1});async function s(i){try{n.loading=!0,await t.deleteDevice(i),e("device removed")}finally{n.loading=!1}}return{state:n,submit:s}}function re(){const t=Se(),{airdropSol:e}=al(),{notify:n}=Me(),s=m=>n({type:"info",message:m,timeout:4e3}),i=m=>n({type:"negative",message:m,timeout:4e3}),c=(m,h="bottom")=>n({type:"positive",message:m,timeout:4e3,position:h}),a=()=>n({type:"warning",message:"You don't have enough SOL on your balance!",position:"top",timeout:0,actions:[{label:"GET SOL",class:"btn--no-hover",padding:"0 15px 0 10px",size:"14px",color:"black",handler:()=>e()}]});function o(){return t.publicKey.value?!0:(s("Please connect wallet"),!1)}return{ok:c,info:s,error:i,noSol:a,isWalletConnected:o}}const dl=F({__name:"ImportDeviceDialog",emits:["handleImport","closeImportModal"],setup(t,{emit:e}){const{ok:n,error:s}=re(),i=z(),c=()=>{const a=i.value[0],o=new FileReader;o.addEventListener("load",()=>{const m=JSON.parse(o.result);m.backupKey||s("Invalid Key"),e("handleImport",m.backupKey),e("closeImportModal"),n("secret key imported")},!1),a&&o.readAsText(a)};return(a,o)=>(f(),k(de,null,{default:u(()=>[l(ne,{flat:"",square:""},{default:u(()=>[l(R,{class:"q-pa-md",style:{height:"20px"}},{default:u(()=>[l(ge,{modelValue:r(i),"onUpdate:modelValue":o[0]||(o[0]=m=>ee(i)?i.value=m:null),borderless:"",type:"file"},null,8,["modelValue"])]),_:1}),l(R,{class:"q-pa-md"},{default:u(()=>[l(L,{class:"dialog-submit-btn",disabled:!r(i),flat:"",square:"",onClick:c},{default:u(()=>[P(" import device key ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}))}}),ml=F({__name:"AddDeviceDialog",props:{addLoading:Boolean},emits:["handleAddDevice"],setup(t,{emit:e}){const n=z(""),s=()=>e("handleAddDevice",n.value);return(i,c)=>(f(),k(de,null,{default:u(()=>[l(ne,{flat:"",square:"",class:"add-device-dialog"},{default:u(()=>[l(R,{class:"q-px-md q-pt-md justify-center items-center text-body1"},{default:u(()=>[P(" Enter device key ")]),_:1}),l(R,{class:"q-pa-md justify-center"},{default:u(()=>[l(Ye,{onSubmit:s},{default:u(()=>[l(ge,{modelValue:r(n),"onUpdate:modelValue":c[0]||(c[0]=a=>ee(n)?n.value=a:null),class:"input",label:"Device key",dense:"","lazy-rules":"",rules:[a=>a&&a.length>0||"Please enter device key"]},null,8,["modelValue","rules"]),l(L,{type:"submit",class:"dialog-submit-btn",flat:"",square:""},{default:u(()=>[P(" add device ")]),_:1})]),_:1})]),_:1}),l(Ue,{showing:t.addLoading},null,8,["showing"])]),_:1})]),_:1}))}});const hl=ie(ml,[["__scopeId","data-v-fc061ba6"]]),yn="data:image/png;base64,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",pl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAY8AAACtCAMAAAB/VwNcAAAA51BMVEX///+ZmZlFWmTx8fHg4OCRkZH/AACirbJzg4uDg4Ojo6NSZW7z9fX/FxfR1tn/5+dcb3f/7+//ODj/CAj/9/f/yMj/iIj/SEj/ICD/39//19f/p6f/l5doeYH/aGj/V1e6wsX/n5//d3f/Dw/o6+zc4OL/t7eNmqD/YGD/KCjj5ujFzM+Woqj2BATL0dNxgYhPVV90Q0uiLTLgDxH7+/v19vf/v79/jpViTFTJGhytt7v/r6//f39/PkT8Pz+TNDr/MDC3Iye6wsbkxMTqmppcT1e/HyPwaWnyW1tuRk70TU2tKCzoCw0KeumnAAAFA0lEQVR42uzbaVfTQBTG8WuKaTRdUrXW3arFIrTQRVlUENy37/95LGnINKZoSEbz0Pv8j+f4bo5nfieEmxmF/b3KstZkSVeKJowely16YEUPrOiBFT2wogdW9MCKHljRAyt6YEUPrOiBFT2wogdW9MCKHljRAyt6YDUHuH4WPUqukgDh81F2lUUQBT+vWrt3BbnKAoiC90fr2HU79wW3igHR8D7fdU+rv20KaMp+v7p30533+LlApsxDdm+4UXduIz4k2jxE7j06e0ZubrQFLX0eIq0HL9yoFw9aApVGj1ntjfgheXRPgFLqIdK8fceNuvHklqCk1mPW88du1LNHKFOiZg+R5tu6GwYzJf5PjzXEPh65UfUvH9ZA0/J8hN19WnfBp0RVHiK3noBPico8winxWfyQ4E2Jy7pWNMHuFvCUuKyrRRP42hvIn1L0eZx+SoGcEtV6JKdErE8pSj3CTylgU6Juj1lvOvGU+BTlU4pmj8SU2IGcEpV5zLoPPSXq80hOibuClUaP8FMK6JSo0wN3Slzt71dZD9yPYaZExR6z2nBTom6P5IE7wpSo3SP8lAI0JdIjnBJhDtzpMe9+B2NKXNH7DDn68DWeEr9/XCsrPh/LD9wzT4lwz8dKVfq1bHr86Vp2himRHvZLf0rJPiXS47xW4lo2PbCmRHpgXcumR7YpsX7elEiPDF3ea9n0uNC17PSUqNvDyVfBpfZPhpHI8KRt719Fj9xLjd5NFw7c6VGah+nbydBMifQo3eP0Ifm5MCXSozQP0+Hn+MB9YUrcd5ZHD9se6ZZcy24NfzjnRI9/7fHbteymiNx23YMRPUrySE+Jx7O/pvv0KMUjfS17TjM8pEd5HuZatmlCj/I8zKcU08GIHuV5mLPEuOknepTkYaq7puGYHiV7vHETvaOHRQ+vGvV6eyfjUh032edReil65PIIemJ6+TDTUs2jo3oSZPopvRQ98nhsyWK1h9mXGo8PJ5ODg2n0Ekkvpc/D39z0C3rUpBE48xrhLuZYan88nkxG6aXUeXgiXkEPkaoTb2LF7KKVpehRbBMbXbOLVpaiR6FNXPe2RV7tWFyKHnk30byPX1pcih75N9GryTyLS9EjxybGebO6ItaWokfeTTRVi3v0+9FSWjx8b95AZODN83E8dkR2dHlsSqpNHA9PxKMHPc7tMv28qknfrkfgn3r4gSYPi+/zhwPfqkdQ6/VF+r1aQI+c5x9WPTyRV+Efjx65PLqy7lvzCNcL6/LnVV4PA2LBIwLpqnqf2/Tw1w2IFQ9nW2Rb1+9XljyCQXjWLQbEznz+/r2y+dySx5bEDSx5RCn1KHheO6hJlGH116VX+OjXLKXLw8p9n76I9J2qxG0VvhphlqLHRT32Qg6nIWf1gsJXh8xS9LioRyPkcIJq1F7+pXyvmmhP230GGx5eY+/vS/H/n0Pf36UH3ibSA2sT6YG1ifTA2kR6YG0iPbA2kR5Ym0gPrE2kB9Ym0gNrE+mBtYn0wNpEemBtol6PlY8eWNEDK3pgRQ+s6IEVPbCiB1b0wIoeWBX3uMKQogdW9MCKHljRAyt6YEUPrOiBFT2wogdW9MCKHljRAyt6YEUPrOiBFT2wogdW9MCKHljRAyt6YEWPX+3RsQAAAADAIH/raXQshSx/WP6w/GH5w/KH5Q/LH5Y/LH9Y/rD8YfnD8oflD8sflj8sf1j+sPxh+cMScngRsVFgMFsAAAAASUVORK5CYII=",fl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXMAAACSCAMAAACAC9ozAAAA7VBMVEX///+ZmZlFWmTg4OD/AACRkZHx8fFzg4uirbKDg4P09vairLFSZW7R1tlcb3f/MzP/KCj/9/f/EBD/p6f/YGD/UFCiLTL/GBj/Bwf/5+f/19f/n59oeYH/f3//7+//39//z8+6wsX/cHDo6+zc4OKNmqD/l5f/j4//aGjj5ujFzM//x8f/r6+Woqj/WFj/eHj/SEjL0dP/v79xgYj/ICD/t7f/h4dXUlv/QEDJGRz7+/ujo6N/jpWLOD6tt7vzBga6wsaUMzniDhDi0tLkxMTlvb3poaHsjIzufn7vd3fxYmJoSVH0TU16QUizJSm4ULjOAAAEhUlEQVR42uzaaVPaUBTG8VO4JZZGEpAIiCJiQSiyyOLG2I52X7//x2kIyAEMWOQmucv5v8qrO/CbDOQZAGp1icdGo9HsOg4+vdokoNaYI3qCzMMpgZG5f8qYF3oHoGsRmactxuxKD7QsIvMe88pk90qgXRGZl/PssW7tGPQqInMoOwyzO2XQqLDNsfReNofsuex5GjQpCnOsWbGRPe/UCqBDQZnH/7fP3y2G2T++xDUt3E1U2mtnkH1QHwIVxg4dVgbInmkXNXyEjGL7H1xaDLs+03eoznqzSfCyCkUnj+x2pQl693qT4OWd13PI7g5VbR4hozDHykcWYxoP1VDNseOawzBLr6EagTkO1Qyy5+r6DNWIzP2HalGPoRqROXZwds0w61KnR8jQzbFSUdOhGok5NqxrOFT5mtNQlcNcv6Eqyn8t0gtDNaf0UBXFfFy5YzHMUXaoimTuDdUuw6wjJYeqYOZ+QxVUSzxz9YeqmOZqD9XNzOOh9unb7zyy535+jauRsPe5/1BV4k95opu7lZeGqvSPkBKYuxVqKg1VOcy9oZpVZahKYz4ZqrYKQ1Uqc0WGqmzmbiXZh6qE5uN6C0O1LddQldTcG6oWwyyJfuuQ13zyi2oe2QeVHmBZcW99Ac1jG/Xn74PfUO2xTBGP2rCtXxWmpLnbr/0HhnW9odoZXxVifpE5n3d3dX8zP1Q7Tdu77e9i/pE5n3eHQ3Wum6vYisic07trTocq9vGOzIM09zo+6y7f6mQenDkOVWfxVifzwMyx4vKtTuaBmztPPtXJPGDzdN7nAYbMAzUvHE3bx+7JfGWiDnYyJ3MyJ/O1Rxlvp3246HM8isxXHpU6Bez2kONRZL7qqPcwX/KQ41FqmpuNhrmleRJ2U9PLXZTic5SS5gaAsaU5wE5sBpVAKS5HkfnzULsnKMXlKDJ/FuqdceFK9TkeRebroPA78JbjUWS+HspIwiSOR5H5Cig8z+0EgNtRZL4OCtvZ3rxanR6lkrlpTGoBtKaXpjjmfYC+euYNeFJDHHMDwCBzMhfqsyUJVb7mKXNsbqZUM+f4HXrYMrmap5KnVYDqaTJF5v/YtWMVBmEojMK3WSJFfQdRF8HBPYPv/1SFSyMtaDN4h/RyDp3/4RusklxPRVPzKPLUX8T8cmqQqTUz1z1t4Nnyy1zRjcwz+uDuP9TSvJ0U3c48bCKbv/cWI/N+1bNLUXQbc23fHX6HGpkvcrSamWuOzW+eza1PycWPR814/2zumPJnbnLXYhaROTRytJicQWsL5mdTSclDJ7mxN7hrkacwP5vqlDz0zbt04xUoNl8lj2fQFuaxS9yd+5NLhphjjjnmlU9hjnm1UJhjjjnmlU9hjnm1UJhjjjnmlU9VaO4+zIth7iDMi2HuIMyLYe4gzIth7iDMbbM3f5BBmFfeqx06pgEAAGAY5N/1JOxvQALOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wHOL+cBzi/nAc4v5wEDZ33s0IEYIBgAAAAASUVORK5CYII=",gl="data:image/png;base64,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",yl=d("span",{class:"add-title q-pb-md q-pt-sm"}," The Backup Key can be used to restore admin rights in case you lose access to your channels ",-1),bl=d("span",{class:"instructions-step q-pb-md"}," 1. Select Devices from the menu. ",-1),vl=["src"],_l=d("span",{class:"instructions-step"},"2. Click Export and safely store your Backup Key. ",-1),Al=["src"],wl=d("span",{class:"instructions-step"},"3. In order to restore your admin privileges, select Import from the menu.",-1),kl=["src"],Cl=d("span",{class:"instructions-step"},"4. In the pop-up window, click Choose File to select your backup key file, then click Import Device Key. ",-1),Ml=["src"],Sl=d("span",{class:"text-weight-medium"},"Done, your device key has been successfully replaced. ",-1),Dl=F({__name:"BackupDeviceTab",setup(t){return(e,n)=>(f(),k(en,{class:"add-device-instructions"},{default:u(()=>[l(Ce,null,{default:u(()=>[V((f(),k(R,{dense:"",class:"q-pa-none"},{default:u(()=>[l(O,null,{default:u(()=>[yl]),_:1})]),_:1})),[[se]]),l(Be),V((f(),k(R,{dense:"",class:"q-py-md"},{default:u(()=>[l(O,{class:"q-pb-none"},{default:u(()=>[bl,d("img",{src:r(yn),alt:"step"},null,8,vl)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-sm"},{default:u(()=>[l(O,null,{default:u(()=>[_l,d("img",{src:r(pl),alt:"step"},null,8,Al)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-sm"},{default:u(()=>[l(O,null,{default:u(()=>[wl,d("img",{src:r(fl),alt:"step"},null,8,kl)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-sm"},{default:u(()=>[l(O,null,{default:u(()=>[Cl,d("img",{src:r(gl),alt:"step"},null,8,Ml)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-sm"},{default:u(()=>[l(O,null,{default:u(()=>[Sl]),_:1})]),_:1})),[[se]])]),_:1})]),_:1}))}}),xl="/assets/step_2.80ee96fc.png",Il="/assets/step_3.ab364468.png",El="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAboAAACZCAMAAABuZg+bAAAA1VBMVEX///+ZmZlFWmSPnKLg4ODx8fH/AACRkZFzg4vHztGirbKDg4P/v7//f3//QECjo6Ortbnj5uhSZW75+vqirLGXoqj/EhLc4OL09vbR1tn/Y2P/KCj/r6+dqa3/MDD/9/f/5+fW2t3/19fHzdC7w8f/UFD/SEiKOD7/7+//x8f/l5f/h4f/eHj/ODj/ICDoCw3/39//z8//t7f/p6f/n5//j49oeYH/WFjp7O2kr7OLmJ5cb3f/cHDYExX/CAjg4+XFzM96QEh/jpVcT1e3IyeiLTKvub33Iv49AAAEbElEQVR42uzbbVPaQBiF4ae0SYMNNEAjoCJisWptre+i+K7t//9JRTYGHCAgm8U9cO5xRvziB64h5DCLsFnnDOuTDOlDYsLGRDpGOvhIBxvpYCMdbKSDjXSwkQ420sFGOthIBxvpYCMdbKSDjXSwkQ420sGmrL6+RDqcnFd2fNUB5fTb8YKJlNNnx/c6qJyeHW9TsOIdJmykg410sJEONtLBRjrYSAfb5HRfEhOmkWG6z4nJJ2ZFU9AxeyMdbKSDjXSwkQ420sFGOthIBxvpYONnmLCRDjbSwUY62EgHG+lgIx1spIONdLCRDjbSwZZMx2NFFsdXHWykg410sJEONtLBlhLdri9sTFbS1ddd193P5453hY3MSrojN271R27tUNiQrKTbuXFft36eO9oU9ior6WRza90d7PdKzj8QFmUn3XO7x7kfq4N+N/mVPX9DZl9mugz/q4/TNYtx4J/k8suDgMv5q1O/LkmR7n3pVHX/56/hgL9++jIi0tlAp9rxT1fyNwN+o1YE6eyhU234eyv5mC1hRZDONjrVwVHu/Lc72PpWvCJIZyedanMtN3pFkM5musQV4XZXBOlspuutiP0RK2KHdDbTjV8RpLOZLl4RVyNWxMku6Wymm2BFkM5mOtWBn7AiSGcz3QQrgnQ206kONVaEcTrvW1SQ9TTpgu9R1dtgTug0VoRpunZLepXOdOhqjvR1MU90062IjTWjdHfSX+VMg64s/ZUu5o3uzStizb2+H6VTLBSKmnQVqbajh1VlNzVdSQq16GGhazeXdG9YEXuuOxLPE/E06USWMjGdo+ympBPJfozpKs9280s30Yo47/5xvT0LumozstOnKzSe7eacbsyKWHZVf7bN05W9bMfOS4OuFdx27IJFoEtaETGeWbo7UZX06coStTh0CStC4Zmk8yqi0qcLSgtKl7AiFF76dCqvU1ObTuF1aiwonWrnfBDPFJ1qSZ+u2VS/swtNJ1vugN3TY9FThSKhpyraQxeIBKQTWe2RXT/93b5/zHQqyEAF0llWvTPQI7Io0oFU3xj2fKd4wazIZbp0tfCZLqwtPF3/821kkp+FxVTpaiWnKdJ0SjXSGaRTeanSBSKl7k9AOtN0TSkX07xgNqRbgxfMGdApu7TolF2Dtynm6YplZZfeHeatyC3vMM3StcNvnQKJ7fTpujUa/DTFMN2dxIVp0alIl0inf8AhrMhLXt/1s6V9wEEVtsQhXULa4+BSpDPLlyTuTvdYUa8y6QzSPXTlMlV5qdXWPMzXy6mRziBdtSuXaS9FPUx/hDYMsq/6N+/Hit6Zzqs+8OB6FBgdv3PQi3SkIx3pSDdhpCMd6UhHugkjHelIRzrSTRjpSEc60pFuwkhHuoWJdLCRDjbSwUY62EgHG+lgIx1spIONdLCNofvAQCMdbKSDjXSwkQ420sFGOthIBxvp/rdHByQAAAAAgv6/boeQF2Rdx7qOdR3rOtZ1rOtY17GuY13Huo51Hes61nWs61jXsQIoIffa0tNzZgAAAABJRU5ErkJggg==",Bl="/assets/step_5.6d31bfa7.png",Nl="/assets/step_6.2834efd1.png",Tl=d("span",{class:"add-title q-pb-none q-pt-sm"}," For security purposes, you can only access your channels from a single device. If you try to view them from another device, all messages will appear encrypted. ",-1),Pl=d("span",{class:"add-title q-pb-md q-pt-sm"}," In order to add a new device, follow these instructions: ",-1),Kl=d("span",{class:"instructions-step"}," 1. Log in with your new device and select Devices from the menu ",-1),zl=["src"],Ll=d("span",{class:"instructions-step"}," 2. Copy your new device key. ",-1),Rl=["src"],Wl=d("span",{class:"instructions-step"},"3. On your main device, select the channel to which you will add the device",-1),ql=["src"],Fl=d("span",{class:"instructions-step"},"4. Pull up the Devices window and click Add Device.",-1),Hl=["src"],Ol=d("span",{class:"instructions-step"},"5. Enter the previously copied key and click Add.",-1),Ul=["src"],Gl=d("span",{class:"instructions-step"},"6. Confirm the transaction",-1),jl=["src"],$l=d("span",{class:"text-weight-medium"},"Congratulations, you have added a new device. ",-1),Vl=F({__name:"AddDeviceTab",setup(t){return(e,n)=>(f(),k(en,{class:"add-device-instructions"},{default:u(()=>[l(Ce,null,{default:u(()=>[V((f(),k(R,{dense:"",class:"q-pa-none"},{default:u(()=>[l(O,null,{default:u(()=>[Tl,Pl]),_:1})]),_:1})),[[se]]),l(Be),V((f(),k(R,{dense:"",class:"q-py-md"},{default:u(()=>[l(O,null,{default:u(()=>[Kl,d("img",{src:r(yn),alt:"step"},null,8,zl)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-md"},{default:u(()=>[l(O,null,{default:u(()=>[Ll,d("img",{src:r(xl),alt:"step"},null,8,Rl)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-sm"},{default:u(()=>[l(O,null,{default:u(()=>[Wl,d("img",{src:r(Il),alt:"step"},null,8,ql)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"instructions-step"},{default:u(()=>[l(O,null,{default:u(()=>[Fl,d("img",{src:r(El),alt:"step"},null,8,Hl)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-sm"},{default:u(()=>[l(O,null,{default:u(()=>[Ol,d("img",{src:r(Bl),alt:"step"},null,8,Ul)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-sm"},{default:u(()=>[l(O,null,{default:u(()=>[Gl,d("img",{src:r(Nl),alt:"step"},null,8,jl)]),_:1})]),_:1})),[[se]]),V((f(),k(R,{dense:"",class:"q-py-sm"},{default:u(()=>[l(O,null,{default:u(()=>[$l]),_:1})]),_:1})),[[se]])]),_:1})]),_:1}))}}),Ql=d("span",{class:"text-h6"},"Instructions",-1),Yl=F({__name:"InstructionsDialog",setup(t){const e=z("add");return(n,s)=>{const i=Vl,c=Dl;return f(),k(de,null,{default:u(()=>[l(ne,{square:"",flat:"",class:"instructions-card"},{default:u(()=>[l(j,{class:"row items-center justify-between q-pb-sm"},{default:u(()=>[Ql,V(l(L,{size:"10px",flat:"",round:"",dense:"",icon:r(rt)},null,8,["icon"]),[[Ke]])]),_:1}),l(j,{class:"q-pt-none"},{default:u(()=>[l(Xn,{modelValue:r(e),"onUpdate:modelValue":s[0]||(s[0]=a=>ee(e)?e.value=a:null),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:u(()=>[l(Gt,{name:"add",label:"Add Device"}),l(Gt,{name:"backup",label:"backup"})]),_:1},8,["modelValue"]),l(Jn,{modelValue:r(e),"onUpdate:modelValue":s[1]||(s[1]=a=>ee(e)?e.value=a:null),animated:"",class:"panels-height"},{default:u(()=>[l(i,{name:"add"}),l(c,{name:"backup"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}});const Xl=F({props:{text:{type:String,default:""},padding:{type:String,default:"0"}}});const Jl=["innerHTML"];function Zl(t,e,n,s,i,c){return f(),k(Zn,{class:"bg-white text-primary shadow-1 custom-tooltip",style:{"border-radius":"0"},anchor:"top middle",self:"bottom middle"},{default:u(()=>[d("div",{style:Xe({fontSize:"11px",padding:`${t.padding}`}),innerHTML:t.text},null,12,Jl)]),_:1})}const Ie=ie(Xl,[["render",Zl]]),er="/assets/help-btn.06005d5c.svg",tr={class:"q-gutter-md row justify-between q-px-sm",style:{width:"100%"}},nr=["src"],ar=F({__name:"DevicesControl",props:{addLoading:Boolean,isAuthorityDevice:Boolean,devices:Object},emits:["handleExport","handleAddDevice","handleImport"],setup(t,{emit:e}){const n=t,s=z(!1),i=z(!1),c=z(!1),a=async p=>{await e("handleAddDevice",p)};te(()=>n.addLoading,p=>{p||(s.value=!1)});const o=p=>e("handleImport",p),m=()=>i.value=!1,h=()=>{e("handleExport")};return(p,g)=>{const y=Ie,C=Yl,D=hl,I=dl;return f(),E(Z,null,[d("div",tr,[l(L,{class:"q-mr-auto q-ml-none device-btn instructions-btn",round:"",flat:"",size:"16px",color:"indigo-14",onClick:g[1]||(g[1]=B=>c.value=!0)},{default:u(()=>[d("img",{src:r(er),alt:"help"},null,8,nr),l(y,{text:"Instructions"}),l(C,{modelValue:r(c),"onUpdate:modelValue":g[0]||(g[0]=B=>ee(c)?c.value=B:null)},null,8,["modelValue"])]),_:1}),l(L,{class:"control-btn device-btn",square:"",flat:"",disabled:!t.devices.length,onClick:g[2]||(g[2]=B=>s.value=!0)},{default:u(()=>[l(y,{text:"Add new device"}),l(r(tn))]),_:1},8,["disabled"]),l(L,{class:"control-btn device-btn",square:"",flat:"",onClick:g[3]||(g[3]=B=>i.value=!0)},{default:u(()=>[l(y,{text:"Import device key"}),l(r(ea))]),_:1}),l(L,{class:"control-btn device-btn",square:"",flat:"",disabled:!t.isAuthorityDevice&&t.devices.length,onClick:h},{default:u(()=>[l(y,{text:"Export device key"}),l(r(ta))]),_:1},8,["disabled"])]),l(D,{modelValue:r(s),"onUpdate:modelValue":g[4]||(g[4]=B=>ee(s)?s.value=B:null),"add-loading":t.addLoading,onHandleAddDevice:a},null,8,["modelValue","add-loading"]),l(I,{modelValue:r(i),"onUpdate:modelValue":g[5]||(g[5]=B=>ee(i)?i.value=B:null),"is-import-modal":r(i),onHandleImport:o,onCloseImportModal:m},null,8,["modelValue","is-import-modal"])],64)}}});const sr=ie(ar,[["__scopeId","data-v-6796ea53"]]),ir=t=>(We("data-v-4f360cae"),t=t(),qe(),t),or=ir(()=>d("div",{class:"text-body1 text-blue-grey-8 text-left device"}," Devices ",-1)),lr={class:"devices-item__key"},rr=F({__name:"DevicesList",props:{selectDevicekey:Object,deleteLoading:Boolean,devices:Object,authorityDevice:String},emits:["handleSelect","handleDelete"],setup(t,{emit:e}){const n=t,s=a=>e("handleSelect",a),i=a=>e("handleDelete",a),c=a=>a.toBase58()===n.authorityDevice;return(a,o)=>{const m=Ie;return f(),E(Z,null,[or,l(Ce,{bordered:"",separator:"",class:"devices-list"},{default:u(()=>[(f(!0),E(Z,null,ue(t.devices,h=>(f(),k(R,{key:h,"active-class":"bg-blue-grey-8 text-white active",class:we(["devices-item",{"authority-device":c(h.data.key)}]),clickable:"",active:t.selectDevicekey===h.data.key,onClick:p=>s(h.data.key)},{default:u(()=>[d("span",lr,[c(h.data.key)?(f(),k(m,{key:0,text:"Authority device"})):oe("",!0),P(" "+q(h.data.key),1)]),l(ct),c(h.data.key)?oe("",!0):(f(),k(na,{key:0,name:r(rt),size:"18px",class:"delete-device-btn",onClick:p=>i(h.data.key)},{default:u(()=>[l(m,{text:"Delete device"})]),_:2},1032,["name","onClick"]))]),_:2},1032,["class","active","onClick"]))),128))]),_:1}),l(Ue,{showing:t.deleteLoading},null,8,["showing"])],64)}}});const cr=ie(rr,[["__scopeId","data-v-4f360cae"]]),ur=t=>(We("data-v-3809cf5d"),t=t(),qe(),t),dr=ur(()=>d("div",{class:"text-body1 text-blue-grey-8 text-left"}," Device Key ",-1)),mr={class:"text-left q-pb-xs"},hr=["title"],pr=F({__name:"DevicesDialog",props:{authorityDevice:String},emits:["regenerate","channelAuthorityDevice","loadChannel"],setup(t,{emit:e}){const n=t,s=Ge(),{state:i}=Y();re();const c=cl(),a=ul(),o=z(),m=_(()=>{var A;return n.authorityDevice===((A=o.value)==null?void 0:A.toBase58())}),h=()=>{var A,M;return oa(String((M=(A=s.keypair)==null?void 0:A.publicKey)!=null?M:""))},p=_(()=>i.memberDevices),g=_(()=>{var A,M;return aa.xs?Je((A=s.keypair)==null?void 0:A.publicKey,12):(M=s.keypair)==null?void 0:M.publicKey}),y=A=>o.value=A,C=A=>{c.submit(A)},D=()=>{s.exportKey()},I=A=>{s.importKey(A),setTimeout(()=>e("loadChannel"),1e3)},B=A=>{a.submit(A)};return(A,M)=>{const G=Ie,T=cr,w=sr;return f(),k(de,{"transition-duration":"150","transition-show":"fade","transition-hide":"fade"},{default:u(()=>[l(ne,{square:"",flat:"",class:"dialog-wrapper"},{default:u(()=>[l(j,{class:"row items-center q-pb-none q-pr-sm q-pt-sm"},{default:u(()=>[l(ct),V(l(L,{size:"10px",flat:"",round:"",dense:"",icon:r(rt)},null,8,["icon"]),[[Ke]])]),_:1}),l(j,{class:"q-py-none"},{default:u(()=>{var S;return[dr,d("div",mr,[l(L,{class:"copy-btn",size:"12px",flat:"",round:"",dense:"",icon:r(sa),onClick:h},{default:u(()=>[l(G,{text:"Copy to clipboard"})]),_:1},8,["icon"]),d("span",{class:"text-body2",title:(S=r(s).keypair)==null?void 0:S.publicKey},q(r(g)),9,hr)])]}),_:1}),l(Be),l(j,null,{default:u(()=>[l(T,{devices:r(p),"authority-device":t.authorityDevice,"select-devicekey":r(o),"delete-loading":r(a).state.loading,onHandleSelect:y,onHandleDelete:B},null,8,["devices","authority-device","select-devicekey","delete-loading"])]),_:1}),l(Be),l(ia,{align:"right"},{default:u(()=>[l(w,{"add-loading":r(c).state.loading,"is-authority-device":r(m),devices:r(p),onHandleExport:D,onHandleAddDevice:C,onHandleImport:I},null,8,["add-loading","is-authority-device","devices"])]),_:1})]),_:1})]),_:1})}}});const fr=ie(pr,[["__scopeId","data-v-3809cf5d"]]),Ne=Re("channel",()=>{const t=ut(),{state:e,client:n}=Y(),s=_(()=>e.channelLoading),i=_(()=>e.sending),c=_(()=>{var w;return!!((w=t.value)!=null&&w.publicKey)}),a=_(()=>!!e.channel&&n.utils.channel.isPublic(e.channel)),o=_(()=>!!e.channel&&n.utils.channel.isPermissionless(e.channel)),m=_(()=>{var w;return((w=e.channelMembership)==null?void 0:w.status)===0}),h=_(()=>{var w;return((w=e.channelMembership)==null?void 0:w.status)===1}),p=_(()=>{var w,S,Q;return String((w=e.channel)==null?void 0:w.creator)===String((Q=(S=t.value)==null?void 0:S.publicKey)!=null?Q:"-")}),g=_(()=>!!e.channelMembership&&n.utils.member.canAddMember(e.channelMembership)),y=_(()=>!!e.channelMembership&&n.utils.member.canAuthorizeMember(e.channelMembership)),C=_(()=>!!e.channelMembership&&n.utils.member.canDeleteMember(e.channelMembership)),D=_(()=>!!e.channelMembership&&n.utils.member.isAdmin(e.channelMembership)),I=_(()=>!!e.channelMembership&&n.utils.member.isOwner(e.channelMembership)),B=_(()=>c.value&&!!e.channel&&!e.loading&&!m.value),A=_(()=>c.value),M=_(()=>I.value),G=_(()=>!e.sending&&(a.value||m.value));return{ownChannels:_(()=>e.allChannels.filter(w=>{var S;return!!e.ownChannels.find(Q=>Q.pubkey===w.pubkey.toBase58())||w.data.flags===1||w.data.creator.toBase58()===String((S=t.value)==null?void 0:S.publicKey)})),isChannelLoading:s,isSendMessage:i,isPublicChannel:a,isWalletConnected:c,isPermissionlessChannel:o,isAuthorizedMember:m,isPendingMember:h,isChannelCreator:p,isAdmin:D,isOwner:I,canJoinChannel:B,canAddMember:g,canAuthorizeMember:y,canDeleteMember:C,canCreateChannel:A,canDeleteChannel:M,canPostMessage:G}}),bn="/assets/star.073c274c.svg",gr={class:"text-weight-medium row wallet"},yr={key:0,class:"channel-owner"},br=d("img",{src:bn},null,-1),vr={class:"memberlist-info__details"},_r=d("span",null,"Authority:",-1),Ar={class:"memberlist-btns"},wr=F({__name:"MemberListDialog",props:{membersDialog:{type:Boolean,default:!1},authorizeMemberState:{type:Object},deleteMemberState:{type:Object},wallet:{type:Object}},emits:["submit","deleteMember"],setup(t,{emit:e}){const{state:n}=Y(),s=Ne(),i=h=>h>0?"pending":"authorized",c=_(()=>s.canAuthorizeMember),a=_(()=>s.isAuthorizedMember),o=_(()=>s.isPermissionlessChannel),m=h=>{var p;return((p=n.channel)==null?void 0:p.creator.toBase58())===h};return(h,p)=>{const g=Ie;return f(),k(de,{class:"memberlist"},{default:u(()=>[l(ne,{square:"",flat:"",horizontal:""},{default:u(()=>[l(j,{class:"q-px-lg"},{default:u(()=>[P(" MEMBERS ")]),_:1}),l(j,{class:"memberlist-card"},{default:u(()=>[l(Ce,{separator:""},{default:u(()=>[(f(!0),E(Z,null,ue(r(n).channelMembers,y=>(f(),k(R,{key:y.pubkey.toString(),"active-class":"owner",active:`${y.pubkey}`==`${r(n).channelMembershipAddr}`,class:"memberlist-item"},{default:u(()=>[l(O,{class:"memberlist-info"},{default:u(()=>[l($e,{class:"row justify-between memberlist-info__header"},{default:u(()=>[d("span",gr,[P(q(r(ln)(y.data))+" ",1),m(y.data.authority.toBase58())?(f(),E("div",yr,[l(g,{text:"Channel Owner"}),br])):oe("",!0)]),l(la,{class:we([i(y.data.status),"memberlist-status q-pa-xs q-ml-lg"])},{default:u(()=>[P(q(i(y.data.status)),1)]),_:2},1032,["class"])]),_:2},1024),l($e,{caption:"",lines:"2"},{default:u(()=>[d("div",vr,[_r,d("span",null,q(y.data.authority),1)])]),_:2},1024)]),_:2},1024),d("div",Ar,[i(y.data.status)==="pending"&&(r(c)||r(a)&&r(o))?(f(),k(L,{key:0,color:"positive",size:"sm",unelevated:"",class:"full-width",loading:t.authorizeMemberState.loading,disabled:t.authorizeMemberState.loading,onClick:C=>h.$emit("submit",y.data.authority)},{default:u(()=>[P(" Authorize ")]),_:2},1032,["loading","disabled","onClick"])):oe("",!0),r(s).canDeleteMember?(f(),k(L,{key:1,color:"negative",size:"sm",unelevated:"",class:"full-width",loading:t.deleteMemberState.loading,disabled:t.deleteMemberState.loading||m(y.data.authority.toBase58()),onClick:C=>h.$emit("deleteMember",y.data.authority)},{default:u(()=>[P(" Delete ")]),_:2},1032,["loading","disabled","onClick"])):oe("",!0)])]),_:2},1032,["active"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}}),kr=d("br",null,null,-1),Cr=F({__name:"JoinChennalModal",emits:["join"],setup(t,{emit:e}){const n=z("");return(s,i)=>(f(),k(de,null,{default:u(()=>[l(ne,{square:"",flat:""},{default:u(()=>[l(j,{class:"text-body1"},{default:u(()=>[P(" Join Channel ")]),_:1}),l(j,{class:"text-body1 text-blue-grey-8"},{default:u(()=>[l(Ye,{class:"join-channel-form",onSubmit:i[1]||(i[1]=qt(c=>s.$emit("join",r(n)),["prevent"]))},{default:u(()=>[l(ge,{modelValue:r(n),"onUpdate:modelValue":i[0]||(i[0]=c=>ee(n)?n.value=c:null),label:"Member name *","lazy-rules":"",rules:[c=>c&&c.length>2||"Please type something"]},null,8,["modelValue","rules"]),kr,l(L,{type:"submit",class:"dialog-submit-btn","text-color":"black",ripple:!1,square:""},{default:u(()=>[P(" Join Channel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});const Mr=t=>(We("data-v-a58c6d50"),t=t(),qe(),t),Sr=Mr(()=>d("span",{class:"text-blue-grey-8 q-pb-xs"},"Search by name or address",-1)),Dr={class:"search-block"},xr={class:"channel-info text-weight-medium"},Ir={class:"channel-info mobile-text-short"},Er={key:0,class:"already-in-chat"},Br={class:"control-btns"},Nr=F({__name:"JoinChannelDialog",props:{loading:{type:Boolean},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const n=t;z(n.defaultState);const{state:s,selectChannel:i,refreshList:c}=Y(),a=Ne(),o=z(!1),m=z(""),h=z([]),p=_(()=>s.allChannels.filter(A=>A.data.flags===0||A.data.flags===2)),g=_(()=>s.loading),y=A=>A.name.slice(0,2),C=()=>{if(m.value===""){h.value=[],m.value="";return}h.value=p.value.filter(A=>A.data.name.toLocaleLowerCase().includes(m.value.toLocaleLowerCase())||A.pubkey.toBase58().toLocaleLowerCase().includes(m.value.toLocaleLowerCase()))},D=_(()=>{var A;return((A=m.value)==null?void 0:A.length)>0?h.value:p.value}),I=A=>{e("submit",A)};te(m,()=>{C()}),te(()=>n.loading,A=>{A&&(o.value=!1)});const B=A=>a.ownChannels.find(M=>String(M.pubkey)===String(A.pubkey));return(A,M)=>{const G=Ie,T=Cr;return f(),k(de,{class:"join-channel-dialog",onHide:M[3]||(M[3]=w=>A.$emit("reset"))},{default:u(()=>[l(ne,{square:"",flat:""},{default:u(()=>[l(j,{class:"text-body1 text-blue-grey-8"},{default:u(()=>[P(" Join channel ")]),_:1}),l(j,{class:"q-py-none"},{default:u(()=>[Sr,d("div",Dr,[l(ge,{modelValue:r(m),"onUpdate:modelValue":M[0]||(M[0]=w=>ee(m)?m.value=w:null),class:"input no-margin q-pa-none",placeholder:"Search ...",borderless:"",dense:"",debounce:"300"},null,8,["modelValue"])])]),_:1}),l(j,null,{default:u(()=>[r(D).length?(f(),k(Ce,{key:0,bordered:"",separator:"",class:"privat-channels"},{default:u(()=>[(f(!0),E(Z,null,ue(r(D),w=>V((f(),k(R,{key:w,"active-class":"bg-blue-grey-8 text-white",class:"privat-channels-item",active:`${r(s).channelAddr}`==`${w.pubkey}`,clickable:"",onClick:S=>r(i)(w.pubkey)},{default:u(()=>[d("div",{class:"chat-avatar",style:Xe(r(rn)(`${w.pubkey}`))},[d("span",null,q(y(w.data)),1)],4),l(O,{class:"channel-wrapper"},{default:u(()=>[d("span",xr,q(w.data.name),1),d("span",Ir,q(w.pubkey),1)]),_:2},1024),B(w)?(f(),E("div",Er,[l(G,{text:"already in channel"}),l(r(Xt),{size:"18"})])):oe("",!0)]),_:2},1032,["active","onClick"])),[[se]])),128))]),_:1})):(f(),k(R,{key:1,class:"privat-channels justify-center items-center text-blue-grey-5"},{default:u(()=>[P(" Channels not found ")]),_:1}))]),_:1}),d("div",Br,[l(L,{class:we(["control-button",{"refresh-btn":r(g)}]),square:"",flat:"",disable:!r(s).channelAddr,onClick:r(c)},{default:u(()=>[l(r(nn),{style:{color:"#fff"}}),l(G,{text:"Refresh channels"})]),_:1},8,["disable","class","onClick"]),l(L,{class:"control-button",square:"",flat:"",disable:!r(s).channelAddr,onClick:M[1]||(M[1]=w=>o.value=!0)},{default:u(()=>[l(r(ra),{style:{color:"#fff"}}),l(G,{text:"Request to join"})]),_:1},8,["disable"]),l(T,{modelValue:r(o),"onUpdate:modelValue":M[2]||(M[2]=w=>ee(o)?o.value=w:null),onJoin:I},null,8,["modelValue"])]),l(Ue,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})}}});const Tr=ie(Nr,[["__scopeId","data-v-a58c6d50"]]),Pr=t=>(We("data-v-e91edd23"),t=t(),qe(),t),Kr=Pr(()=>d("br",null,null,-1)),zr=F({__name:"AddMemberDialog",props:{loading:{type:Boolean,default:!1},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const s=z(t.defaultState),i=()=>e("submit",s.value);return(c,a)=>(f(),k(de,{class:"add-member-dialog",onHide:a[3]||(a[3]=o=>c.$emit("reset"))},{default:u(()=>[l(ne,{square:"",flat:""},{default:u(()=>[l(j,null,{default:u(()=>[l(Ye,{class:"add-member-form",onSubmit:qt(i,["prevent"])},{default:u(()=>[l(ge,{modelValue:r(s).name,"onUpdate:modelValue":a[0]||(a[0]=o=>r(s).name=o),label:"Member name *",hint:"Min length 3 chars","lazy-rules":"",rules:[o=>o&&o.length>2||"Please type something"]},null,8,["modelValue","rules"]),l(ge,{modelValue:r(s).wallet,"onUpdate:modelValue":a[1]||(a[1]=o=>r(s).wallet=o),label:"Member Wallet *","lazy-rules":"",rules:[o=>o&&o.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),l(ge,{modelValue:r(s).key,"onUpdate:modelValue":a[2]||(a[2]=o=>r(s).key=o),label:"Member Device Key",hint:"Default: The same as member wallet","lazy-rules":"",rules:[o=>!o||o.length>32||"Invalid public key"]},null,8,["modelValue","rules"]),Kr,l(L,{type:"submit",class:"dialog-submit-btn","text-color":"black",ripple:!1,square:"",flat:""},{default:u(()=>[P(" Add Member ")]),_:1})]),_:1},8,["onSubmit"]),l(Ue,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1}))}});const Lr=ie(zr,[["__scopeId","data-v-e91edd23"]]),wt="/assets/info.bfade5eb.svg",Rr={class:"toggle-info max-messages-tooltip"},Wr=d("img",{src:wt,alt:"info"},null,-1),qr={class:"relative-position"},Fr={class:"messages-cost"},Hr={class:"toggle-info max-messages-tooltip"},Or=d("img",{src:wt,alt:"info"},null,-1),Ur={class:"row q-mt-md relative-position",style:{height:"42px"}},Gr={class:"toggle-info"},jr=d("img",{src:wt,alt:"info"},null,-1),$r={key:0,class:"row text-primary toggle-approve"},Vr={class:"toggle-info"},Qr=d("img",{src:wt,alt:"info"},null,-1),Yr=F({__name:"NewChannelDialog",props:{loading:{type:Boolean,default:!1},defaultState:Object},emits:["submit","reset"],setup(t,{emit:e}){const n=t;Me();const{error:s,noSol:i}=re(),{channelMessagesCost:c}=Y(),a=Ge(),o=z(n.defaultState),m=z(0),h=()=>{if(m.value>a.balance)return a.isUserHaveSol||i(),s("You don't have enough SOL");e("submit",o)},p=_(()=>m.value!=="extra"?`~${Number(m.value).toFixed(5)} SOL`:"impossible to count");return te(()=>{var g;return(g=o.value)==null?void 0:g.maxMessages},async g=>{const y=await c(Number(g));m.value=y}),an(async()=>{const g=pn;m.value=await c(Number(g))}),(g,y)=>{const C=Ie;return f(),k(de,{class:"new-channel-dialog",onHide:y[5]||(y[5]=D=>g.$emit("reset"))},{default:u(()=>[l(ne,{square:"",flat:""},{default:u(()=>[l(j,null,{default:u(()=>[l(Ye,{class:"messenger-new-channel-form",onSubmit:h},{default:u(()=>[l(ge,{modelValue:r(o).name,"onUpdate:modelValue":y[0]||(y[0]=D=>r(o).name=D),label:"Channel name *","lazy-rules":"",maxlength:r($t),rules:[D=>D&&D.length>2||"Please type something"]},null,8,["modelValue","maxlength","rules"]),l(ge,{modelValue:r(o).memberName,"onUpdate:modelValue":y[1]||(y[1]=D=>r(o).memberName=D),label:"Member name",maxlength:r($t)},{default:u(()=>[d("div",Rr,[l(C,{text:r(nt)[3],padding:"8px"},null,8,["text"]),Wr])]),_:1},8,["modelValue","maxlength"]),d("div",qr,[l(ge,{modelValue:r(o).maxMessages,"onUpdate:modelValue":y[2]||(y[2]=D=>r(o).maxMessages=D),label:"Max messages","lazy-rules":"",type:"number",debounce:"200",rules:[D=>+D>0||"Invalid value"]},null,8,["modelValue","rules"]),d("div",Fr,q(r(p)),1),d("div",Hr,[l(C,{text:r(nt)[2],padding:"8px"},null,8,["text"]),Or])]),d("div",Ur,[d("div",Gr,[l(C,{text:r(nt)[0],padding:"8px"},null,8,["text"]),jr]),d("div",{class:we(["col text-primary",{"toggle-border":!r(o).public}])},[P(" Private"),l(jt,{modelValue:r(o).public,"onUpdate:modelValue":y[3]||(y[3]=D=>r(o).public=D),label:"Public"},null,8,["modelValue"])],2),r(o).public?oe("",!0):(f(),E("div",$r,[l(jt,{modelValue:r(o).permissionless,"onUpdate:modelValue":y[4]||(y[4]=D=>r(o).permissionless=D)},null,8,["modelValue"]),d("span",null,[d("div",Vr,[l(C,{text:r(nt)[1],padding:"8px"},null,8,["text"]),Qr]),P(" Members can approve")])]))]),l(L,{type:"submit",class:"dialog-submit-btn q-mt-md","text-color":"black",ripple:!1,square:"",flat:""},{default:u(()=>[P(" Create the Channel ")]),_:1})]),_:1}),l(Ue,{showing:t.loading},null,8,["showing"])]),_:1})]),_:1})]),_:1})}}});const Xr=F({__name:"ChannelForm",props:{message:{type:String,default:""},disabled:{type:Boolean,default:!1},sending:{type:Boolean,default:!1}},emits:["submit"],setup(t,{emit:e}){const s=z(t.message),i=()=>{e("submit",s),s.value=""};return(c,a)=>(f(),k(Ye,{class:"channel-form",onSubmit:qt(i,["prevent"])},{default:u(()=>[l(ca,{class:"row message-control"},{default:u(()=>[l(ge,{ref:"inputFocus",modelValue:r(s),"onUpdate:modelValue":a[0]||(a[0]=o=>ee(s)?s.value=o:null),class:"col-grow message-input",placeholder:"Type a message",maxlength:"201",dense:"",borderless:"",autofocus:"",disable:t.disabled,rules:[o=>o.length<=200||"Please use maximum 200 characters"]},null,8,["modelValue","disable","rules"]),l(L,{class:"send-btn",square:"",flat:"",type:"submit",disable:t.disabled||!r(s).length,loading:t.sending},{default:u(()=>[P(" Send ")]),_:1},8,["disable","loading"])]),_:1})]),_:1},8,["onSubmit"]))}});const Jr=ie(Xr,[["__scopeId","data-v-ff3bf9cd"]]),Zr="/assets/solana-logo.3caace62.svg",ec={class:"messenger-content"},tc={key:0,class:"preloader"},nc={key:1,class:"messenger-empty"},ac={key:2,class:"messenger-empty"},sc=d("img",{src:Zr,alt:"logo"},null,-1),ic=d("span",{name:"connect"},"Please connect a wallet",-1),oc=[sc,ic],lc={key:3,class:"messenger-empty"},rc=d("span",{name:"select"},"Please select a channel",-1),cc=[rc],uc=F({__name:"ChannelWrapper",props:{postMessageState:{type:Object}},emits:["sendMessage"],setup(t,{emit:e}){const n=Se(),{state:s}=Y(),i=Ne();function c(I){const B=n.publicKey.value;return B?String(B)!==String(I):!0}const a=_(()=>[...new Map(s.channelMessages.map(I=>[I.id=Number(I.id.toString()),I])).values()]),o=_(()=>{const I=[];let B=0,A;for(const M of a.value)if(A&&`${M.sender}`==`${A}`)I[B-1].text.push(M.content);else{A=M.sender;const G=s.channelMembers.find(T=>T.data.authority.toBase58()===A.toBase58());I.push({id:M.id,sender:M.sender,senderDisplayName:(G==null?void 0:G.data.name)!==""&&!i.isPublicChannel?G==null?void 0:G.data.name:M.senderDisplayName,text:[M.content],date:M.createdAt}),B++}return I}),m=_(()=>i.canPostMessage),h=I=>e("sendMessage",I),p=z(),g=z();te(g,I=>{I&&(p.value.scrollTop=I.scrollHeight)});const y=z(!1),C=ma(()=>{y.value=!1},2e3),D=(I,B,A)=>{if(B){y.value=!1;return}if(A){y.value=!0,C();return}y.value=!0,C()};return(I,B)=>{const A=Jr;return f(),k(ne,{class:we(["messenger-card",{"show-scroll":r(y)}]),square:"",flat:""},{default:u(()=>[d("div",ec,[r(i).isChannelLoading?(f(),E("div",tc,[l(ua,{color:"primary",size:"2em"})])):r(s).channel?(f(),E("div",{key:1,ref_key:"chat",ref:p,class:"row justify-center channel-wrapper",onMouseenter:D,onMouseleave:B[0]||(B[0]=M=>D(M,!0)),onScroll:B[1]||(B[1]=M=>D(M,!1,!0))},[r(o).length>0?(f(),E("div",{key:0,ref_key:"mes",ref:g,class:"messenger-messages"},[(f(!0),E(Z,null,ue(r(o),M=>(f(),k(da,{key:M.id,name:M.senderDisplayName,text:M.text,sent:c(M.sender),class:we(c(M.sender)?"others":"sender")},null,8,["name","text","sent","class"]))),128))],512)):(f(),E("div",nc," No messages "))],544)):r(i).isWalletConnected?(f(),E("div",lc,cc)):(f(),E("div",ac,oc))]),l(A,{message:t.postMessageState.message,sending:r(i).isSendMessage,disabled:!r(m),onSubmit:h},null,8,["message","sending","disabled"])]),_:1},8,["class"])}}});const dc=F({__name:"ChannelControl",props:{isLoading:{type:Boolean}},emits:["createChannel","joinChannel","refreshList"],setup(t,{emit:e}){const n=Ne();re();const{notify:s}=Me();_(()=>n.isPendingMember),_(()=>n.canCreateChannel);const i=c=>{if(!n.isWalletConnected){s({message:"Please connect wallet",color:"negative",position:"top"});return}e(c)};return(c,a)=>{const o=Ie;return f(),k(R,{class:"channel-control-wrapper q-pa-none"},{default:u(()=>[l(O,{class:"button-wrapper"},{default:u(()=>[l(L,{class:we(["control-button",{"refresh-btn":t.isLoading}]),square:"",flat:"",onClick:a[0]||(a[0]=m=>i("refreshList"))},{default:u(()=>[l(r(nn),{style:{color:"#fff"}}),l(o,{text:"Refresh channels"})]),_:1},8,["class"]),l(L,{class:"control-button",square:"",flat:"",onClick:a[1]||(a[1]=m=>i("createChannel"))},{default:u(()=>[l(r(tn),{style:{color:"#fff"}}),l(o,{text:"Create a channel"})]),_:1}),l(L,{class:"control-button",square:"",flat:"",onClick:a[2]||(a[2]=m=>i("joinChannel"))},{default:u(()=>[l(r(ha),{style:{color:"#fff"}}),l(o,{text:"Browse channels"})]),_:1})]),_:1})]),_:1})}}});const mc=ie(dc,[["__scopeId","data-v-6bf7b5b8"]]),hc=t=>(We("data-v-1c977d3a"),t=t(),qe(),t),pc={class:"chat-name"},fc={key:0,class:"message-owner row"},gc=hc(()=>d("img",{src:bn},null,-1)),yc={key:1,class:"message-public"},bc={key:2,class:"pending-icon"},vc=F({__name:"MessengerChannel",props:{pubkey:{type:Object,required:!0},channel:{type:Object,required:!0},isActive:Boolean},emits:["select"],setup(t){const e=t,{state:n}=Y(),s=Se(),i=_(()=>{var p;return(p=n.ownChannels.find(g=>g.pubkey===e.pubkey.toString()))==null?void 0:p.status}),c=_(()=>i.value===1),a=_(()=>e.channel.name.slice(0,2)),o=_(()=>e.channel.flags===1),m=_(()=>{var p,g;return(g=(p=s.publicKey.value)==null?void 0:p.toBase58())!=null?g:""}),h=_(()=>e.channel.creator.toBase58()===m.value);return(p,g)=>{const y=Ie;return f(),k(R,{"active-class":"bg-blue-grey-8 text-white",style:{"min-height":"60px"},active:t.isActive},{default:u(()=>[l(O,{class:"chat-item cursor-pointer",onClick:g[0]||(g[0]=C=>p.$emit("select"))},{default:u(()=>[d("div",{class:"chat-badge",style:Xe(r(rn)(`${t.pubkey}`))},[d("span",null,q(r(a)),1)],4),d("div",pc,q(t.channel.name),1),r(h)?(f(),E("div",fc,[l(y,{text:"Channel Owner"}),gc])):oe("",!0),r(o)?(f(),E("div",yc,[l(y,{text:"Public Channel"}),P(" P ")])):oe("",!0),r(c)?(f(),E("div",bc,[l(y,{text:"Waiting for confirmation"}),l(pa,{color:"primary",size:"16px"})])):oe("",!0)]),_:1})]),_:1},8,["active"])}}});const _c=ie(vc,[["__scopeId","data-v-1c977d3a"]]),Ac=d("div",{class:"text-h5"}," Channels ",-1),wc={class:"text-weight-medium"},kc={class:"memberlist-info__details"},Cc=d("span",null,"Authority:",-1),Mc={class:"memberlist-info__details"},Sc=d("span",null,"Key:",-1),Dc=F({__name:"PendingUsersDialog",props:{pendingChannels:Object},setup(t){z(!1);const{state:e}=Y(),n=fn(),s=gn(),i=async(m,h)=>{e.channelAddr=h,await n.submit(m)},c=async(m,h)=>{e.channelAddr=h,await s.submit(m)},a=_(()=>n.state.loading),o=_(()=>s.state.loading);return(m,h)=>(f(),k(de,null,{default:u(()=>[l(ne,{class:"pending-channels",square:"",flat:"",horizontal:""},{default:u(()=>[l(j,null,{default:u(()=>[Ac]),_:1}),l(j,null,{default:u(()=>[l(Ce,{bordered:""},{default:u(()=>[(f(!0),E(Z,null,ue(t.pendingChannels,(p,g)=>(f(),k(fa,{key:p.name,"expand-separator":"",label:p.channel.data.name,caption:"channel","default-opened":g===0,"header-class":"owner"},{default:u(()=>[l(Ce,{separator:""},{default:u(()=>[(f(!0),E(Z,null,ue(p.pendingMembers,y=>(f(),k(R,{key:y,class:"row justify-between pending-item"},{default:u(()=>[l(O,{class:"memberlist-info"},{default:u(()=>[l($e,{class:"row justify-between"},{default:u(()=>[d("span",wc,q(r(ln)(y.data)),1)]),_:2},1024),l($e,{caption:"",lines:"2"},{default:u(()=>[d("div",kc,[Cc,d("span",null,q(y.data.authority),1)]),d("div",Mc,[Sc,d("span",null,q(y.data.key),1)])]),_:2},1024)]),_:2},1024),l(O,{side:"",class:"memberlist-btns"},{default:u(()=>[l(L,{color:"teal",size:"xs",unelevated:"",class:"full-width",loading:r(a),disabled:r(a),onClick:C=>i(y.data.authority,p.channel.pubkey)},{default:u(()=>[P(" Authorize ")]),_:2},1032,["loading","disabled","onClick"]),l(L,{color:"negative",size:"xs",unelevated:"",class:"full-width",loading:r(o),disabled:r(o),onClick:C=>c(y.data.authority,p.channel.pubkey)},{default:u(()=>[P(" Delete ")]),_:2},1032,["loading","disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label","default-opened"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}});const xc={class:"bell",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",fill:"none","xmlns:v":"https://vecta.io/nano"},Ic=["fill"],Ec=F({__name:"iconBell",props:{color:{type:String,default:"AABEC8"}},setup(t){return(e,n)=>(f(),E("svg",xc,[d("path",{d:"M5.352 14.359h3.294c0 .821-.59 1.641-1.647 1.641s-1.647-.82-1.647-1.641zm8.434-3.467l-.911-1.515a3.68 3.68 0 0 1-.527-1.897V5.325C12.348 2.389 9.949 0 7 0S1.651 2.389 1.651 5.325v2.155a3.68 3.68 0 0 1-.527 1.897l-.911 1.515c-.278.461-.285 1.018-.018 1.487s.749.749 1.29.749h11.03a1.47 1.47 0 0 0 1.291-.749 1.46 1.46 0 0 0-.021-1.487z",fill:`#${t.color}`},null,8,Ic)]))}}),vn=Re("notifications",()=>{const t=ut(),{loadMembers:e,state:n}=Y(),s=Ne(),i=le({showInfo:!1,showDialog:!1,pendingChannels:[]});te([()=>s.ownChannels,()=>n.channelMembers],async(a,o)=>{o.length>0&&await c(o[0])});async function c(a){try{const o=await Promise.all(a.map(async m=>{var g;const{pubkey:h,data:p}=m;if(p.creator.toBase58()===((g=t.value)==null?void 0:g.publicKey.toBase58())){const y=await e(h);if(y.length===0)return;const C=y.filter(D=>D.data.status===1);return C.length?{channel:m,pendingMembers:C}:void 0}}));i.pendingChannels=o.filter(m=>m),i.pendingChannels.length>0?(setTimeout(()=>i.showInfo=!0,2e3),setTimeout(()=>i.showInfo=!1,7e3)):i.showDialog=!1}catch(o){console.log(o)}}return{state:i}});function Bc(){const{state:t}=vn();return{showDialog:_(()=>t.showDialog),showInfo:_(()=>t.showInfo),pendingChannels:_(()=>t.pendingChannels)}}const Nc={class:"panel-notifications__info"},Tc=F({__name:"MessengerNotification",setup(t){const{pendingChannels:e,showInfo:n,showDialog:s}=Bc(),{state:i}=vn(),c=_(()=>{var h,p;return(p=(h=e.value)==null?void 0:h.length)!=null?p:0}),a=_(()=>c.value>0),o=_(()=>n.value?"width: 100%; padding-right: 14px":"width: 0; padding-right: 0;"),m=()=>{!a.value||(i.showDialog=!i.showDialog)};return(h,p)=>{const g=Ec,y=Dc;return f(),E("div",{class:we(["panel-notifications",{"has-notifications":r(a)}]),onClick:m},[d("div",Nc,[l(g,{class:"ring",color:r(a)?"FF5C5C":"AABEC8"},null,8,["color"]),d("span",null,q(c.value),1)]),d("div",{ref:"notificationsInfo",class:"panel-notifications__details",style:Xe(r(o))}," channels are awaiting user confirmation ",4),l(y,{modelValue:r(i).showDialog,"onUpdate:modelValue":p[0]||(p[0]=C=>r(i).showDialog=C),"pending-channels":r(e),onCloseDialog:p[1]||(p[1]=C=>h.isShow.value=!1)},null,8,["modelValue","pending-channels"])],2)}}});const _n=Re("mobile",()=>{const{screen:t}=Me(),e=le({searchOrInfo:"search"}),n=_(()=>t.xs);return te(n,s=>{s&&(e.searchOrInfo="search")}),{state:e,isMobile:n}}),Pc={class:"panel-search"},Kc={class:"search-wrapper"},zc={class:"panel-info"},Lc={class:"chat-info"},Rc={class:"chat-members"},Wc={class:"chat-messages"},qc=["title"],Fc={key:0,class:"members-count bg-cyan-9"},Hc=F({__name:"MessengerToolbar",emits:["search","showMembers","deleteChannel","addMember","showDeviceKey","leaveChannel"],setup(t,{emit:e}){const n=Se(),{state:s}=Y(),i=Ne(),c=_n(),a=sn(),{screen:o,notify:m}=Me(),h=_(()=>!!n.publicKey.value),p=z(""),g=_(()=>s.channel),y=_(()=>{var w,S,Q;if(((w=g.value)==null?void 0:w.memberCount)===null||((S=g.value)==null?void 0:S.memberCount)===void 0)return"";if(i.isPublicChannel){const be=s.channelMessages.map(Ee=>Ee.sender.toBase58());return`${[...new Set(be)].length}\xA0members`}return`${(Q=g.value)==null?void 0:Q.memberCount}\xA0members`}),C=_(()=>{var w,S,Q;return((w=g.value)==null?void 0:w.messageCount)===null||((S=g.value)==null?void 0:S.messageCount)===void 0?"":`${(Q=g.value)==null?void 0:Q.messageCount}\xA0messages`}),D=w=>e("search",w),I=()=>e("showMembers"),B=()=>e("addMember"),A=_(()=>{if(!(!i.isOwner||!i.isAdmin))return s.channelMembers.filter(w=>w.data.status===1).length}),M=_(()=>a.state.mode==="FullScreen");te(p,w=>{D(String(w))});const G=_(()=>c.isMobile&&c.state.searchOrInfo==="info"),T=()=>{if(!n.connected.value)return m({type:"negative",position:"top",message:"Please connect your wallet"});a.state.mode=ot[0]};return te(()=>s.channelAddr,w=>{w&&c.isMobile&&(c.state.searchOrInfo="info")}),(w,S)=>{var ke,Ee;const Q=Tc,be=Ie;return f(),E("div",{class:we(["panel-toolbar",r(c).state.searchOrInfo])},[l(Q),r(G)?(f(),k(r(ga),{key:0,class:"back-arrow",onClick:S[0]||(S[0]=he=>r(c).state.searchOrInfo="search")})):oe("",!0),d("div",Pc,[d("div",Kc,[l(ge,{modelValue:r(p),"onUpdate:modelValue":S[1]||(S[1]=he=>ee(p)?p.value=he:null),class:"search-input no-margin q-pa-none",placeholder:"Search ...",clearable:"",debounce:"300",borderless:"",onClear:S[2]||(S[2]=he=>p.value="")},null,8,["modelValue"])]),r(M)?(f(),E("div",{key:1,class:"size-icon",onClick:S[3]||(S[3]=he=>r(a).state.mode=r(ot)[1])},[l(be,{text:"Compact"}),l(r(ba))])):(f(),E("div",{key:0,class:"size-icon",onClick:T},[l(be,{text:"Full"}),l(r(ya))]))]),d("div",zc,[d("div",Lc,[d("div",Rc,q(r(y)),1),d("div",Wc,q(r(C)),1)]),l(ct,{class:""}),d("div",{class:"chat-name",title:(ke=r(g))==null?void 0:ke.name},q((Ee=r(g))==null?void 0:Ee.name),9,qc),d("div",null,[l(L,{class:"chat-menu",flat:"",square:"",disabled:!r(h)},{default:u(()=>[l(r(va),{size:"18"}),l(_a,{anchor:"bottom middle",self:"top middle"},{default:u(()=>[l(Ce,{style:{"min-width":"120px"},bordered:""},{default:u(()=>[V((f(),k(R,{class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",onClick:S[4]||(S[4]=he=>w.$emit("showDeviceKey"))},{default:u(()=>[l(O,{class:"q-pa-none"},{default:u(()=>[l(L,{flat:"",square:"",size:"sm",class:"bg-blue-grey-7 text-white q-px-xs"},{default:u(()=>[P(" Devices ")]),_:1})]),_:1})]),_:1})),[[Ke]]),V((f(),k(R,{class:"q-my-sm q-mx-sm q-pa-none chat-menu__item relative-position",clickable:"",disable:!r(g),onClick:I},{default:u(()=>[l(O,null,{default:u(()=>[r(A)>0?(f(),E("div",Fc,q(r(A)),1)):oe("",!0),l(L,{flat:"",square:"",size:"sm",class:"bg-cyan-9 text-white q-px-xs"},{default:u(()=>[P(" Members ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Ke]]),r(i).isOwner?V((f(),k(R,{key:0,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!r(i).canAddMember,onClick:B},{default:u(()=>[l(O,null,{default:u(()=>[l(L,{flat:"",square:"",size:"sm",class:"bg-amber-7 text-white q-px-xs"},{default:u(()=>[P(" Add member ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Ke]]):oe("",!0),r(i).isOwner?V((f(),k(R,{key:1,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!r(i).isChannelCreator,onClick:S[5]||(S[5]=he=>w.$emit("deleteChannel"))},{default:u(()=>[l(O,null,{default:u(()=>[l(L,{flat:"",square:"",size:"sm",class:"bg-negative text-white q-px-xs"},{default:u(()=>[P(" Delete ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Ke]]):V((f(),k(R,{key:2,class:"q-my-sm q-mx-sm q-pa-none chat-menu__item",clickable:"",disable:!r(g)||r(i).isPublicChannel,onClick:S[6]||(S[6]=he=>w.$emit("leaveChannel"))},{default:u(()=>[l(O,null,{default:u(()=>[l(L,{flat:"",square:"",size:"sm",class:"bg-negative text-white q-px-xs"},{default:u(()=>[P(" Leave ")]),_:1})]),_:1})]),_:1},8,["disable"])),[[Ke]])]),_:1})]),_:1})]),_:1},8,["disabled"])])])],2)}}});const Oc={class:"col col-4"},Uc={class:"col"},Gc={class:"no-margin"},jc=F({__name:"DebugBtn",props:{isDebugOpen:{type:Boolean,default:!1}},emits:["handleDebugBtn"],setup(t){const e=t,{state:n}=Y(),{isAuthorizedMember:s,isPendingMember:i,isChannelCreator:c}=Ne(),a=z(!1);return te(()=>e.isDebugOpen,o=>{n.channel&&(a.value=o)}),(o,m)=>(f(),k(de,{modelValue:r(a),"onUpdate:modelValue":m[0]||(m[0]=h=>ee(a)?a.value=h:null),onHide:m[1]||(m[1]=h=>o.$emit("handleDebugBtn"))},{default:u(()=>[l(ne,{style:{width:"800px","max-width":"80vw"}},{default:u(()=>[l(j,null,{default:u(()=>[(f(!0),E(Z,null,ue([["Authorized",r(s)],["Pending Access",r(i)],["Channel Creator",r(c)],["Channel Address",r(n).channelAddr],["Channel",r(n).channel],["Membership",r(n).channelMembership],["Members",r(n).channelMembers]],h=>(f(),E("div",{key:h[0],class:"row q-mt-md"},[d("div",Oc,q(h[0]),1),d("div",Uc,[d("pre",Gc,q(h[1]),1)])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),$c={class:"messenger-wrapper"},Vc={class:"messenger-main"},Qc={key:1,class:"messenger-channels-empty"},Yc=F({__name:"Messenger",setup(t){const e=Se(),{state:n,postMessage:s,loadChannel:i,refreshList:c,channelAuthorityDevice:a}=Y(),o=Ne(),m=_n(),h=sl(),p=ll(),g=ol(),y=fn(),C=gn(),D=il(),I=rl(),B=le({message:""});_(()=>n.allChannels);const A=z([]),M=z("");async function G(X){await s(X.value),B.message=""}const T=X=>{if(X===""){A.value=[],M.value="";return}A.value=o.ownChannels.filter(W=>W.data.name.toLocaleLowerCase().includes(X.toLocaleLowerCase())||W.pubkey.toBase58().toLocaleLowerCase().includes(X.toLocaleLowerCase())),M.value=X},w=_(()=>n.loading),S=z(!1),Q=_(()=>A.value.length>0||M.value.length>0?A.value:o.ownChannels),be=X=>g.submit(X),ke=X=>{p.state.name=X,p.submit()},Ee=_(()=>m.isMobile?m.state.searchOrInfo==="search"?1:2:1),he=z("");te(()=>n.memberDevices,async X=>{X.length>0&&(he.value=await a())});const Te=z(!1),et=()=>Te.value=!Te.value;return an(()=>{const X=document.querySelector(".sol-icon");X==null||X.addEventListener("dblclick",()=>{et()})}),(X,W)=>{const kt=Hc,tt=_c,Ct=mc,Mt=uc,b=Yr,x=Lr,N=Tr,H=wr,ae=fr,J=Fi;return f(),E(Z,null,[d("div",$c,[l(kt,{onSearch:T,onShowMembers:W[0]||(W[0]=U=>r(y).state.dialog=!0),onDeleteChannel:W[1]||(W[1]=U=>r(D).submit(r(n).channelAddr)),onLeaveChannel:W[2]||(W[2]=U=>r(I).submit(r(n).channelAddr)),onAddMember:W[3]||(W[3]=U=>r(g).state.dialog=!0),onShowDeviceKey:W[4]||(W[4]=U=>S.value=!0)}),d("div",Vc,[l(ne,{class:"messenger-channels",square:"",flat:""},{default:u(()=>[r(Q).length>0?(f(),k(Ce,{key:0,separator:"",class:"channels-list"},{default:u(()=>[(f(!0),E(Z,null,ue(r(Q),U=>(f(),k(tt,{key:U.name,pubkey:U.pubkey,channel:U.data,"active-class":"select-channel","is-active":`${r(n).channelAddr}`==`${U.pubkey}`,onSelect:_u=>r(i)(U.pubkey)},null,8,["pubkey","channel","is-active","onSelect"]))),128))]),_:1})):(f(),E("div",Qc," No channels ")),l(Ct,{"is-joining":r(p).state.loading,"is-loading":r(w),onCreateChannel:W[5]||(W[5]=U=>r(h).state.dialog=!0),onJoinChannel:W[6]||(W[6]=U=>r(p).state.dialog=!0),onRefreshList:r(c)},null,8,["is-joining","is-loading","onRefreshList"])]),_:1}),l(Mt,{style:Xe({"z-index":r(Ee)}),"post-message-state":r(B),onSendMessage:G},null,8,["style","post-message-state"]),l(Ue,{showing:r(n).loading,color:"primary"},null,8,["showing"])])]),l(b,{modelValue:r(h).state.dialog,"onUpdate:modelValue":W[7]||(W[7]=U=>r(h).state.dialog=U),loading:r(h).state.loading,"default-state":r(h).state,onSubmit:r(h).submit,onReset:r(h).reset},null,8,["modelValue","loading","default-state","onSubmit","onReset"]),l(x,{modelValue:r(g).state.dialog,"onUpdate:modelValue":W[8]||(W[8]=U=>r(g).state.dialog=U),loading:r(g).state.loading,"default-state":r(g).state,onSubmit:be,onReset:r(g).reset},null,8,["modelValue","loading","default-state","onReset"]),l(N,{modelValue:r(p).state.dialog,"onUpdate:modelValue":W[9]||(W[9]=U=>r(p).state.dialog=U),loading:r(p).state.loading,"default-state":r(p).state,onSubmit:ke,onReset:r(p).reset},null,8,["modelValue","loading","default-state","onReset"]),l(H,{modelValue:r(y).state.dialog,"onUpdate:modelValue":W[10]||(W[10]=U=>r(y).state.dialog=U),wallet:r(e),"authorize-member-state":r(y).state,"delete-member-state":r(C).state,onSubmit:r(y).submit,onDeleteMember:r(C).submit},null,8,["modelValue","wallet","authorize-member-state","delete-member-state","onSubmit","onDeleteMember"]),l(ae,{modelValue:r(S),"onUpdate:modelValue":W[11]||(W[11]=U=>ee(S)?S.value=U:null),"authority-device":r(he),onLoadChannel:W[12]||(W[12]=U=>r(i)(r(n).channelAddr))},null,8,["modelValue","authority-device"]),l(J,{"channel-event":r(n).channelEvent},null,8,["channel-event"]),l(jc,{"is-debug-open":r(Te),onHandleDebugBtn:et},null,8,["is-debug-open"])],64)}}});const Xc={},Jc={class:"page-wrapper"},Zc={class:"messenger-container"},eu={class:"container"};function tu(t,e){const n=Yc,s=Ni;return f(),E("div",Jc,[d("div",Zc,[l(n)]),d("div",eu,[l(s)])])}const nu=ie(Xc,[["render",tu],["__scopeId","data-v-f2734b3a"]]),au=()=>Yt(()=>import("./_...all_.9e143163.js"),["assets/_...all_.9e143163.js","assets/vendor.3d51a490.js","assets/_...all_.73169310.css"]),su=[{name:"index",path:"/",component:nu,props:!0},{name:"all",path:"/:all(.*)*",component:au,props:!0,meta:{layout:"empty"}}],iu=vi(su),ou="/",lu=Aa({history:wa(ou),scrollBehavior:()=>({left:0,top:0}),strict:!0,routes:iu}),ru=({app:t})=>{t.use(lu)},cu=Object.freeze(Object.defineProperty({__proto__:null,install:ru},Symbol.toStringTag,{value:"Module"})),uu=({app:t})=>{t.use(ka,{wallets:[new Ca,new Ma,new Sa,new Da,new xa,new Ia,new Ea,new Ba,new Na,new Ta,new Pa,new Ka,new za,new La,new Ra,new Wa,new qa,new Fa,new Ha,new Oa,new Ua,new Ga,new ja,new $a,new Va,new Qa,new Ya,new Xa,new Ja,new Za],autoConnect:!1})},du=Object.freeze(Object.defineProperty({__proto__:null,install:uu},Symbol.toStringTag,{value:"Module"})),mu=es();function hu(){return mu}const pu=Symbol("WALLET_CONNECT_EVENT"),fu=Symbol("WALLET_DISCONNECT_EVENT"),gu=Symbol("ACCOUNT_CHANGE_EVENT"),Et=5e3;function yu(){const{connection:t}=ht(),{emit:e}=hu(),{notify:n}=Me(),{wallet:s}=Se();te(s,i=>{if(!i)return;const c=()=>{const m=i.adapter.publicKey;t.onAccountChange(m,h=>{e(gu,h)}),t.onLogs(m,h=>{console.log(h)}),n({message:"Wallet update",caption:`Connected to wallet ${Je(m.toBase58(),7)}`,timeout:Et}),e(pu,i)},a=()=>{n({message:"Wallet update",caption:"Disconnected from wallet",timeout:Et}),e(fu,i)},o=m=>{!(m!=null&&m.message)||n({type:"negative",message:"Wallet update",caption:m.message,timeout:Et})};i.adapter.once("connect",c),i.adapter.once("disconnect",a),i.adapter.removeAllListeners("error"),i.adapter.on("error",o)},{immediate:!0})}const bu=F({__name:"App",setup(t){return ts(()=>{yu()}),ns({title:"Cgram",meta:[{name:"description",content:""},{name:"keywords",content:""}],link:[{rel:"icon",type:"image/svg+xml",href:"/favicon.svg"}]}),(e,n)=>{const s=Lt("router-view");return f(),k(s)}}});async function vu(){const t=as(bu);Object.values(Object.assign({"./plugins/app.ts":is,"./plugins/pinia.ts":ls,"./plugins/quasar.ts":cs,"./plugins/router.ts":cu,"./plugins/wallet.ts":du})).forEach(e=>{var n;return(n=e.install)==null?void 0:n.call(e,{app:t})}),t.mount("#app")}vu().then();export{ie as _};
